(this.webpackJsonplinkbook=this.webpackJsonplinkbook||[]).push([[16],{246:function(e,a,s){"use strict";s.r(a),s.d(a,"default",(function(){return A}));var t=s(19),r=s(45),o=s(215),n=s(68),i=s(244),c=s(237),l=s(197),d=s(187),b=s(0),u=s.n(b),j=s(181),m=s(12),h=s(190),O=s(208),w=s(189),p=s(224),f=s(184),x=s(192),g=s(194),P=s(195),v=s(213),y=s.n(v),C=s(214),N=s.n(C),S=s(39),W=s(72),E=s(33),F=s(4),T=s(2),k=Object(j.a)((function(e){return{margin:{marginTop:e.spacing(3)},relative:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function L(){var e=k(),a=u.a.useState({oldPassword:"",password:"",confirmPassword:"",showPassword:!1,showOldPassword:!1}),s=Object(t.a)(a,2),o=s[0],n=s[1],i=u.a.useState({password:!1,confirmPassword:!1}),c=Object(t.a)(i,2),l=c[0],d=c[1],b=u.a.useState({submit:!1}),j=Object(t.a)(b,2),v=j[0],C=j[1],L=Object(S.b)().enqueueSnackbar,D=function(e){return function(a){n(Object(m.a)(Object(m.a)({},o),{},Object(r.a)({},e,a.target.value))),"password"===e?d({password:!Object(W.validatePassword)(a.target.value)}):"confirmPassword"===e&&d({confirmPassword:a.target.value!==o.password})}},R=function(e){e.preventDefault()};return Object(T.jsx)(u.a.Fragment,{children:Object(T.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("change pass submitted"),!l.password&&!l.confirmPassword&&o.password&&o.oldPassword){C({submit:!0});var a={oldPassword:o.oldPassword,password:o.password,confirmPassword:o.confirmPassword};fetch("".concat(E.SERVER,"/auth/update-pass"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.success?(L("Password Changed successfully!",{variant:"success"}),n({oldPassword:"",password:"",confirmPassword:"",showPassword:!1,showOldPassword:!1})):L(e.message,{variant:"error"}),C({submit:!1})})).catch((function(e){L("Password Change failed!",{variant:"error"}),C({submit:!1}),console.error("Error:",e)}))}else L("Current password or new password should be valid.",{variant:"warning"})},children:[Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,children:[Object(T.jsx)(O.a,{htmlFor:"userCurrentPassword",children:"Current Password"}),Object(T.jsx)(w.a,{id:"userCurrentPassword",type:o.showOldPassword?"text":"password",value:o.oldPassword,onChange:D("oldPassword"),endAdornment:Object(T.jsx)(p.a,{position:"end",children:Object(T.jsx)(f.a,{"aria-label":"toggle confirm password visibility",onClick:function(){n(Object(m.a)(Object(m.a)({},o),{},{showOldPassword:!o.showOldPassword}))},onMouseDown:R,children:o.showOldPassword?Object(T.jsx)(y.a,{}):Object(T.jsx)(N.a,{})})})})]}),Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,error:l.password,children:[Object(T.jsx)(O.a,{htmlFor:"userPassword",children:"New Password"}),Object(T.jsx)(w.a,{id:"userPassword",type:o.showPassword?"text":"password",value:o.password,onChange:D("password"),endAdornment:Object(T.jsx)(p.a,{position:"end",children:Object(T.jsx)(f.a,{"aria-label":"toggle password visibility",onClick:function(){n(Object(m.a)(Object(m.a)({},o),{},{showPassword:!o.showPassword}))},onMouseDown:R,children:o.showPassword?Object(T.jsx)(y.a,{}):Object(T.jsx)(N.a,{})})})}),Object(T.jsx)(x.a,{children:"Use 8 or more characters with a mix of letters, numbers & symbols"})]}),Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,error:l.confirmPassword,children:[Object(T.jsx)(O.a,{htmlFor:"userConfirmPassword",children:"Confirm Password"}),Object(T.jsx)(w.a,{id:"userConfirmPassword",type:o.showPassword?"text":"password",value:o.confirmPassword,onChange:D("confirmPassword")})]}),Object(T.jsxs)(h.a,{className:Object(F.a)(e.margin,e.relative),children:[Object(T.jsx)(g.a,{variant:"contained",color:"primary",type:"submit",disabled:v.submit,children:"Change Password"}),v.submit&&Object(T.jsx)(P.a,{size:24,className:e.progressbar})]})]})})}var D=s(86),R=s(205),B=s(34),G=Object(j.a)((function(e){return{submit:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},margin:{marginTop:e.spacing(3)},form:{marginBottom:e.spacing(4)}}}));function J(){var e=G(),a=u.a.useContext(D.a),s=u.a.useContext(B.a).authDispatch,r=u.a.useState({name:"",email:"",bio:"",website:"",location:""}),o=Object(t.a)(r,2),n=o[0],i=o[1],c=u.a.useState(!1),l=Object(t.a)(c,2),d=l[0],b=l[1],j=Object(S.b)().enqueueSnackbar;return u.a.useEffect((function(){a&&i({name:a.name,email:a.email,bio:a.bio,website:a.website,location:a.location})}),[a]),Object(T.jsx)(u.a.Fragment,{children:Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(!0);var a={email:n.email,name:n.name,bio:n.bio,location:n.location,website:n.website};fetch("".concat(E.SERVER,"/users/update-profile"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.success?(j("Profile updated!",{variant:"success"}),s({type:"REFUSER"})):(401===e.status&&s({type:"LOGOUT"}),j(e.message,{variant:"error"})),b(!1)})).catch((function(e){j("Profile updation Failed",{variant:"error"}),b(!1),console.error("Error:",e)}))},className:e.form,children:[Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,children:[Object(T.jsx)(O.a,{htmlFor:"userName",children:"Name"}),Object(T.jsx)(w.a,{type:"text",id:"userName",value:n.name,onChange:function(e){return i(Object(m.a)(Object(m.a)({},n),{},{name:e.target.value}))}})]}),Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,children:[Object(T.jsx)(O.a,{htmlFor:"userEmail",children:"Email"}),Object(T.jsx)(w.a,{type:"email",id:"userEmail",value:n.email,onChange:function(e){return i(Object(m.a)(Object(m.a)({},n),{},{email:e.target.value}))}})]}),Object(T.jsx)(h.a,{fullWidth:!0,className:e.margin,children:Object(T.jsx)(R.a,{fullWidth:!0,id:"userBio",rows:3,label:"Write something about you",value:n.bio,multiline:!0,maxLength:"200",onChange:function(e){return i(Object(m.a)(Object(m.a)({},n),{},{bio:e.target.value}))}})}),Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,children:[Object(T.jsx)(O.a,{htmlFor:"userLocation",children:"Location"}),Object(T.jsx)(w.a,{type:"text",id:"userLocation",value:n.location,onChange:function(e){return i(Object(m.a)(Object(m.a)({},n),{},{location:e.target.value}))}})]}),Object(T.jsxs)(h.a,{fullWidth:!0,className:e.margin,children:[Object(T.jsx)(O.a,{htmlFor:"userWebsite",children:"Website"}),Object(T.jsx)(w.a,{type:"url",id:"userWebsite",value:n.website,onChange:function(e){return i(Object(m.a)(Object(m.a)({},n),{},{website:e.target.value}))}})]}),Object(T.jsxs)(h.a,{className:Object(F.a)(e.submit,e.margin),children:[Object(T.jsx)(g.a,{variant:"contained",color:"primary",type:"submit",disabled:d,children:"Update Profile"}),d&&Object(T.jsx)(P.a,{size:24,className:e.progressbar})]})]})})}var U=Object(j.a)((function(e){return{root:Object(r.a)({},e.breakpoints.up("sm"),{margin:e.spacing(2)}),mrBottom:{marginBottom:e.spacing(3)},mrTop:{marginTop:e.spacing(3)}}}));function A(){var e=U(),a=u.a.useState(0),s=Object(t.a)(a,2),r=s[0],b=s[1];return Object(T.jsx)(u.a.Fragment,{children:Object(T.jsxs)(o.a,{className:e.root,children:[Object(T.jsx)(n.a,{variant:"h4",className:e.mrBottom,children:"Account Settings"}),Object(T.jsxs)(i.a,{value:r,onChange:function(e,a){b(a)},indicatorColor:"primary",textColor:"primary",style:{overflow:"auto"},children:[Object(T.jsx)(c.a,{label:"Profile"}),Object(T.jsx)(c.a,{label:"Password"})]}),Object(T.jsx)(l.a,{}),0===r&&Object(T.jsxs)(o.a,{index:0,className:e.mrTop,style:{display:"flex"},children:[Object(T.jsx)(d.a,{maxWidth:"xs",disableGutters:!0,children:Object(T.jsx)(J,{})}),Object(T.jsx)("div",{style:{flexGrow:1}})]}),1===r&&Object(T.jsxs)(o.a,{index:1,style:{display:"flex"},children:[Object(T.jsx)(d.a,{maxWidth:"xs",disableGutters:!0,children:Object(T.jsx)(L,{})}),Object(T.jsx)("div",{style:{flexGrow:1}})]})]})})}}}]);
//# sourceMappingURL=16.21400051.chunk.js.map