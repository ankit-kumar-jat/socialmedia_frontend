(this.webpackJsonplinkbook=this.webpackJsonplinkbook||[]).push([[0],{12:function(e,t){e.exports={SERVER:"http://api.ankitkumarjat.me"}},155:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(15),i=a.n(r),c=a(41),o=a(42),l=a(48),j=a(46),d=a(8),u=a(7),b=a(14),m=a(24);function h(){var e=Object(m.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var O=a(17),p=a(160),x=a(196),g=a(209),f=a(226),v=a(203),w=a(229),y=a(51),S=a(210),P=a(211),C=a(125),k=a(208),E=a(212),N=a(213),R=a(214),T=a(215),I=a(227),L=a(206),F=a(216),D=a(199),W=a(108),A=a(116),G=a.n(A),B=a(64),U=a.n(B),M=a(117),z=a.n(M),V=a(115),q=a.n(V),H=a(112),J=a.n(H),$=a(83),Z=a.n($),_=a(113),Y=a.n(_),K=a(111),Q=a.n(K),X=a(114),ee=a.n(X),te=a(109),ae=a.n(te),ne=a(110),se=a.n(ne),re=a(193),ie=a(21),ce=a(124),oe=s.a.createContext(),le=s.a.createContext(),je=a(16),de=a(106),ue=a.n(de),be=a(162),me=a(158),he=a(159),Oe=a(197),pe=a(198),xe=a(200),ge=a(224),fe=a(205),ve=a(207),we=a(67),ye=a.n(we),Se=a(37),Pe=a(12),Ce=a(1),ke=Object(re.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},cardRoot:{width:"100%",maxWidth:600,overflow:"auto",margin:e.spacing(2),position:"relative",outline:"none"},media:{minHeight:60,maxHeight:250},image:{maxHeight:250,maxWidth:"100%"},imageWrapper:{display:"flex",justifyContent:"center"},closeBtn:{position:"absolute",right:e.spacing(.5),top:e.spacing(.5)},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnWrapper:{position:"relative"},input:{display:"none"}}})),Ee=null;function Ne(){var e=ke(),t=s.a.useContext(oe).authDispatch,a=s.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=s.a.useState({submit:!1}),o=Object(d.a)(c,2),l=o[0],j=o[1],b=s.a.useState({preview:"",postText:""}),m=Object(d.a)(b,2),h=m[0],p=m[1],g=s.a.useState({postText:!1}),f=Object(d.a)(g,2),v=f[0],w=f[1],y=Object(je.b)().enqueueSnackbar,S=function(){i(!1)},P=function(e){return function(t){"image"===e?(Ee=t.target.files[0],p(Object(u.a)(Object(u.a)({},h),{},{preview:URL.createObjectURL(t.target.files[0])}))):(p(Object(u.a)(Object(u.a)({},h),{},Object(O.a)({},e,t.target.value))),w({postText:!Object(Se.validatePostText)(t.target.value)}))}};return Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(I.a,{title:"New Post",children:Object(Ce.jsx)(x.a,{color:"inherit","aria-label":"add new post",onClick:function(){i(!0)},children:Object(Ce.jsx)(ue.a,{})})}),Object(Ce.jsx)(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:r,onClose:S,closeAfterTransition:!0,BackdropComponent:me.a,BackdropProps:{timeout:500},children:Object(Ce.jsx)(he.a,{in:r,children:Object(Ce.jsxs)(Oe.a,{className:e.cardRoot,children:[Object(Ce.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),j({submit:!0}),Object(Se.validatePostText)(h.postText)){var a=new FormData;Ee&&a.append("image",Ee),a.append("postText",h.postText),fetch("".concat(Pe.SERVER,"/posts/create"),{method:"POST",credentials:"include",body:a}).then((function(e){return e.json()})).then((function(e){e.success?(y("Post Created!",{variant:"success"}),p({image:"",postText:""}),i(!1),t({type:"REFPOST"})):(401===e.status&&t({type:"LOGOUT"}),y(e.message,{variant:"error"})),j({submit:!1})})).catch((function(e){y("Post Creation Failed",{variant:"error"}),j({submit:!1}),console.error("Error:",e)}))}else j({submit:!1}),y("Post text must be 10-255 characters long",{variant:"warning"})},children:[Object(Ce.jsx)(pe.a,{className:e.media,children:Object(Ce.jsxs)(D.a,{disableGutters:!0,className:e.imageWrapper,children:[Object(Ce.jsx)("div",{}),h.preview&&Object(Ce.jsx)("img",{src:h.preview,alt:"Post",className:e.image})]})}),Object(Ce.jsx)(xe.a,{children:Object(Ce.jsx)(ge.a,{fullWidth:!0,id:"postText",label:"Whats Happening?",multiline:!0,rows:4,value:h.postText,onChange:P("postText"),error:v.postText})}),Object(Ce.jsxs)(fe.a,{children:[Object(Ce.jsxs)("div",{style:{flexGrow:1},children:[Object(Ce.jsx)("input",{accept:"image/*",className:e.input,id:"postImage",type:"file",onChange:P("image")}),Object(Ce.jsx)("label",{htmlFor:"postImage",children:Object(Ce.jsx)(I.a,{title:"Add post image",component:"span",children:Object(Ce.jsx)(x.a,{"aria-label":"Add post image",color:"primary",children:Object(Ce.jsx)(ye.a,{})})})})]}),Object(Ce.jsx)(L.a,{variant:"contained",disableElevation:!0,onClick:S,children:"Close"}),Object(Ce.jsxs)("div",{className:e.btnWrapper,children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",type:"submit",disableElevation:!0,disabled:l.submit,children:"Create Post"}),l.submit&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]})]})]}),Object(Ce.jsx)(fe.a,{className:e.closeBtn,children:Object(Ce.jsx)(I.a,{title:"Close",children:Object(Ce.jsx)(x.a,{"aria-label":"Close Modal",onClick:S,children:Object(Ce.jsx)(U.a,{})})})})]})})})]})}var Re=a(107),Te=a.n(Re);function Ie(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),n=1e3,s=60*n,r=60*s,i=24*r,c=7*i,o=30*i,l=365*i,j=[{ge:l,divisor:l,unit:"year"},{ge:o,divisor:o,unit:"month"},{ge:c,divisor:c,unit:"week"},{ge:i,divisor:i,unit:"day"},{ge:r,divisor:r,unit:"hour"},{ge:s,divisor:s,unit:"minute"},{ge:30*n,divisor:n,unit:"seconds"},{ge:0,divisor:1,text:"just now"}],d="object"===typeof t?t.getTime():new Date(t).getTime(),u=d-("object"===typeof e?e:new Date(e)).getTime(),b=Math.abs(u),m=0,h=j;m<h.length;m++){var O=h[m];if(b>=O.ge){var p=Math.round(Math.abs(u)/O.divisor),x=u<0;return O.unit?a.format(x?p:-p,O.unit):O.text}}}var Le=Object(re.a)((function(e){return{progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-15,marginLeft:-15}}}));var Fe=function(){var e=Le(),t=s.a.useState(null),a=Object(d.a)(t,2),n=a[0],r=a[1],i=s.a.useState(),c=Object(d.a)(i,2),o=c[0],l=c[1],j=Object(je.b)().enqueueSnackbar,u=function(){r(null)},m=o?Object(Ce.jsx)(C.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"left"},id:"account-menu",transformOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(n),onClose:u,children:o.length>0?o.map((function(e){return Object(Ce.jsx)(k.a,{onClick:u,component:b.b,to:"/posts/".concat(e.postId),children:"".concat(e.message," ").concat(Ie(e.createdAt))})})):Object(Ce.jsx)(k.a,{onClick:u,children:"You have no notifications yet"})}):Object(Ce.jsx)(C.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"left"},id:"account-menu",keepMounted:!0,transformOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(n),onClose:u,children:Object(Ce.jsx)(k.a,{children:Object(Ce.jsx)("div",{style:{minWidth:300,minHeight:100},children:Object(Ce.jsx)(ve.a,{className:e.progressbar,size:30})})})});return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(I.a,{title:"Notifications",children:Object(Ce.jsx)(x.a,{"aria-label":"Notifications",color:"inherit",onClick:function(e){r(e.currentTarget),fetch("".concat(Pe.SERVER,"/users/notifications"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?l(e.notifications):j(e.message,{variant:"error"})})).catch((function(e){j("Failed to get notifications",{variant:"error"}),console.error("Error:",e)}))},children:Object(Ce.jsx)(Te.a,{})})}),m]})},De=Object(re.a)((function(e){return{root:{display:"flex"},drawer:Object(O.a)({},e.breakpoints.up("md"),{width:300,flexShrink:0}),appBar:{zIndex:e.zIndex.drawer+1},menuButton:Object(O.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:300},content:{flexGrow:1,paddingTop:e.spacing(3)},grow:{flexGrow:1},mrLeft:{marginLeft:e.spacing(1)},title:{textDecoration:"none"},justCenter:{justifyContent:"center"},avatar:{width:e.spacing(10),height:e.spacing(10)}}}));var We=function(e){var t=e.window,a=De(),n=Object(ie.a)(),r=s.a.useState(!1),i=Object(d.a)(r,2),c=i[0],o=i[1],l=s.a.useContext(oe),j=l.authState,u=l.authDispatch,h=s.a.useState(null),O=Object(d.a)(h,2),A=O[0],B=O[1],M=s.a.useState(null),V=Object(d.a)(M,2),H=V[0],$=V[1],_=Object(m.h)(),K=Object(je.b)().enqueueSnackbar,X=void 0!==t?function(){return t().document.body}:void 0,te=s.a.useState(!0),ne=Object(d.a)(te,2),re=ne[0],de=ne[1],ue=Object(ce.a)(re?{palette:{type:"light"}}:{palette:{type:"dark"}},W.zhCN),be=re?Object(Ce.jsx)(se.a,{}):Object(Ce.jsx)(ae.a,{}),me=function(){$(null)},he=function(){o(!c)},Oe=function(){c&&o(!c)};s.a.useEffect((function(){j.isAuthenticated&&fetch("".concat(Pe.SERVER,"/users/username/").concat(j.username),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?B(e):(401===e.status&&u({type:"LOGOUT"}),B(null))})).catch((function(e){B(null)}))}),[j,j.refreshUser,u]);var pe=function(){fetch("".concat(Pe.SERVER,"/auth/logout"),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.success){K("Logout successfully!",{variant:"success"}),u({type:"LOGOUT"})}else{K("Logout failed!",{variant:"error"})}})).catch((function(e){K("Logout failed!",{variant:"error"})}))},xe=Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("div",{className:a.toolbar,children:Object(Ce.jsxs)(p.a,{children:[Object(Ce.jsx)("div",{className:a.grow}),Object(Ce.jsx)(x.a,{"aria-label":"Close Drawer",color:"inherit",onClick:he,children:Object(Ce.jsx)(U.a,{})})]})}),Object(Ce.jsx)(g.a,{}),A&&Object(Ce.jsx)(f.a,{smDown:!0,implementation:"css",children:Object(Ce.jsxs)(v.a,{className:a.userInfo,children:[Object(Ce.jsx)(p.a,{className:a.justCenter,children:Object(Ce.jsx)(x.a,{component:b.b,to:"/users/".concat(A.login),"area-label":"view",style:{padding:0},children:Object(Ce.jsx)(w.a,{className:a.avatar,src:A.avatar?"".concat(Pe.SERVER).concat(A.avatar):"",alt:"".concat(A.login,"'s avatar")})})}),Object(Ce.jsx)(p.a,{className:a.justCenter,dense:!0,children:Object(Ce.jsx)(y.a,{variant:"h6",component:b.b,to:"/users/".concat(A.login),color:"inherit",style:{textDecoration:"none"},children:A.login})}),Object(Ce.jsx)(p.a,{className:a.justCenter,dense:!0,children:Object(Ce.jsxs)(v.a,{style:{display:"flex"},disablePadding:!0,children:[Object(Ce.jsxs)(p.a,{style:{display:"flex",flexDirection:"column"},dense:!0,children:[Object(Ce.jsx)(y.a,{variant:"body1",children:"Posts"}),Object(Ce.jsx)(y.a,{variant:"h6",children:A.posts})]}),Object(Ce.jsxs)(p.a,{style:{display:"flex",flexDirection:"column"},dense:!0,children:[Object(Ce.jsx)(y.a,{variant:"body1",children:"Followers"}),Object(Ce.jsx)(y.a,{variant:"h6",children:A.followers})]}),Object(Ce.jsxs)(p.a,{style:{display:"flex",flexDirection:"column"},dense:!0,children:[Object(Ce.jsx)(y.a,{variant:"body1",children:"Following"}),Object(Ce.jsx)(y.a,{variant:"h6",children:A.following})]})]})})]})}),Object(Ce.jsx)(g.a,{}),Object(Ce.jsx)(v.a,{children:[{name:"Home",icon:Object(Ce.jsx)(Q.a,{}),index:1,to:"/"},{name:"Feed",icon:Object(Ce.jsx)(J.a,{}),index:2,to:"/feed"},{name:"Trending",icon:Object(Ce.jsx)(Y.a,{}),index:3,to:"/trending"},{name:"Settings",icon:Object(Ce.jsx)(ee.a,{}),index:5,to:"/settings"},{name:"My Profile",icon:Object(Ce.jsx)(Z.a,{}),index:6,to:"/users/".concat(j.username)}].map((function(e,t){return Object(Ce.jsxs)(p.a,{button:!0,selected:_.pathname===e.to,component:b.b,to:e.to,onClick:Oe,children:[Object(Ce.jsx)(S.a,{children:e.icon}),Object(Ce.jsx)(P.a,{primary:e.name})]},e.index)}))}),Object(Ce.jsx)(g.a,{}),Object(Ce.jsx)(v.a,{children:Object(Ce.jsxs)(p.a,{button:!0,onClick:function(){Oe(),pe()},children:[Object(Ce.jsx)(S.a,{children:Object(Ce.jsx)(q.a,{})}),Object(Ce.jsx)(P.a,{primary:"Logout"})]})})]}),ge=Object(Ce.jsxs)(C.a,{anchorEl:H,anchorOrigin:{vertical:"top",horizontal:"left"},id:"account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(H),onClose:me,children:[Object(Ce.jsx)(k.a,{onClick:me,component:b.b,to:"/settings",children:"Account Settings"}),Object(Ce.jsx)(k.a,{onClick:me,component:b.b,to:"/users/".concat(j.username),children:"Profile"}),Object(Ce.jsx)(k.a,{onClick:function(){me(),pe()},children:"Logout"})]});return Object(Ce.jsx)(E.a,{theme:ue,children:Object(Ce.jsxs)("div",{className:a.root,children:[Object(Ce.jsx)(N.a,{}),Object(Ce.jsx)(R.a,{position:"fixed",className:a.appBar,children:Object(Ce.jsxs)(T.a,{children:[j.isAuthenticated?Object(Ce.jsx)(x.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:he,className:a.menuButton,children:Object(Ce.jsx)(G.a,{})}):"",Object(Ce.jsx)(y.a,{variant:"h6",noWrap:!0,className:a.title,component:b.b,to:"/",color:"inherit",children:"LinkBook"}),Object(Ce.jsx)("div",{className:a.grow}),j.isAuthenticated&&Object(Ce.jsx)(Ne,{}),Object(Ce.jsx)(I.a,{title:"Theme Toggle",children:Object(Ce.jsx)(x.a,{"aria-label":"Theme toggle",onClick:function(){de(!re)},color:"inherit",children:be})}),j.isAuthenticated?Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(Fe,{}),Object(Ce.jsx)(I.a,{title:"Account",children:Object(Ce.jsx)(x.a,{"aria-label":"Current User",color:"inherit",edge:"end","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){$(e.currentTarget)},children:Object(Ce.jsx)(z.a,{})})})]}):Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(L.a,{color:"inherit",component:b.b,to:"/login",className:a.mrLeft,children:"Login"}),Object(Ce.jsx)(L.a,{color:"inherit",component:b.b,to:"/register",className:a.mrLeft,children:"Register"})]})]})}),ge,j.isAuthenticated?Object(Ce.jsxs)("nav",{className:a.drawer,"aria-label":"Drawer",children:[Object(Ce.jsx)(f.a,{mdUp:!0,implementation:"css",children:Object(Ce.jsx)(F.a,{container:X,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:c,onClose:he,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:xe})}),Object(Ce.jsx)(f.a,{smDown:!0,implementation:"css",children:Object(Ce.jsx)(F.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:xe})})]}):"",Object(Ce.jsxs)("main",{className:a.content,children:[Object(Ce.jsx)("div",{className:a.toolbar}),Object(Ce.jsx)(D.a,{maxWidth:"xl",children:Object(Ce.jsx)(le.Provider,{value:A,children:e.children})})]})]})})},Ae=a(223),Ge=a(218),Be=a(219),Ue=a(192),Me=a(217),ze=a(118),Ve=a.n(ze),qe=a(120),He=a.n(qe),Je=a(94),$e=a.n(Je),Ze=a(119),_e=a.n(Ze),Ye=a(121),Ke=a.n(Ye),Qe=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(Pe.SERVER,"/users/avatar?userId=").concat(this.props.comment.userId),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.success?e.setState({user:t,isLoading:!1}):e.setState({user:{login:null,avatar:null,userId:e.props.comment.userID},isLoading:!1})})).catch((function(t){e.setState({user:{login:null,avatar:null,userId:e.props.comment.userID},isLoading:!1})}))}},{key:"render",value:function(){return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsxs)(xe.a,{style:{display:"flex"},children:[this.state.isLoading?Object(Ce.jsx)(Me.a,{animation:"wave",variant:"circle",width:40,height:40}):Object(Ce.jsx)(x.a,{component:b.b,to:"/users/".concat(this.state.user.login),"aria-label":"user profile",style:{padding:0,height:"max-content"},children:Object(Ce.jsx)(w.a,{"aria-label":"user avatar",src:this.state.user.avatar?"".concat(Pe.SERVER).concat(this.state.user.avatar):""})}),Object(Ce.jsxs)("div",{style:{marginLeft:16,flexGrow:1},children:[this.state.isLoading?Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"40%",style:{marginBottom:18}}):Object(Ce.jsxs)(y.a,{component:"p",children:[Object(Ce.jsx)(y.a,{variant:"subtitle2",component:b.b,to:"/users/".concat(this.state.user.login),color:"inherit",style:{textDecoration:"none"},children:this.state.user.login}),Object(Ce.jsx)(y.a,{component:"span",variant:"caption",style:{marginLeft:8},children:Ie(this.props.comment.created_at)})]}),this.state.isLoading?Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:12}}):Object(Ce.jsx)(y.a,{component:"p",variant:"body2",style:{marginTop:8},children:this.props.comment.value})]})]})})}}]),a}(n.Component),Xe=Object(re.a)((function(e){return{card:{borderRadius:10,marginBottom:e.spacing(3)},cardContent:{paddingTop:0,paddingBottom:0},marginLeft:{marginLeft:e.spacing(2)},commentForm:{display:"flex",alignItems:"center"},commentAvatar:{marginRight:e.spacing(2)},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-4,marginLeft:-12},noPadding:{padding:0},media:{paddingTop:"56.25%"}}}));function et(e){var t=Xe(),a=s.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=s.a.useState(!0),o=Object(d.a)(c,2),l=o[0],j=o[1],m=s.a.useContext(oe).authDispatch,h=s.a.useState(e.post),O=Object(d.a)(h,2),p=O[0],f=O[1],v=s.a.useState({comment:""}),S=Object(d.a)(v,2),P=S[0],E=S[1],N=s.a.useState(),R=Object(d.a)(N,2),T=R[0],L=R[1],F=s.a.useState(null),D=Object(d.a)(F,2),W=D[0],A=D[1],G=s.a.useContext(le),B=s.a.useState({comment:!1,delete:!1}),U=Object(d.a)(B,2),M=U[0],z=U[1],V=s.a.useState(!1),q=Object(d.a)(V,2),H=q[0],J=q[1],$=Object(je.b)().enqueueSnackbar,Z=new Date(p.created_at).toDateString().split(" "),_=function(){A(null)},Y=Boolean(W),K="post-".concat(p.postId,"-menu"),Q=Object(Ce.jsxs)(C.a,{anchorEl:W,anchorOrigin:{vertical:"top",horizontal:"left"},id:K,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Y,onClose:_,children:[Object(Ce.jsx)(k.a,{onClick:_,disabled:!0,children:"Save Post"}),Object(Ce.jsx)(k.a,{onClick:_,disabled:!0,children:"Report post"}),!l&&e.notSkeleton&&p.owner&&G.userId===p.owner.userId&&Object(Ce.jsx)("div",{children:Object(Ce.jsx)(k.a,{onClick:function(){_(),function(){var e={postId:p.postId};window.confirm("Are you sure you want to delete post?")&&fetch("".concat(Pe.SERVER,"/posts/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.success?($("Post Deleted!",{variant:"success"}),m({type:"REFUSER"}),i(!0)):($(e.message,{variant:"error"}),z({delete:!1}))})).catch((function(e){$("Post deletion failed!",{variant:"error"}),z({delete:!1}),console.error("Error:",e)}))}()},children:Object(Ce.jsx)(y.a,{color:"secondary",children:"Delete post"})})})]}),X=function(){fetch("".concat(Pe.SERVER,"/posts/like?postId=").concat(p.postId),{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success&&(e.success?(e.liked?f(Object(u.a)(Object(u.a)({},p),{},{likes:p.likes+1})):f(Object(u.a)(Object(u.a)({},p),{},{likes:p.likes-1})),L(e.liked)):(401===e.status&&m({type:"logout"}),$(e.message,{variant:"error"})))})).catch((function(e){$("Failed to like post",{variant:"error"})}))};return s.a.useEffect((function(){e.notSkeleton&&p.postId&&fetch("".concat(Pe.SERVER,"/posts/like?postId=").concat(p.postId),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success&&L(e.liked),j(!1)})).catch((function(e){j(!1)}))}),[L,p.postId,e.notSkeleton]),Object(Ce.jsxs)(s.a.Fragment,{children:[!r&&Object(Ce.jsxs)(Oe.a,{className:t.card,variant:"outlined",children:[Object(Ce.jsx)(Ge.a,{avatar:!l&&e.notSkeleton?Object(Ce.jsx)(x.a,{component:b.b,to:"/users/".concat(p.owner.login),className:t.noPadding,"aria-label":"user profile",children:Object(Ce.jsx)(w.a,{"aria-label":"user avatar",alt:p.owner.login,src:p.owner.avatar?"".concat(Pe.SERVER).concat(p.owner.avatar):""})}):Object(Ce.jsx)(Me.a,{animation:"wave",variant:"circle",width:40,height:40}),action:!l&&e.notSkeleton?Object(Ce.jsx)(x.a,{"aria-label":"Post options","aria-controls":K,"aria-haspopup":"true",onClick:function(e){A(e.currentTarget)},children:Object(Ce.jsx)(Ve.a,{})}):null,title:l?Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):Object(Ce.jsx)(y.a,{component:b.b,to:"/users/".concat(p.owner.login),color:"inherit",variant:"body2",style:{textDecoration:"none"},children:p.owner.login}),subheader:l?Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"40%"}):"".concat(Z[1]," ").concat(Z[2]," ").concat(Z[3])}),!l&&e.notSkeleton?p.postImage&&Object(Ce.jsx)(Be.a,{style:{height:0,paddingTop:"56.25%"},image:"".concat(Pe.SERVER).concat(p.postImage),title:"".concat(p.owner.login,"'s post"),alt:p.postImage,to:"/posts/".concat(p.postId),component:e.single?xe.a:b.b}):Object(Ce.jsx)(Me.a,{animation:"wave",variant:"rect",className:t.media}),Object(Ce.jsx)(xe.a,{children:!l&&e.notSkeleton?Object(Ce.jsx)(y.a,{component:"p",children:p.postText}):Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(Me.a,{animation:"wave",height:10,style:{marginBottom:6}}),Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"80%"})]})}),!l&&e.notSkeleton?Object(Ce.jsxs)(y.a,{className:t.marginLeft,variant:"subtitle2",component:"p",children:[p.likes," ",p.like>1?"Likes":"Like",Object(Ce.jsxs)(y.a,{component:"span",variant:"subtitle2",className:t.marginLeft,children:[p.comments," ",p.comments>1?"Comments":"Comment"]})]}):Object(Ce.jsx)(Me.a,{animation:"wave",height:10,width:"50%",style:{marginLeft:16,marginBottom:11}}),Object(Ce.jsx)(fe.a,{disableSpacing:!0,children:e.notSkeleton?Object(Ce.jsxs)(s.a.Fragment,{children:[T?Object(Ce.jsx)(I.a,{title:"Unlike this",children:Object(Ce.jsx)(x.a,{"aria-label":"unlike",onClick:X,color:"primary",children:Object(Ce.jsx)($e.a,{color:"inherit"})})}):Object(Ce.jsx)(I.a,{title:"Like this",children:Object(Ce.jsx)(x.a,{"aria-label":"like",onClick:X,children:Object(Ce.jsx)($e.a,{})})}),Object(Ce.jsx)(I.a,{title:"Comments",children:Object(Ce.jsx)(x.a,{className:t.marginLeft,"aria-label":"comment",onClick:function(){J(!H)},children:Object(Ce.jsx)(_e.a,{})})}),Object(Ce.jsx)(I.a,{title:"Share this",children:Object(Ce.jsx)(x.a,{"aria-label":"share",className:t.marginLeft,children:Object(Ce.jsx)(He.a,{})})})]}):Object(Ce.jsx)("div",{style:{height:36}})}),Object(Ce.jsxs)(Ue.a,{in:H,timeout:"auto",unmountOnExit:!0,children:[Object(Ce.jsx)(g.a,{}),Object(Ce.jsx)(xe.a,{children:Object(Ce.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),P.comment){z({comment:!0});var t={postId:p.postId,value:P.comment};fetch("".concat(Pe.SERVER,"/posts/comment"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.success){E({comment:""}),$(e.message,{variant:"success"});var t=p.commentslist;t.unshift(e),f(Object(u.a)(Object(u.a)({},p),{},{comments:p.comments+1,commentslist:t}))}else 401===e.status&&m({type:"logout"}),$(e.message,{variant:"error"});z({comment:!1})})).catch((function(e){$("Failed to get post",{variant:"error"}),z({comment:!1}),console.error("Error:",e)}))}else $("Comment can't be empty",{variant:"warning"})},className:t.commentForm,children:[G&&Object(Ce.jsx)(w.a,{src:G.avatar?"".concat(Pe.SERVER).concat(G.avatar):"",className:t.commentAvatar}),Object(Ce.jsx)(ge.a,{id:"commentInput",label:"Write a comment...",onChange:function(e){E(Object(u.a)(Object(u.a)({},P),{},{comment:e.target.value}))},value:P.comment,fullWidth:!0}),Object(Ce.jsxs)("div",{style:{position:"relative"},children:[Object(Ce.jsx)(I.a,{title:"Add Comment",children:Object(Ce.jsx)(x.a,{"aria-label":"add comment",color:"primary",type:"submit",disabled:M.comment,children:Object(Ce.jsx)(Ke.a,{})})}),M.comment&&Object(Ce.jsx)(ve.a,{size:24,className:t.progressbar})]})]})}),e.notSkeleton&&p.commentslist.map((function(e){return Object(Ce.jsx)(Qe,{comment:e},e.commentId)}))]})]}),Q]})}var tt=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={data:null,loadMore:!1,nextPage:1},e.nullPost={postId:null,userId:null,postImage:null,postText:null,created_at:null},e.getPosts=function(t){fetch("".concat(Pe.SERVER).concat(e.props.url,"?page=").concat(t),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.success?e.state.nextPage>1?e.setState(Object(u.a)(Object(u.a)({},e.state),{},{data:{next:t.next,posts:e.state.data.posts.concat(t.posts)},nextPage:e.state.nextPage+1,loadMore:!1})):e.setState(Object(u.a)(Object(u.a)({},e.state),{},{data:t,nextPage:e.state.nextPage+1,loadMore:!1})):e.setState(Object(u.a)(Object(u.a)({},e.state),{},{nextPage:e.state.nextPage-1,loadMore:!1}))})).catch((function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{nextPage:e.state.nextPage-1,loadMore:!1})),console.error("Error:",t)}))},e.handleLoadMore=function(){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{loadMore:!0})),e.getPosts(e.state.nextPage)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getPosts(this.state.nextPage)}},{key:"componentDidUpdate",value:function(e){this.props.authState.refreshPost!==e.authState.refreshPost&&(this.setState(Object(u.a)(Object(u.a)({},this.state),{},{nextPage:1})),this.getPosts(1))}},{key:"render",value:function(){return Object(Ce.jsxs)(s.a.Fragment,{children:[this.state.data?this.state.data.posts.map((function(e){return Object(Ce.jsx)(et,{post:e,notSkeleton:!0},e.postId)})):Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(et,{notSkeleton:!1,post:this.nullPost},"skelton1"),Object(Ce.jsx)(et,{notSkeleton:!1,post:this.nullPost},"skelton2")]}),this.state.data&&this.state.data.next&&Object(Ce.jsxs)(Ae.a,{display:"flex",justifyContent:"center",style:{position:"relative",marginBottom:24},children:[Object(Ce.jsx)(L.a,{variant:"outlined",color:"primary",onClick:this.handleLoadMore,disabled:this.state.loadMore,children:"Load More"}),this.state.loadMore&&Object(Ce.jsx)(ve.a,{size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})]})]})}}]),a}(n.Component),at=Object(re.a)((function(e){return{root:Object(O.a)({display:"flex"},e.breakpoints.up("sm"),{margin:e.spacing(2)}),marginBottom:{marginBottom:e.spacing(3)}}}));var nt=function(){var e=s.a.useContext(oe).authState,t=at();return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(Ae.a,{className:t.root,children:Object(Ce.jsxs)(D.a,{maxWidth:"sm",disableGutters:!0,children:[Object(Ce.jsx)(y.a,{variant:"h4",className:t.marginBottom,children:"Latest Posts"}),Object(Ce.jsx)(tt,{authState:e,url:"/posts/"})]})})})},st=a(68),rt=a.n(st),it=a(84),ct=a(202),ot=a(228),lt=a(201),jt=a(220),dt=a(221),ut=a(59),bt=a.n(ut),mt=a(60),ht=a.n(mt),Ot=a(72),pt=a.n(Ot),xt=a(85),gt=a.n(xt),ft=a(4),vt=Object(re.a)((function(e){return{margin:{marginTop:e.spacing(3)},relative:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var wt=function(){var e=vt(),t=s.a.useState({email:"",password:"",showPassword:!1}),a=Object(d.a)(t,2),n=a[0],r=a[1],i=s.a.useState({email:!1,password:!1}),c=Object(d.a)(i,2),o=c[0],l=c[1],j=s.a.useState({submit:!1}),m=Object(d.a)(j,2),h=m[0],p=m[1],g=Object(je.b)().enqueueSnackbar,f=s.a.useContext(oe).authDispatch,v=function(e){return function(t){r(Object(u.a)(Object(u.a)({},n),{},Object(O.a)({},e,t.target.value))),"email"===e?l({email:!Object(Se.validateEmail)(t.target.value)}):"password"===e&&l({password:!Object(Se.validatePassword)(t.target.value)})}},w=function(){var e=Object(it.a)(rt.a.mark((function e(t){var a;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.email||o.password||!n.password||!n.email){e.next=8;break}return p({submit:!0}),a={email:n.email,password:n.password},e.next=6,fetch("".concat(Pe.SERVER,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.success?(g("Login successfully!",{variant:"success"}),f({type:"LOGIN",payload:e})):(g(e.message,{variant:"error"}),p({submit:!1}))})).catch((function(e){g("Login failed!",{variant:"error"}),p({submit:!1}),console.error("Error:",e)}));case 6:e.next=9;break;case 8:g("Email and Password should be valid.",{variant:"warning"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(D.a,{maxWidth:"xs",disableGutters:!0,children:Object(Ce.jsx)(Ae.a,{mt:5,children:Object(Ce.jsxs)("form",{onSubmit:w,children:[Object(Ce.jsx)(y.a,{variant:"h4",color:"initial",children:"Log In"}),Object(Ce.jsx)(y.a,{variant:"body1",color:"inherit",children:"with your LinkBook account"}),Object(Ce.jsxs)(Ae.a,{mt:2,children:[Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.email,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userEmail",children:"Email"}),Object(Ce.jsx)(lt.a,{id:"userEmail",value:n.email,onChange:v("email"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(gt.a,{})})})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.password,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userPassword",children:"Password"}),Object(Ce.jsx)(lt.a,{id:"userPassword",type:n.showPassword?"text":"password",value:n.password,onChange:v("password"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(pt.a,{})}),endAdornment:Object(Ce.jsx)(jt.a,{position:"end",children:Object(Ce.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{showPassword:!n.showPassword}))},onMouseDown:function(e){e.preventDefault()},children:n.showPassword?Object(Ce.jsx)(bt.a,{}):Object(Ce.jsx)(ht.a,{})})})})]}),Object(Ce.jsx)(ct.a,{className:e.margin,children:Object(Ce.jsx)(dt.a,{component:b.b,to:"/forgetpass",color:"primary",children:"Forgot Your Password?"})}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:Object(ft.a)(e.margin,e.relative),children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",disabled:h.submit,type:"submit",children:"Log In"}),h.submit&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]}),Object(Ce.jsxs)(y.a,{variant:"subtitle1",color:"initial",className:e.margin,align:"center",children:["Not registered? ",Object(Ce.jsx)(dt.a,{component:b.b,to:"/register",color:"primary",children:"Create a account"})]})]})]})})})})},yt=a(204),St=Object(re.a)((function(e){return{margin:{marginTop:e.spacing(3)},relative:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var Pt=function(){var e=St(),t=s.a.useState({username:"",email:"",password:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1}),a=Object(d.a)(t,2),n=a[0],r=a[1],i=s.a.useState({username:!1,email:!1,password:!1,confirmPassword:!1}),c=Object(d.a)(i,2),o=c[0],l=c[1],j=s.a.useState({submit:!1}),h=Object(d.a)(j,2),p=h[0],g=h[1],f=Object(je.b)().enqueueSnackbar,v=Object(m.g)(),w=function(e){return function(t){r(Object(u.a)(Object(u.a)({},n),{},Object(O.a)({},e,t.target.value))),"email"===e?l({email:!Object(Se.validateEmail)(t.target.value)}):"password"===e?l({password:!Object(Se.validatePassword)(t.target.value)}):"username"===e?l({username:!Object(Se.validateUsername)(t.target.value)}):"confirmPassword"===e&&l({confirmPassword:t.target.value!==n.password})}},S=function(e){e.preventDefault()},P=function(){var e=Object(it.a)(rt.a.mark((function e(t){var a;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.email||o.password||!n.username||!n.password||!n.email||!n.confirmPassword){e.next=8;break}return g({submit:!0}),a={username:n.username,email:n.email,password:n.password,confirmPassword:n.confirmPassword},e.next=6,fetch("".concat(Pe.SERVER,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){if(e.success){f("Registered successfully!",{variant:"success"}),v.push("/login")}else{f("Registration failed!",{variant:"error"}),g({submit:!1})}})).catch((function(e){f("Registration failed!",{variant:"error"}),g({submit:!1}),console.error("Error:",e)}));case 6:e.next=9;break;case 8:f("Username, Email and Password should be valid.",{variant:"warning"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(D.a,{maxWidth:"xs",disableGutters:!0,children:Object(Ce.jsx)(Ae.a,{mt:5,children:Object(Ce.jsxs)("form",{onSubmit:P,children:[Object(Ce.jsx)(y.a,{variant:"h4",color:"initial",children:"Register"}),Object(Ce.jsx)(y.a,{variant:"body1",color:"inherit",children:"to manage your account on LinkBook"}),Object(Ce.jsxs)(Ae.a,{mt:2,children:[Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.username,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userUsername",children:"Username"}),Object(Ce.jsx)(lt.a,{id:"userUsername",type:"text",value:n.username,onChange:w("username"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(Z.a,{})})})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.email,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userEmail",children:"Email"}),Object(Ce.jsx)(lt.a,{id:"userEmail",type:"email",value:n.email,onChange:w("email"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(gt.a,{})})})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.password,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userPassword",children:"Password"}),Object(Ce.jsx)(lt.a,{id:"userPassword",type:n.showPassword?"text":"password",value:n.password,onChange:w("password"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(pt.a,{})}),endAdornment:Object(Ce.jsx)(jt.a,{position:"end",children:Object(Ce.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{showPassword:!n.showPassword}))},onMouseDown:S,children:n.showPassword?Object(Ce.jsx)(bt.a,{}):Object(Ce.jsx)(ht.a,{})})})}),Object(Ce.jsx)(yt.a,{children:"Use 8 or more characters with a mix of letters, numbers & symbols"})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.confirmPassword,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userConfirmPassword",children:"Confirm Password"}),Object(Ce.jsx)(lt.a,{id:"userConfirmPassword",type:n.showConfirmPassword?"text":"password",value:n.confirmPassword,onChange:w("confirmPassword"),startAdornment:Object(Ce.jsx)(jt.a,{position:"start",children:Object(Ce.jsx)(pt.a,{})}),endAdornment:Object(Ce.jsx)(jt.a,{position:"end",children:Object(Ce.jsx)(x.a,{"aria-label":"toggle confirm password visibility",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{showConfirmPassword:!n.showConfirmPassword}))},onMouseDown:S,children:n.showConfirmPassword?Object(Ce.jsx)(bt.a,{}):Object(Ce.jsx)(ht.a,{})})})})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:Object(ft.a)(e.margin,e.relative),children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",type:"submit",disabled:p.submit,children:"Register"}),p.submit&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]}),Object(Ce.jsxs)(y.a,{variant:"subtitle1",color:"initial",className:e.margin,align:"center",children:["Do you have an account? ",Object(Ce.jsx)(dt.a,{color:"primary",component:b.b,to:"/login",children:"Login"})]})]})]})})})})},Ct=a(122),kt=a.n(Ct),Et=Object(re.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},cardRoot:{width:"100%",maxWidth:600,overflow:"auto",margin:e.spacing(2),position:"relative",outline:"none"},media:{minHeight:60,maxHeight:250},image:{maxHeight:250,maxWidth:"100%"},flexCenter:{display:"flex",justifyContent:"center"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnWrapper:{position:"relative"},input:{display:"none"}}})),Nt=null;function Rt(){var e=Et(),t=s.a.useContext(oe).authDispatch,a=s.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=s.a.useState({submit:!1}),o=Object(d.a)(c,2),l=o[0],j=o[1],b=s.a.useState({preview:""}),m=Object(d.a)(b,2),h=m[0],O=m[1],p=Object(je.b)().enqueueSnackbar,f=function(){i(!1)};return Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(I.a,{title:"Change avatar",children:Object(Ce.jsx)(x.a,{color:"primary","aria-label":"add new post",onClick:function(){i(!0)},children:Object(Ce.jsx)(ye.a,{})})}),Object(Ce.jsx)(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:r,onClose:f,closeAfterTransition:!0,BackdropComponent:me.a,BackdropProps:{timeout:500},children:Object(Ce.jsx)(he.a,{in:r,children:Object(Ce.jsx)(Oe.a,{className:e.cardRoot,children:Object(Ce.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),j({submit:!0}),Nt){var a=new FormData;a.append("image",Nt),fetch("".concat(Pe.SERVER,"/users/update-avatar"),{method:"POST",credentials:"include",body:a}).then((function(e){return e.json()})).then((function(e){e.success?(p("Avatar Updated!",{variant:"success"}),O({preview:""}),i(!1),t({type:"REFUSER"})):(401===e.status&&t({type:"LOGOUT"}),p(e.message,{variant:"error"}),O({preview:""})),j({submit:!1})})).catch((function(e){p("Avatar updation Failed",{variant:"error"}),O({preview:""}),j({submit:!1}),console.error("Error:",e)}))}else j({submit:!1}),p("You need to select an image",{variant:"warning"})},children:[Object(Ce.jsx)(Ge.a,{action:Object(Ce.jsx)(I.a,{title:"Close",children:Object(Ce.jsx)(x.a,{"aria-label":"Close Modal",onClick:f,children:Object(Ce.jsx)(U.a,{})})}),title:"Update Avatar"}),Object(Ce.jsx)(pe.a,{className:e.media,children:Object(Ce.jsxs)(D.a,{disableGutters:!0,className:e.flexCenter,children:[Object(Ce.jsx)("input",{accept:"image/*",className:e.input,id:"postImage",type:"file",onChange:function(e){Nt=e.target.files[0],O(Object(u.a)(Object(u.a)({},h),{},{preview:URL.createObjectURL(e.target.files[0])}))}}),h.preview?Object(Ce.jsx)("img",{src:h.preview,alt:"Post",className:e.image}):Object(Ce.jsx)("label",{htmlFor:"postImage",children:Object(Ce.jsx)(I.a,{title:"Select Avatar Image",component:"span",children:Object(Ce.jsx)(L.a,{variant:"contained","aria-label":"select avatar image",color:"primary",startIcon:Object(Ce.jsx)(ye.a,{}),children:"Select Avatar Image"})})})]})}),Object(Ce.jsx)(xe.a,{className:e.flexCenter,children:h.preview&&Object(Ce.jsx)("label",{htmlFor:"postImage",children:Object(Ce.jsx)(I.a,{title:"Select other image",component:"span",children:Object(Ce.jsx)(L.a,{variant:"contained","aria-label":"select avatar image",color:"primary",startIcon:Object(Ce.jsx)(ye.a,{}),children:"Select other Image"})})})}),Object(Ce.jsx)(g.a,{}),Object(Ce.jsxs)(fe.a,{children:[Object(Ce.jsx)("div",{style:{flexGrow:1}}),Object(Ce.jsx)(L.a,{variant:"contained",disableElevation:!0,onClick:f,children:"Close"}),Object(Ce.jsxs)("div",{className:e.btnWrapper,children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",type:"submit",disableElevation:!0,disabled:l.submit,children:"Update Avatar"}),l.submit&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]})]})]})})})})]})}var Tt=Object(re.a)((function(e){return{progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnWrapper:{position:"relative",marginRight:e.spacing(1)}}}));var It=function(e){var t=Tt(),a=s.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=s.a.useState(!1),o=Object(d.a)(c,2),l=o[0],j=o[1],u=s.a.useContext(oe).authDispatch,b=Object(je.b)().enqueueSnackbar;return s.a.useEffect((function(){fetch("".concat(Pe.SERVER,"/users/follow?userId=").concat(e.userId),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?e.follow?i(!0):i(!1):(b(e.message,{variant:"error"}),i(!1))})).catch((function(e){}))}),[i,e.userId,b]),Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsxs)("div",{className:t.btnWrapper,children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){j(!0);var t={userId:e.userId};fetch("".concat(Pe.SERVER,"/users/follow?userId=").concat(e.userId),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.success?(i(!r),u({type:"REFUSER"}),b(e.message,{variant:"success"})):b(e.message,{variant:"error"}),j(!1)})).catch((function(e){b("Request failed!",{variant:"error"}),j(!1),console.log(e)}))},disabled:l,children:r?"Unfollow":"Follow"}),l&&Object(Ce.jsx)(ve.a,{size:24,className:t.progressbar})]})})},Lt=Object(re.a)((function(e){return{box:Object(O.a)({},e.breakpoints.up("md"),{margin:e.spacing(2)}),gutters:Object(O.a)({},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3.5)}),avatar:{width:e.spacing(25),height:e.spacing(25)},avatarBox:{position:"relative",width:e.spacing(25),height:e.spacing(25)},flex:{display:"flex"},mainFlex:Object(O.a)({flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row"}),avatarWrapper:Object(O.a)({width:"100%"},e.breakpoints.up("sm"),{width:e.spacing(30)}),mrLeft:{marginLeft:e.spacing(1)},mrRight:{marginRight:e.spacing(1)},justCenter:{justifyContent:"center"}}}));var Ft=function(e){var t=Lt(),a=s.a.useContext(oe),n=a.authState,r=a.authDispatch,i=Object(m.i)().username,c=s.a.useState(),o=Object(d.a)(c,2),l=o[0],j=o[1],u=Object(je.b)().enqueueSnackbar;return s.a.useEffect((function(){fetch("".concat(Pe.SERVER,"/users/username/").concat(i),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?j(e):(401===e.status&&r({type:"LOGOUT"}),u(e.message,{variant:"error"}))})).catch((function(e){u("Failed to get user data",{variant:"error"})}))}),[i,u,n.refreshPost,n.refreshUser,r]),Object(Ce.jsx)(s.a.Fragment,{children:l?Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(Ae.a,{className:t.box,children:Object(Ce.jsx)(D.a,{maxWidth:"md",disableGutters:!0,children:Object(Ce.jsxs)(v.a,{className:Object(ft.a)(t.flex,t.mainFlex),children:[Object(Ce.jsx)(p.a,{className:Object(ft.a)(t.avatarWrapper,t.justCenter),children:Object(Ce.jsxs)(Ae.a,{className:t.avatarBox,children:[Object(Ce.jsx)(w.a,{alt:"".concat(l.login,"'s avatar"),src:l.avatar?"".concat(Pe.SERVER).concat(l.avatar):"",className:t.avatar}),n.userId===l.userId&&Object(Ce.jsx)(Ae.a,{position:"absolute",style:{bottom:0,right:0},children:Object(Ce.jsx)(Rt,{})})]})}),Object(Ce.jsx)(p.a,{disableGutters:!0,className:t.gutters,children:Object(Ce.jsxs)(v.a,{style:{width:"100%"},children:[Object(Ce.jsxs)(p.a,{disableGutters:!0,children:[Object(Ce.jsx)(y.a,{variant:"h4",style:{flexGrow:1},children:l.login}),n.userId===l.userId&&Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",startIcon:Object(Ce.jsx)(kt.a,{}),component:b.b,to:"/settings",children:" edit"})]}),Object(Ce.jsx)(p.a,{dense:!0,disableGutters:!0,children:Object(Ce.jsx)(y.a,{variant:"body2",children:l.bio?l.bio:""})}),Object(Ce.jsx)(p.a,{dense:!0,disableGutters:!0,children:Object(Ce.jsx)(y.a,{variant:"body1",children:l.location?l.location:""})}),Object(Ce.jsx)(p.a,{dense:!0,disableGutters:!0,children:Object(Ce.jsx)(y.a,{variant:"body1",href:l.website?l.website:"",target:"_blank",component:dt.a,children:l.website?"Website Link":null})}),Object(Ce.jsxs)(p.a,{disableGutters:!0,children:[n.userId!==l.userId&&Object(Ce.jsx)(It,{userId:l.userId}),Object(Ce.jsx)(L.a,{className:t.mrRight,variant:"contained",disableElevation:!0,children:"Share Profile"})]}),Object(Ce.jsx)(p.a,{dense:!0,disableGutters:!0,children:Object(Ce.jsxs)(v.a,{className:t.flex,children:[Object(Ce.jsxs)(p.a,{disableGutters:!0,children:[Object(Ce.jsx)(y.a,{className:Object(ft.a)(t.mrRight),variant:"h6",children:l.posts}),Object(Ce.jsx)(y.a,{variant:"body1",className:t.mrRight,children:"Posts"})]}),Object(Ce.jsx)(g.a,{orientation:"vertical",flexItem:!0}),Object(Ce.jsxs)(p.a,{disableGutters:!0,children:[Object(Ce.jsx)(y.a,{className:Object(ft.a)(t.mrRight,t.mrLeft),variant:"h6",children:l.followers}),Object(Ce.jsx)(y.a,{variant:"body1",className:t.mrRight,children:"Followers"})]}),Object(Ce.jsx)(g.a,{orientation:"vertical",flexItem:!0}),Object(Ce.jsxs)(p.a,{disableGutters:!0,children:[Object(Ce.jsx)(y.a,{className:Object(ft.a)(t.mrRight,t.mrLeft),variant:"h6",children:l.following}),Object(Ce.jsx)(y.a,{variant:"body1",children:"Following"})]})]})})]})})]})})})}):Object(Ce.jsx)(y.a,{children:"Loading..."})})},Dt=a(86),Wt=function(e){var t=e.component,a=Object(Dt.a)(e,["component"]),n=s.a.useContext(oe).authState;return Object(Ce.jsx)(m.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return n.isAuthenticated?Object(Ce.jsx)(t,Object(u.a)({},e)):Object(Ce.jsx)(m.a,{to:"/login"})}}))},At=function(e){var t=e.component,a=Object(Dt.a)(e,["component"]),n=s.a.useContext(oe).authState;return Object(Ce.jsx)(m.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return n.isAuthenticated?Object(Ce.jsx)(m.a,{to:"/"}):Object(Ce.jsx)(t,Object(u.a)({},e))}}))},Gt=a(123),Bt=a.n(Gt),Ut=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(Ce.jsxs)(s.a.Fragment,{children:[Object(Ce.jsx)(y.a,{variant:"h1",color:"initial",align:"center",children:"404"}),Object(Ce.jsx)(y.a,{variant:"h4",color:"initial",align:"center",children:"Page Not Found!"}),Object(Ce.jsx)(Ae.a,{mt:2,align:"center",children:Object(Ce.jsxs)(L.a,{color:"primary",component:b.b,to:"/",children:[Object(Ce.jsx)(Bt.a,{})," Go to home"]})})]})}}]),a}(n.Component),Mt=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(Ce.jsx)("div",{children:Object(Ce.jsx)(y.a,{children:"Forget pass"})})}}]),a}(n.Component),zt=a(225),Vt=a(222),qt=Object(re.a)((function(e){return{margin:{marginTop:e.spacing(3)},relative:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function Ht(){var e=qt(),t=s.a.useState({oldPassword:"",password:"",confirmPassword:"",showPassword:!1,showOldPassword:!1}),a=Object(d.a)(t,2),n=a[0],r=a[1],i=s.a.useState({password:!1,confirmPassword:!1}),c=Object(d.a)(i,2),o=c[0],l=c[1],j=s.a.useState({submit:!1}),b=Object(d.a)(j,2),m=b[0],h=b[1],p=Object(je.b)().enqueueSnackbar,g=function(e){return function(t){r(Object(u.a)(Object(u.a)({},n),{},Object(O.a)({},e,t.target.value))),"password"===e?l({password:!Object(Se.validatePassword)(t.target.value)}):"confirmPassword"===e&&l({confirmPassword:t.target.value!==n.password})}},f=function(e){e.preventDefault()};return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("change pass submitted"),!o.password&&!o.confirmPassword&&n.password&&n.oldPassword){h({submit:!0});var t={oldPassword:n.oldPassword,password:n.password,confirmPassword:n.confirmPassword};fetch("".concat(Pe.SERVER,"/auth/update-pass"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.success?(p("Password Changed successfully!",{variant:"success"}),r({oldPassword:"",password:"",confirmPassword:"",showPassword:!1,showOldPassword:!1})):p(e.message,{variant:"error"}),h({submit:!1})})).catch((function(e){p("Password Change failed!",{variant:"error"}),h({submit:!1}),console.error("Error:",e)}))}else p("Current password or new password should be valid.",{variant:"warning"})},children:[Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userCurrentPassword",children:"Current Password"}),Object(Ce.jsx)(lt.a,{id:"userCurrentPassword",type:n.showOldPassword?"text":"password",value:n.oldPassword,onChange:g("oldPassword"),endAdornment:Object(Ce.jsx)(jt.a,{position:"end",children:Object(Ce.jsx)(x.a,{"aria-label":"toggle confirm password visibility",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{showOldPassword:!n.showOldPassword}))},onMouseDown:f,children:n.showOldPassword?Object(Ce.jsx)(bt.a,{}):Object(Ce.jsx)(ht.a,{})})})})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.password,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userPassword",children:"New Password"}),Object(Ce.jsx)(lt.a,{id:"userPassword",type:n.showPassword?"text":"password",value:n.password,onChange:g("password"),endAdornment:Object(Ce.jsx)(jt.a,{position:"end",children:Object(Ce.jsx)(x.a,{"aria-label":"toggle password visibility",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{showPassword:!n.showPassword}))},onMouseDown:f,children:n.showPassword?Object(Ce.jsx)(bt.a,{}):Object(Ce.jsx)(ht.a,{})})})}),Object(Ce.jsx)(yt.a,{children:"Use 8 or more characters with a mix of letters, numbers & symbols"})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,error:o.confirmPassword,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userConfirmPassword",children:"Confirm Password"}),Object(Ce.jsx)(lt.a,{id:"userConfirmPassword",type:n.showPassword?"text":"password",value:n.confirmPassword,onChange:g("confirmPassword")})]}),Object(Ce.jsxs)(ct.a,{className:Object(ft.a)(e.margin,e.relative),children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",type:"submit",disabled:m.submit,children:"Change Password"}),m.submit&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]})]})})}var Jt=Object(re.a)((function(e){return{submit:{position:"relative"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},margin:{marginTop:e.spacing(3)},form:{marginBottom:e.spacing(4)}}}));function $t(){var e=Jt(),t=s.a.useContext(le),a=s.a.useContext(oe).authDispatch,n=s.a.useState({name:"",email:"",bio:"",website:"",location:""}),r=Object(d.a)(n,2),i=r[0],c=r[1],o=s.a.useState(!1),l=Object(d.a)(o,2),j=l[0],b=l[1],m=Object(je.b)().enqueueSnackbar;return s.a.useEffect((function(){t&&c({name:t.name,email:t.email,bio:t.bio,website:t.website,location:t.location})}),[t]),Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(!0);var t={email:i.email,name:i.name,bio:i.bio,location:i.location,website:i.website};fetch("".concat(Pe.SERVER,"/users/update-profile"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.success?(m("Profile updated!",{variant:"success"}),a({type:"REFUSER"})):(401===e.status&&a({type:"LOGOUT"}),m(e.message,{variant:"error"})),b(!1)})).catch((function(e){m("Profile updation Failed",{variant:"error"}),b(!1),console.error("Error:",e)}))},className:e.form,children:[Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userName",children:"Name"}),Object(Ce.jsx)(lt.a,{type:"text",id:"userName",value:i.name,onChange:function(e){return c(Object(u.a)(Object(u.a)({},i),{},{name:e.target.value}))}})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userEmail",children:"Email"}),Object(Ce.jsx)(lt.a,{type:"email",id:"userEmail",value:i.email,onChange:function(e){return c(Object(u.a)(Object(u.a)({},i),{},{email:e.target.value}))}})]}),Object(Ce.jsx)(ct.a,{fullWidth:!0,className:e.margin,children:Object(Ce.jsx)(ge.a,{fullWidth:!0,id:"userBio",rows:3,label:"Write something about you",value:i.bio,multiline:!0,maxLength:"200",onChange:function(e){return c(Object(u.a)(Object(u.a)({},i),{},{bio:e.target.value}))}})}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userLocation",children:"Location"}),Object(Ce.jsx)(lt.a,{type:"text",id:"userLocation",value:i.location,onChange:function(e){return c(Object(u.a)(Object(u.a)({},i),{},{location:e.target.value}))}})]}),Object(Ce.jsxs)(ct.a,{fullWidth:!0,className:e.margin,children:[Object(Ce.jsx)(ot.a,{htmlFor:"userWebsite",children:"Website"}),Object(Ce.jsx)(lt.a,{type:"url",id:"userWebsite",value:i.website,onChange:function(e){return c(Object(u.a)(Object(u.a)({},i),{},{website:e.target.value}))}})]}),Object(Ce.jsxs)(ct.a,{className:Object(ft.a)(e.submit,e.margin),children:[Object(Ce.jsx)(L.a,{variant:"contained",color:"primary",type:"submit",disabled:j,children:"Update Profile"}),j&&Object(Ce.jsx)(ve.a,{size:24,className:e.progressbar})]})]})})}var Zt=Object(re.a)((function(e){return{root:Object(O.a)({},e.breakpoints.up("sm"),{margin:e.spacing(2)}),mrBottom:{marginBottom:e.spacing(3)},mrTop:{marginTop:e.spacing(3)}}}));function _t(){var e=Zt(),t=s.a.useState(0),a=Object(d.a)(t,2),n=a[0],r=a[1];return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsxs)(Ae.a,{className:e.root,children:[Object(Ce.jsx)(y.a,{variant:"h4",className:e.mrBottom,children:"Account Settings"}),Object(Ce.jsxs)(zt.a,{value:n,onChange:function(e,t){r(t)},indicatorColor:"primary",textColor:"primary",style:{overflow:"auto"},children:[Object(Ce.jsx)(Vt.a,{label:"Profile"}),Object(Ce.jsx)(Vt.a,{label:"Password"})]}),Object(Ce.jsx)(g.a,{}),0===n&&Object(Ce.jsxs)(Ae.a,{index:0,className:e.mrTop,style:{display:"flex"},children:[Object(Ce.jsx)(D.a,{maxWidth:"xs",disableGutters:!0,children:Object(Ce.jsx)($t,{})}),Object(Ce.jsx)("div",{style:{flexGrow:1}})]}),1===n&&Object(Ce.jsxs)(Ae.a,{index:1,style:{display:"flex"},children:[Object(Ce.jsx)(D.a,{maxWidth:"xs",disableGutters:!0,children:Object(Ce.jsx)(Ht,{})}),Object(Ce.jsx)("div",{style:{flexGrow:1}})]})]})})}var Yt=Object(re.a)((function(e){return{root:Object(O.a)({display:"flex"},e.breakpoints.up("sm"),{margin:e.spacing(2)}),marginBottom:{marginBottom:e.spacing(3)}}}));var Kt=function(){var e=s.a.useContext(oe).authState,t=Yt();return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(Ae.a,{className:t.root,children:Object(Ce.jsxs)(D.a,{maxWidth:"sm",disableGutters:!0,children:[Object(Ce.jsx)(y.a,{variant:"h4",className:t.marginBottom,children:"Feed"}),Object(Ce.jsx)(tt,{authState:e,url:"/posts/feed/"})]})})})},Qt=Object(re.a)((function(e){return{root:Object(O.a)({display:"flex"},e.breakpoints.up("sm"),{margin:e.spacing(2)}),marginBottom:{marginBottom:e.spacing(3)}}}));var Xt=function(){var e=s.a.useContext(oe).authState,t=Qt();return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(Ae.a,{className:t.root,children:Object(Ce.jsxs)(D.a,{maxWidth:"sm",disableGutters:!0,children:[Object(Ce.jsx)(y.a,{variant:"h4",className:t.marginBottom,children:"Trending"}),Object(Ce.jsx)(tt,{authState:e,url:"/posts/trending/"})]})})})};var ea=function(){var e=Object(m.i)().postId,t=s.a.useState(),a=Object(d.a)(t,2),n=a[0],r=a[1],i=s.a.useState("Loading..."),c=Object(d.a)(i,2),o=c[0],l=c[1],j=Object(je.b)().enqueueSnackbar;return s.a.useEffect((function(){fetch("".concat(Pe.SERVER,"/posts/byid?postId=").concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?r(e.post):(r(),l("Request post is either deleted or post id is wrong"),j(e.message,{variant:"error"}))})).catch((function(e){r(),l("Failed to get post"),j("Failed to get post",{variant:"error"}),console.error("Error:",e)}))}),[e,j]),Object(Ce.jsx)(Ce.Fragment,{children:n?Object(Ce.jsx)(et,{post:n,notSkeleton:!0,single:!0}):Object(Ce.jsx)(y.a,{variant:"subtitle1",color:"inherit",children:o})})},ta=function(e,t){switch(t.type){case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,userId:t.payload.userId,username:t.payload.username});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1,userId:null,username:null});case"REFPOST":return Object(u.a)(Object(u.a)({},e),{},{refreshPost:!e.refreshPost});case"REFUSER":return Object(u.a)(Object(u.a)({},e),{},{refreshUser:!e.refreshUser});default:return e}};var aa=function(e){var t=e.initialState,a=s.a.useReducer(ta,t),n=Object(d.a)(a,2),r=n[0],i=n[1];return Object(Ce.jsx)(s.a.Fragment,{children:Object(Ce.jsx)(b.a,{children:Object(Ce.jsxs)(je.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},maxSnack:2,children:[Object(Ce.jsx)(oe.Provider,{value:{authState:r,authDispatch:i},children:Object(Ce.jsx)(We,{children:Object(Ce.jsxs)(m.d,{children:[Object(Ce.jsx)(Wt,{exact:!0,path:"/",component:nt}),Object(Ce.jsx)(At,{exact:!0,path:"/login",component:wt}),Object(Ce.jsx)(At,{exact:!0,path:"/forgetpass",component:Mt}),Object(Ce.jsx)(At,{exact:!0,path:"/register",component:Pt}),Object(Ce.jsx)(Wt,{exact:!0,path:"/settings",component:_t}),Object(Ce.jsx)(Wt,{exact:!0,path:"/feed",component:Kt}),Object(Ce.jsx)(Wt,{exact:!0,path:"/trending",component:Xt}),Object(Ce.jsx)(Wt,{exact:!0,path:"/posts/:postId",component:ea}),Object(Ce.jsx)(Wt,{exact:!0,path:"/users/:username",component:Ft}),Object(Ce.jsx)(m.b,{component:Ut})]})})}),Object(Ce.jsx)(h,{})]})})})},na=function(e){Object(l.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={initialState:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(Pe.SERVER,"/auth/"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.success?e.setState({initialState:{isAuthenticated:!0,userId:t.userId,username:t.username,refreshPost:!1,refreshUser:!1}}):e.setState({initialState:{isAuthenticated:!1,userId:null,username:null,refreshPost:!1,refreshUser:!1}})})).catch((function(t){e.setState({initialState:{isAuthenticated:!1,userId:null,username:null,refreshUser:!1,refreshPost:!1}})}))}},{key:"render",value:function(){return this.state.initialState?Object(Ce.jsx)(aa,{initialState:this.state.initialState}):Object(Ce.jsx)("p",{children:"Loading..."})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(Ce.jsx)(na,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t){var a=new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),n=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,16}$/),s=new RegExp(/^(?=.{4,20}$)[a-zA-Z0-9]*$/),r=new RegExp(/^.{10,255}$/);e.exports={validateEmail:function(e){return a.test(e)},validatePassword:function(e){return n.test(e)},validateUsername:function(e){return s.test(e)},validatePostText:function(e){return r.test(e)}}}},[[155,1,2]]]);
//# sourceMappingURL=main.e97142aa.chunk.js.map