(this.webpackJsonplinkbook=this.webpackJsonplinkbook||[]).push([[8],{215:function(e,t,a){"use strict";var r=a(42),n=a(1),o=(a(5),a(58));var s=function(e){var t=function(t){var a=e(t);return t.css?Object(n.a)({},Object(o.a)(a,e(Object(n.a)({theme:t.theme},t.css))),function(e,t){var a={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(a[r]=e[r])})),a}(t.css,[e.filterProps])):a};return t.propTypes={},t.filterProps=["css"].concat(Object(r.a)(e.filterProps)),t};var i=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=function(e){return t.reduce((function(t,a){var r=a(e);return r?Object(o.a)(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},c=a(11),l=a(85);function p(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var d=function(e){var t=e.prop,a=e.cssProperty,r=void 0===a?e.prop:a,n=e.themeKey,o=e.transform,s=function(e){if(null==e[t])return null;var a=e[t],s=p(e.theme,n)||{};return Object(l.a)(e,a,(function(e){var t;return"function"===typeof s?t=s(e):Array.isArray(s)?t=s[e]||e:(t=p(s,e)||e,o&&(t=o(t))),!1===r?t:Object(c.a)({},r,t)}))};return s.propTypes={},s.filterProps=[t],s};function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var b=i(d({prop:"border",themeKey:"borders",transform:u}),d({prop:"borderTop",themeKey:"borders",transform:u}),d({prop:"borderRight",themeKey:"borders",transform:u}),d({prop:"borderBottom",themeKey:"borders",transform:u}),d({prop:"borderLeft",themeKey:"borders",transform:u}),d({prop:"borderColor",themeKey:"palette"}),d({prop:"borderRadius",themeKey:"shape"})),m=i(d({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),d({prop:"display"}),d({prop:"overflow"}),d({prop:"textOverflow"}),d({prop:"visibility"}),d({prop:"whiteSpace"})),j=i(d({prop:"flexBasis"}),d({prop:"flexDirection"}),d({prop:"flexWrap"}),d({prop:"justifyContent"}),d({prop:"alignItems"}),d({prop:"alignContent"}),d({prop:"order"}),d({prop:"flex"}),d({prop:"flexGrow"}),d({prop:"flexShrink"}),d({prop:"alignSelf"}),d({prop:"justifyItems"}),d({prop:"justifySelf"})),h=i(d({prop:"gridGap"}),d({prop:"gridColumnGap"}),d({prop:"gridRowGap"}),d({prop:"gridColumn"}),d({prop:"gridRow"}),d({prop:"gridAutoFlow"}),d({prop:"gridAutoColumns"}),d({prop:"gridAutoRows"}),d({prop:"gridTemplateColumns"}),d({prop:"gridTemplateRows"}),d({prop:"gridTemplateAreas"}),d({prop:"gridArea"})),f=i(d({prop:"position"}),d({prop:"zIndex",themeKey:"zIndex"}),d({prop:"top"}),d({prop:"right"}),d({prop:"bottom"}),d({prop:"left"})),O=i(d({prop:"color",themeKey:"palette"}),d({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),g=d({prop:"boxShadow",themeKey:"shadows"});function v(e){return e<=1?"".concat(100*e,"%"):e}var x=d({prop:"width",transform:v}),y=d({prop:"maxWidth",transform:v}),w=d({prop:"minWidth",transform:v}),N=d({prop:"height",transform:v}),R=d({prop:"maxHeight",transform:v}),S=d({prop:"minHeight",transform:v}),C=(d({prop:"size",cssProperty:"width",transform:v}),d({prop:"size",cssProperty:"height",transform:v}),i(x,y,w,N,R,S,d({prop:"boxSizing"}))),E=a(210),I=i(d({prop:"fontFamily",themeKey:"typography"}),d({prop:"fontSize",themeKey:"typography"}),d({prop:"fontStyle",themeKey:"typography"}),d({prop:"fontWeight",themeKey:"typography"}),d({prop:"letterSpacing"}),d({prop:"lineHeight"}),d({prop:"textAlign"})),k=a(3),T=a(0),P=a.n(T),F=a(4),G=a(41),A=a.n(G),L=a(146);function K(e,t){var a={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(a[r]=e[r])})),a}var W=a(49),z=function(e){var t=function(e){return function(t){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.name,s=Object(k.a)(r,["name"]),i=o,c="function"===typeof t?function(e){return{root:function(a){return t(Object(n.a)({theme:e},a))}}}:{root:t},l=Object(L.a)(c,Object(n.a)({Component:e,name:o||e.displayName,classNamePrefix:i},s));t.filterProps&&(a=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var p=P.a.forwardRef((function(t,r){var o=t.children,s=t.className,i=t.clone,c=t.component,p=Object(k.a)(t,["children","className","clone","component"]),d=l(t),u=Object(F.a)(d.root,s),b=p;if(a&&(b=K(b,a)),i)return P.a.cloneElement(o,Object(n.a)({className:Object(F.a)(o.props.className,u)},b));if("function"===typeof o)return o(Object(n.a)({className:u},b));var m=c||e;return P.a.createElement(m,Object(n.a)({ref:r,className:u},b),o)}));return A()(p,e),p}}(e);return function(e,a){return t(e,Object(n.a)({defaultTheme:W.a},a))}},D=s(i(b,m,j,h,f,O,g,C,E.b,I)),B=z("div")(D,{name:"MuiBox"});t.a=B},221:function(e,t,a){"use strict";var r=a(1),n=a(3),o=a(0),s=(a(5),a(4)),i=a(6),c=a(68),l=o.forwardRef((function(e,t){var a=e.action,i=e.avatar,l=e.classes,p=e.className,d=e.component,u=void 0===d?"div":d,b=e.disableTypography,m=void 0!==b&&b,j=e.subheader,h=e.subheaderTypographyProps,f=e.title,O=e.titleTypographyProps,g=Object(n.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),v=f;null==v||v.type===c.a||m||(v=o.createElement(c.a,Object(r.a)({variant:i?"body2":"h5",className:l.title,component:"span",display:"block"},O),v));var x=j;return null==x||x.type===c.a||m||(x=o.createElement(c.a,Object(r.a)({variant:i?"body2":"body1",className:l.subheader,color:"textSecondary",component:"span",display:"block"},h),x)),o.createElement(u,Object(r.a)({className:Object(s.a)(l.root,p),ref:t},g),i&&o.createElement("div",{className:l.avatar},i),o.createElement("div",{className:l.content},v,x),a&&o.createElement("div",{className:l.action},a))}));t.a=Object(i.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(l)},227:function(e,t,a){"use strict";var r=a(1),n=a(3),o=a(0),s=(a(5),a(4)),i=a(7),c=a(6),l=a(50),p=a(8),d=a(68),u=o.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.color,b=void 0===u?"primary":u,m=e.component,j=void 0===m?"a":m,h=e.onBlur,f=e.onFocus,O=e.TypographyClasses,g=e.underline,v=void 0===g?"hover":g,x=e.variant,y=void 0===x?"inherit":x,w=Object(n.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),N=Object(l.a)(),R=N.isFocusVisible,S=N.onBlurVisible,C=N.ref,E=o.useState(!1),I=E[0],k=E[1],T=Object(p.a)(t,C);return o.createElement(d.a,Object(r.a)({className:Object(s.a)(a.root,a["underline".concat(Object(i.a)(v))],c,I&&a.focusVisible,"button"===j&&a.button),classes:O,color:b,component:j,onBlur:function(e){I&&(S(),k(!1)),h&&h(e)},onFocus:function(e){R(e)&&k(!0),f&&f(e)},ref:T,variant:y},w))}));t.a=Object(c.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(u)},231:function(e,t,a){"use strict";var r=a(22),n=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),s=(0,r(a(24)).default)(o.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=s},245:function(e,t,a){"use strict";a.r(t);var r=a(19),n=a(45),o=a(0),s=a.n(o),i=a(4),c=a(215),l=a(187),p=a(191),d=a(145),u=a(209),b=a(68),m=a(194),j=a(227),h=a(197),f=a(231),O=a.n(f),g=a(181),v=a(15),x=a(18),y=a(34),w=a(39),N=a(12),R=a(207),S=a(184),C=a(147),E=a(143),I=a(144),k=a(185),T=a(221),P=a(186),F=a(188),G=a(193),A=a(195),L=a(93),K=a.n(L),W=a(61),z=a.n(W),D=a(33),B=a(2),U=Object(g.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},cardRoot:{width:"100%",maxWidth:600,overflow:"auto",margin:e.spacing(2),position:"relative",outline:"none"},media:{minHeight:60,maxHeight:250},image:{maxHeight:250,maxWidth:"100%"},flexCenter:{display:"flex",justifyContent:"center"},progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnWrapper:{position:"relative"},input:{display:"none"}}})),V=null;function H(){var e=U(),t=s.a.useContext(y.a).authDispatch,a=s.a.useState(!1),n=Object(r.a)(a,2),o=n[0],i=n[1],c=s.a.useState({submit:!1}),p=Object(r.a)(c,2),d=p[0],u=p[1],b=s.a.useState({preview:""}),j=Object(r.a)(b,2),f=j[0],O=j[1],g=Object(w.b)().enqueueSnackbar,v=function(){i(!1)};return Object(B.jsxs)(s.a.Fragment,{children:[Object(B.jsx)(R.a,{title:"Change avatar",children:Object(B.jsx)(S.a,{color:"primary","aria-label":"add new post",onClick:function(){i(!0)},children:Object(B.jsx)(K.a,{})})}),Object(B.jsx)(C.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:o,onClose:v,closeAfterTransition:!0,BackdropComponent:E.a,BackdropProps:{timeout:500},children:Object(B.jsx)(I.a,{in:o,children:Object(B.jsx)(k.a,{className:e.cardRoot,children:Object(B.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),u({submit:!0}),V){var a=new FormData;a.append("image",V),fetch("".concat(D.SERVER,"/users/update-avatar"),{method:"POST",credentials:"include",body:a}).then((function(e){return e.json()})).then((function(e){e.success?(g("Avatar Updated!",{variant:"success"}),O({preview:""}),i(!1),t({type:"REFUSER"})):(401===e.status&&t({type:"LOGOUT"}),g(e.message,{variant:"error"}),O({preview:""})),u({submit:!1})})).catch((function(e){g("Avatar updation Failed",{variant:"error"}),O({preview:""}),u({submit:!1}),console.error("Error:",e)}))}else u({submit:!1}),g("You need to select an image",{variant:"warning"})},children:[Object(B.jsx)(T.a,{action:Object(B.jsx)(R.a,{title:"Close",children:Object(B.jsx)(S.a,{"aria-label":"Close Modal",onClick:v,children:Object(B.jsx)(z.a,{})})}),title:"Update Avatar"}),Object(B.jsx)(P.a,{className:e.media,children:Object(B.jsxs)(l.a,{disableGutters:!0,className:e.flexCenter,children:[Object(B.jsx)("input",{accept:"image/*",className:e.input,id:"postImage",type:"file",onChange:function(e){V=e.target.files[0],O(Object(N.a)(Object(N.a)({},f),{},{preview:URL.createObjectURL(e.target.files[0])}))}}),f.preview?Object(B.jsx)("img",{src:f.preview,alt:"Post",className:e.image}):Object(B.jsx)("label",{htmlFor:"postImage",children:Object(B.jsx)(R.a,{title:"Select Avatar Image",component:"span",children:Object(B.jsx)(m.a,{variant:"contained","aria-label":"select avatar image",color:"primary",startIcon:Object(B.jsx)(K.a,{}),children:"Select Avatar Image"})})})]})}),Object(B.jsx)(F.a,{className:e.flexCenter,children:f.preview&&Object(B.jsx)("label",{htmlFor:"postImage",children:Object(B.jsx)(R.a,{title:"Select other image",component:"span",children:Object(B.jsx)(m.a,{variant:"contained","aria-label":"select avatar image",color:"primary",startIcon:Object(B.jsx)(K.a,{}),children:"Select other Image"})})})}),Object(B.jsx)(h.a,{}),Object(B.jsxs)(G.a,{children:[Object(B.jsx)("div",{style:{flexGrow:1}}),Object(B.jsx)(m.a,{variant:"contained",disableElevation:!0,onClick:v,children:"Close"}),Object(B.jsxs)("div",{className:e.btnWrapper,children:[Object(B.jsx)(m.a,{variant:"contained",color:"primary",type:"submit",disableElevation:!0,disabled:d.submit,children:"Update Avatar"}),d.submit&&Object(B.jsx)(A.a,{size:24,className:e.progressbar})]})]})]})})})})]})}var M=Object(g.a)((function(e){return{progressbar:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnWrapper:{position:"relative",marginRight:e.spacing(1)}}}));var q=function(e){var t=M(),a=s.a.useState(!1),n=Object(r.a)(a,2),o=n[0],i=n[1],c=s.a.useState(!1),l=Object(r.a)(c,2),p=l[0],d=l[1],u=s.a.useContext(y.a).authDispatch,b=Object(w.b)().enqueueSnackbar;return s.a.useEffect((function(){fetch("".concat(D.SERVER,"/users/follow?userId=").concat(e.userId),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?e.follow?i(!0):i(!1):(b(e.message,{variant:"error"}),i(!1))})).catch((function(e){}))}),[i,e.userId,b]),Object(B.jsx)(s.a.Fragment,{children:Object(B.jsxs)("div",{className:t.btnWrapper,children:[Object(B.jsx)(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){d(!0);var t={userId:e.userId};fetch("".concat(D.SERVER,"/users/follow?userId=").concat(e.userId),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.success?(i(!o),u({type:"REFUSER"}),b(e.message,{variant:"success"})):b(e.message,{variant:"error"}),d(!1)})).catch((function(e){b("Request failed!",{variant:"error"}),d(!1),console.log(e)}))},disabled:p,children:o?"Unfollow":"Follow"}),p&&Object(B.jsx)(A.a,{size:24,className:t.progressbar})]})})},J=Object(g.a)((function(e){return{box:Object(n.a)({},e.breakpoints.up("md"),{margin:e.spacing(2)}),gutters:Object(n.a)({},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3.5)}),avatar:{width:e.spacing(25),height:e.spacing(25)},avatarBox:{position:"relative",width:e.spacing(25),height:e.spacing(25)},flex:{display:"flex"},mainFlex:Object(n.a)({flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row"}),avatarWrapper:Object(n.a)({width:"100%"},e.breakpoints.up("sm"),{width:e.spacing(30)}),mrLeft:{marginLeft:e.spacing(1)},mrRight:{marginRight:e.spacing(1)},justCenter:{justifyContent:"center"}}}));t.default=function(e){var t=J(),a=s.a.useContext(y.a),n=a.authState,o=a.authDispatch,f=Object(v.i)().username,g=s.a.useState(),N=Object(r.a)(g,2),R=N[0],S=N[1],C=Object(w.b)().enqueueSnackbar;return s.a.useEffect((function(){fetch("".concat(D.SERVER,"/users/username/").concat(f),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.success?S(e):(401===e.status&&o({type:"LOGOUT"}),C(e.message,{variant:"error"}))})).catch((function(e){C("Failed to get user data",{variant:"error"})}))}),[f,C,n.refreshPost,n.refreshUser,o]),Object(B.jsx)(s.a.Fragment,{children:R?Object(B.jsx)(s.a.Fragment,{children:Object(B.jsx)(c.a,{className:t.box,children:Object(B.jsx)(l.a,{maxWidth:"md",disableGutters:!0,children:Object(B.jsxs)(p.a,{className:Object(i.a)(t.flex,t.mainFlex),children:[Object(B.jsx)(d.a,{className:Object(i.a)(t.avatarWrapper,t.justCenter),children:Object(B.jsxs)(c.a,{className:t.avatarBox,children:[Object(B.jsx)(u.a,{alt:"".concat(R.login,"'s avatar"),src:R.avatar?"".concat(D.SERVER).concat(R.avatar):"",className:t.avatar}),n.userId===R.userId&&Object(B.jsx)(c.a,{position:"absolute",style:{bottom:0,right:0},children:Object(B.jsx)(H,{})})]})}),Object(B.jsx)(d.a,{disableGutters:!0,className:t.gutters,children:Object(B.jsxs)(p.a,{style:{width:"100%"},children:[Object(B.jsxs)(d.a,{disableGutters:!0,children:[Object(B.jsx)(b.a,{variant:"h4",style:{flexGrow:1},children:R.login}),n.userId===R.userId&&Object(B.jsx)(m.a,{variant:"contained",color:"primary",startIcon:Object(B.jsx)(O.a,{}),component:x.b,to:"/settings",children:" edit"})]}),Object(B.jsx)(d.a,{dense:!0,disableGutters:!0,children:Object(B.jsx)(b.a,{variant:"body2",children:R.bio?R.bio:""})}),Object(B.jsx)(d.a,{dense:!0,disableGutters:!0,children:Object(B.jsx)(b.a,{variant:"body1",children:R.location?R.location:""})}),Object(B.jsx)(d.a,{dense:!0,disableGutters:!0,children:Object(B.jsx)(b.a,{variant:"body1",href:R.website?R.website:"",target:"_blank",component:j.a,children:R.website?"Website Link":null})}),Object(B.jsx)(d.a,{disableGutters:!0,children:n.userId!==R.userId&&Object(B.jsx)(q,{userId:R.userId})}),Object(B.jsx)(d.a,{dense:!0,disableGutters:!0,children:Object(B.jsxs)(p.a,{className:t.flex,children:[Object(B.jsxs)(d.a,{disableGutters:!0,children:[Object(B.jsx)(b.a,{className:Object(i.a)(t.mrRight),variant:"h6",children:R.posts}),Object(B.jsx)(b.a,{variant:"body1",className:t.mrRight,children:"Posts"})]}),Object(B.jsx)(h.a,{orientation:"vertical",flexItem:!0}),Object(B.jsxs)(d.a,{disableGutters:!0,children:[Object(B.jsx)(b.a,{className:Object(i.a)(t.mrRight,t.mrLeft),variant:"h6",children:R.followers}),Object(B.jsx)(b.a,{variant:"body1",className:t.mrRight,children:"Followers"})]}),Object(B.jsx)(h.a,{orientation:"vertical",flexItem:!0}),Object(B.jsxs)(d.a,{disableGutters:!0,children:[Object(B.jsx)(b.a,{className:Object(i.a)(t.mrRight,t.mrLeft),variant:"h6",children:R.following}),Object(B.jsx)(b.a,{variant:"body1",children:"Following"})]})]})})]})})]})})})}):Object(B.jsx)(b.a,{children:"Loading..."})})}}}]);
//# sourceMappingURL=8.21ffeab7.chunk.js.map