{"version":3,"sources":["config.js","components/ScrollToTop.js","utils/AuthContext.js","utils/UserContext.js","components/NewPost.js","utils/FormatDate.js","components/Notification.js","components/navigation.js","components/Comment.js","components/PostCard.js","components/GetPosts.js","pages/Home.js","pages/Login.js","pages/Register.js","components/NewAvatar.js","components/Follow.js","pages/User.js","utils/PrivateRoute.js","utils/PublicRoute.js","pages/NotFound.js","pages/ForgetPass.js","components/ChangePasswordForm.js","components/EditProfile.js","pages/Settings.js","pages/Feed.js","pages/Trending.js","pages/PostById.js","App.js","components/CheckAuthWrapper.js","serviceWorkerRegistration.js","index.js","utils/validator.js"],"names":["module","exports","SERVER","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","AuthContext","React","createContext","UserContext","useStyles","makeStyles","theme","modal","display","alignItems","justifyContent","cardRoot","width","maxWidth","overflow","margin","spacing","position","outline","media","minHeight","maxHeight","image","imageWrapper","closeBtn","right","top","progressbar","left","marginTop","marginLeft","btnWrapper","input","NewPost","classes","authDispatch","useContext","useState","open","setOpen","submit","disableBtn","setDisableBtn","preview","postText","values","setValues","errors","setErrors","enqueueSnackbar","useSnackbar","handleClose","handleInputChange","prop","event","target","files","URL","createObjectURL","value","validatePostText","Fragment","Tooltip","title","IconButton","color","aria-label","onClick","Modal","aria-labelledby","aria-describedby","className","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","Card","onSubmit","e","preventDefault","formData","FormData","append","fetch","method","credentials","body","then","response","json","data","success","variant","type","status","message","catch","error","console","CardActionArea","Container","disableGutters","src","alt","CardContent","TextField","fullWidth","id","label","multiline","rows","onChange","CardActions","style","flexGrow","accept","htmlFor","component","Button","disableElevation","disabled","CircularProgress","size","formateDate","date","nowDate","Date","now","rft","Intl","RelativeTimeFormat","undefined","numeric","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR","intervals","ge","divisor","unit","text","getTime","diff","diffAbs","Math","abs","interval","x","round","isFuture","format","Notification","anchorEl","setAnchorEl","notifications","setNotifications","handleMenuClose","renderNotifications","Menu","anchorOrigin","vertical","horizontal","transformOrigin","Boolean","length","map","notification","MenuItem","RouterLink","to","postId","createdAt","keepMounted","minWidth","currentTarget","res","root","drawer","breakpoints","up","flexShrink","appBar","zIndex","menuButton","marginRight","toolbar","mixins","drawerPaper","content","paddingTop","grow","mrLeft","textDecoration","justCenter","avatar","height","Navigation","props","useTheme","mobileOpen","setMobileOpen","authState","user","setUser","location","container","document","myTheme","setTheme","appliedTheme","createMuiTheme","palette","zhCN","icon","handleDrawerToggle","handleDrawerHide","isAuthenticated","username","refreshUser","handleLogout","ListItem","Divider","Hidden","smDown","implementation","List","userInfo","login","area-label","padding","Avatar","dense","Typography","disablePadding","flexDirection","posts","followers","following","name","index","item","button","selected","ListItemIcon","ListItemText","primary","renderMenu","ThemeProvider","CssBaseline","AppBar","Toolbar","edge","noWrap","aria-controls","aria-haspopup","Link","mdUp","Drawer","anchor","direction","paper","ModalProps","Provider","children","Comment","state","isLoading","this","comment","userId","setState","userID","Skeleton","animation","marginBottom","created_at","Component","card","borderRadius","cardContent","paddingBottom","commentForm","commentAvatar","noPadding","PostCard","hide","setHide","loading","setLoading","post","setPost","liked","setLiked","delete","expanded","setExpanded","t","toDateString","split","isMenuOpen","menuId","notSkeleton","owner","confirm","headers","JSON","stringify","handleDeletePost","handleLike","likes","CardHeader","action","subheader","postImage","CardMedia","single","like","comments","disableSpacing","Collapse","unmountOnExit","commentslist","unshift","commentId","GetPosts","loadMore","nextPage","nullPost","getPosts","page","url","next","concat","handleLoadMore","prevProps","refreshPost","Box","Home","relative","Login","email","password","showPassword","handleChange","validateEmail","validatePassword","handleLogin","a","payload","mt","FormControl","InputLabel","Input","startAdornment","InputAdornment","endAdornment","onMouseDown","clsx","align","Register","confirmPassword","showConfirmPassword","history","useHistory","validateUsername","handleMouseDownPassword","handleRegister","push","FormHelperText","flexCenter","NewAvatar","startIcon","Follow","follow","setFollow","disable","setDisable","log","box","gutters","paddingLeft","avatarBox","flex","mainFlex","avatarWrapper","mrRight","User","useParams","setData","bottom","bio","href","website","orientation","flexItem","PrivateRoute","rest","render","PublicRoute","NotFound","ForgetPass","ChangePasswordForm","oldPassword","showOldPassword","form","EditProfile","maxLength","mrBottom","mrTop","Settings","setIndex","Tabs","indicatorColor","textColor","Tab","Feed","Tranding","PostById","setValue","createBrowserHistory","basename","authReducer","App","initialState","useReducer","maxSnack","exact","path","Trending","CheckAuthWrapper","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","emailRegExp","RegExp","passRegExp","usernameRegExp","postTextRegExp","test"],"mappings":"sFAGAA,EAAOC,QAAU,CACbC,OAJW,0B,2ICGA,SAASC,IACpB,IAAQC,EAAaC,cAAbD,SAMR,OAJAE,qBAAU,WACNC,OAAOC,SAAS,EAAG,KACpB,CAACJ,IAEG,K,uaCRIK,GADKC,IAAMC,gBCCXC,GADKF,IAAMC,gB,sKC0BpBE,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEpBC,SAAU,CACNC,MAAO,OACPC,SAAU,IACVC,SAAU,OACVC,OAAQT,EAAMU,QAAQ,GACtBC,SAAU,WACVC,QAAS,QAEbC,MAAO,CACHC,UAAW,GACXC,UAAW,KAEfC,MAAO,CACHD,UAAW,IACXR,SAAU,QAEdU,aAAc,CACVf,QAAS,OACTE,eAAgB,UAEpBc,SAAU,CACNP,SAAU,WACVQ,MAAOnB,EAAMU,QAAQ,IACrBU,IAAKpB,EAAMU,QAAQ,KAEvBW,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,IAEjBC,WAAY,CACRd,SAAU,YAEde,MAAO,CACHxB,QAAS,YAIbc,GAAQ,KAEG,SAASW,KACpB,IAAMC,EAAU9B,KACR+B,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aAFsB,EAGNlC,IAAMoC,UAAS,GAHT,mBAGvBC,EAHuB,KAGjBC,EAHiB,OAIMtC,IAAMoC,SAAS,CAC/CG,QAAQ,IALkB,mBAIvBC,EAJuB,KAIXC,EAJW,OAOFzC,IAAMoC,SAAS,CACvCM,QAAS,GACTC,SAAU,KATgB,mBAOvBC,EAPuB,KAOfC,EAPe,OAYF7C,IAAMoC,SAAS,CACvCO,UAAU,IAbgB,mBAYvBG,EAZuB,KAYfC,EAZe,KAetBC,EAAoBC,eAApBD,gBAMFE,EAAc,WAChBZ,GAAQ,IAkDNa,EAAoB,SAACC,GAAD,OAAU,SAACC,GACpB,UAATD,GACA/B,GAAQgC,EAAMC,OAAOC,MAAM,GAC3BV,EAAU,2BAAKD,GAAN,IAAcF,QAASc,IAAIC,gBAAgBJ,EAAMC,OAAOC,MAAM,SAEvEV,EAAU,2BAAKD,GAAN,kBAAeQ,EAAOC,EAAMC,OAAOI,SAC5CX,EAAU,CAAEJ,UAAWgB,4BAAiBN,EAAMC,OAAOI,YAI7D,OACI,gBAAC,IAAME,SAAP,WACI,eAACC,EAAA,EAAD,CAASC,MAAM,WAAf,SACI,eAACC,EAAA,EAAD,CAAYC,MAAM,UAAUC,aAAW,eAAeC,QApE/C,WACf5B,GAAQ,IAmEA,SACI,eAAC,KAAD,QAGR,eAAC6B,GAAA,EAAD,CACIC,kBAAgB,yBAChBC,mBAAiB,+BACjBC,UAAWrC,EAAQ3B,MACnB+B,KAAMA,EACNkC,QAASrB,EACTsB,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,KATjB,SAYI,eAACC,GAAA,EAAD,CAAMC,GAAIzC,EAAV,SACI,gBAAC0C,GAAA,EAAD,CAAMT,UAAWrC,EAAQvB,SAAzB,UACI,wBAAMsE,SA9ED,SAACC,GAGtB,GAFAA,EAAEC,iBACFzC,EAAc,CAAEF,QAAQ,IACpBoB,4BAAiBf,EAAOD,UAAW,CACnC,IAAMwC,EAAW,IAAIC,SACjB/D,IACA8D,EAASE,OAAO,QAAShE,IAE7B8D,EAASE,OAAO,WAAYzC,EAAOD,UACnC2C,MAAM,GAAD,OAAI9F,UAAJ,iBAA2B,CAC5B+F,OAAQ,OACRC,YAAa,UACbC,KAAMN,IAELO,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,gBAAiB,CAAE+C,QAAS,YAC5ClD,EAAU,CAAExB,MAAO,GAAIsB,SAAU,KACjCL,GAAQ,GACRJ,EAAa,CACT8D,KAAM,cAGU,MAAhBH,EAAKI,QACL/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,WAE7CtD,EAAc,CACVF,QAAQ,OAGf4D,OAAM,SAACC,GACJpD,EAAgB,uBAAwB,CAAE+C,QAAS,UACnDtD,EAAc,CACVF,QAAQ,IAEZ8D,QAAQD,MAAM,SAAUA,WAGhC3D,EAAc,CAAEF,QAAQ,IACxBS,EAAgB,2CAA4C,CAAE+C,QAAS,aAmC3D,UACI,eAACO,GAAA,EAAD,CAAgBhC,UAAWrC,EAAQf,MAAnC,SACI,gBAACqF,EAAA,EAAD,CAAWC,gBAAc,EAAClC,UAAWrC,EAAQX,aAA7C,UAMI,yBACCsB,EAAOF,SAAW,sBAAK+D,IAAK7D,EAAOF,QAASgE,IAAI,OAAOpC,UAAWrC,EAAQZ,aAGnF,eAACsF,GAAA,EAAD,UACI,eAACC,GAAA,EAAD,CACIC,WAAS,EACTC,GAAG,WACHC,MAAM,mBACNC,WAAS,EACTC,KAAM,EACNvD,MAAOd,EAAOD,SACduE,SAAU/D,EAAkB,YAC5BiD,MAAOtD,EAAOH,aAItB,gBAACwE,GAAA,EAAD,WACI,uBAAKC,MAAO,CAAEC,SAAU,GAAxB,UACI,wBACIC,OAAO,UACPhD,UAAWrC,EAAQF,MACnB+E,GAAG,YACHd,KAAK,OACLkB,SAAU/D,EAAkB,WAChC,wBAAOoE,QAAQ,YAAf,SACI,eAAC1D,EAAA,EAAD,CAASC,MAAM,iBAAiB0D,UAAU,OAA1C,SACI,eAACzD,EAAA,EAAD,CAAYE,aAAW,iBAAiBD,MAAM,UAA9C,SACI,eAAC,KAAD,aAKhB,eAACyD,EAAA,EAAD,CAAQ1B,QAAQ,YAAY2B,kBAAgB,EAACxD,QAAShB,EAAtD,mBAGA,uBAAKoB,UAAWrC,EAAQH,WAAxB,UACI,eAAC2F,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAUgC,KAAK,SAAS0B,kBAAgB,EAACC,SAAUnF,EAAWD,OAAhG,yBAGCC,EAAWD,QAAU,eAACqF,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,uBAIjF,eAACyF,GAAA,EAAD,CAAa7C,UAAWrC,EAAQV,SAAhC,SACI,eAACsC,EAAA,EAAD,CAASC,MAAM,QAAf,SACI,eAACC,EAAA,EAAD,CAAYE,aAAW,cAAcC,QAAShB,EAA9C,SACI,eAAC,IAAD,oB,yBCzOrB,SAAS4E,GAAYC,GAqBhC,IArBgI,IAA1FC,EAAyF,uDAA/EC,KAAKC,MAAOC,EAAmE,uDAA7D,IAAIC,KAAKC,wBAAmBC,EAAW,CAAEC,QAAS,SAC9GC,EAAS,IACTC,EAAS,GAAKD,EACdE,EAAO,GAAKD,EACZE,EAAM,GAAKD,EACXE,EAAO,EAAID,EACXE,EAAQ,GAAKF,EACbG,EAAO,IAAMH,EACbI,EAAY,CACd,CAAEC,GAAIF,EAAMG,QAASH,EAAMI,KAAM,QACjC,CAAEF,GAAIH,EAAOI,QAASJ,EAAOK,KAAM,SACnC,CAAEF,GAAIJ,EAAMK,QAASL,EAAMM,KAAM,QACjC,CAAEF,GAAIL,EAAKM,QAASN,EAAKO,KAAM,OAC/B,CAAEF,GAAIN,EAAMO,QAASP,EAAMQ,KAAM,QACjC,CAAEF,GAAIP,EAAQQ,QAASR,EAAQS,KAAM,UACrC,CAAEF,GAAI,GAAKR,EAAQS,QAAST,EAAQU,KAAM,WAC1C,CAAEF,GAAI,EAAGC,QAAS,EAAGE,KAAM,aAEzBjB,EAAyB,kBAAZF,EAAuBA,EAAQoB,UAAY,IAAInB,KAAKD,GAASoB,UAC1EC,EAAOnB,GAAuB,kBAATH,EAAoBA,EAAO,IAAIE,KAAKF,IAAOqB,UAChEE,EAAUC,KAAKC,IAAIH,GACzB,MAAuBN,EAAvB,eAAkC,CAA7B,IAAMU,EAAQ,KACf,GAAIH,GAAWG,EAAST,GAAI,CACxB,IAAMU,EAAIH,KAAKI,MAAMJ,KAAKC,IAAIH,GAAQI,EAASR,SACzCW,EAAWP,EAAO,EACxB,OAAOI,EAASP,KAAOf,EAAI0B,OAAOD,EAAWF,GAAKA,EAAGD,EAASP,MAAQO,EAASN,OCV3F,IAAMhJ,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCqB,YAAa,CACZV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,QAwFAiI,OApFf,WACC,IAAM7H,EAAU9B,KAChB,EAAgCH,IAAMoC,SAAS,MAA/C,mBAAO2H,EAAP,KAAiBC,EAAjB,KACA,EAA0ChK,IAAMoC,WAAhD,mBAAO6H,EAAP,KAAsBC,EAAtB,KACQlH,EAAoBC,eAApBD,gBAyBFmH,EAAkB,WACvBH,EAAY,OAGPI,EACLH,EAAgB,eAACI,EAAA,EAAD,CACfN,SAAUA,EACVO,aAAc,CAAEC,SAAU,MAAOC,WAAY,QAC7C1D,GAAG,eACH2D,gBAAiB,CAAEF,SAAU,SAAUC,WAAY,SACnDnI,KAAMqI,QAAQX,GACdxF,QAAS4F,EANM,SASdF,EAAcU,OAAS,EAAIV,EAAcW,KAAI,SAACC,GAC9C,OAAQ,eAACC,EAAA,EAAD,CACP5G,QAASiG,EACT3C,UAAWuD,IACXC,GAAE,iBAAYH,EAAaI,QAHpB,mBAIHJ,EAAa3E,QAJV,YAIqB4B,GAAY+C,EAAaK,iBAGpD,eAACJ,EAAA,EAAD,CAAU5G,QAASiG,EAAnB,6CAIF,eAACE,EAAA,EAAD,CACCN,SAAUA,EACVO,aAAc,CAAEC,SAAU,MAAOC,WAAY,QAC7C1D,GAAG,eACHqE,aAAW,EACXV,gBAAiB,CAAEF,SAAU,SAAUC,WAAY,SACnDnI,KAAMqI,QAAQX,GACdxF,QAAS4F,EAPV,SASC,eAACW,EAAA,EAAD,UACC,sBAAK1D,MAAO,CAAEgE,SAAU,IAAKjK,UAAW,KAAxC,SACC,eAACyG,GAAA,EAAD,CAAkBtD,UAAWrC,EAAQP,YAAamG,KAAM,WAM9D,OACC,uCACC,eAAChE,EAAA,EAAD,CAASC,MAAM,gBAAf,SACC,eAACC,EAAA,EAAD,CAAYE,aAAW,gBAAgBD,MAAM,UAAUE,QAlDnC,SAACb,GACvB2G,EAAY3G,EAAMgI,eAnBlB/F,MAAM,GAAD,OAAI9F,UAAJ,wBAAkC,CACtC+F,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACDA,EAAIxF,QACPoE,EAAiBoB,EAAIrB,eAErBjH,EAAgBsI,EAAIpF,QAAS,CAAEH,QAAS,aAGzCI,OAAM,SAACC,GACPpD,EAAgB,8BAA+B,CAAE+C,QAAS,UAC1DM,QAAQD,MAAM,SAAUA,OAsDxB,SACC,eAAC,KAAD,QAGDgE,MCxDEjK,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkL,KAAM,CACFhL,QAAS,QAEbiL,OAAO,eACFnL,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B/K,MARQ,IASRgL,WAAY,IAGpBC,OAAQ,CACJC,OAAQxL,EAAMwL,OAAOL,OAAS,GAElCM,WAAW,aACPC,YAAa1L,EAAMU,QAAQ,IAC1BV,EAAMoL,YAAYC,GAAG,MAAQ,CAC1BnL,QAAS,SAIjByL,QAAS3L,EAAM4L,OAAOD,QACtBE,YAAa,CACTvL,MAxBY,KA0BhBwL,QAAS,CACL9E,SAAU,EACV+E,WAAY/L,EAAMU,QAAQ,IAG9BsL,KAAM,CACFhF,SAAU,GAEdiF,OAAQ,CACJzK,WAAYxB,EAAMU,QAAQ,IAE9B+C,MAAO,CACHyI,eAAgB,QAEpBC,WAAY,CACR/L,eAAgB,UAEpBgM,OAAQ,CACJ9L,MAAON,EAAMU,QAAQ,IACrB2L,OAAQrM,EAAMU,QAAQ,SAqTf4L,OAjTf,SAAoBC,GAChB,IAAQ/M,EAAW+M,EAAX/M,OACFoC,EAAU9B,KACVE,EAAQwM,eACd,EAAoC7M,IAAMoC,UAAS,GAAnD,mBAAO0K,EAAP,KAAmBC,EAAnB,KACA,EAAoC/M,IAAMmC,WAAWpC,IAA7CiN,EAAR,EAAQA,UAAW9K,EAAnB,EAAmBA,aACnB,EAAwBlC,IAAMoC,SAAS,MAAvC,mBAAO6K,EAAP,KAAaC,EAAb,KACA,EAAgClN,IAAMoC,SAAS,MAA/C,mBAAO2H,EAAP,KAAiBC,EAAjB,KAEMmD,EAAWxN,cAETqD,EAAoBC,eAApBD,gBACFoK,OAAuB9E,IAAXzI,EAAuB,kBAAMA,IAASwN,SAAS5H,WAAO6C,EAaxE,GAA4BtI,IAAMoC,UAAS,GAA3C,qBAAOkL,GAAP,MAAgBC,GAAhB,MACMC,GAAeC,aAAgBH,GAXvB,CACVI,QAAS,CACL1H,KAAM,UAGD,CACT0H,QAAS,CACL1H,KAAM,SAIgD2H,QAExDC,GAAQN,GAAgC,eAAC,KAAD,IAAtB,eAAC,KAAD,IAUlBnD,GAAkB,WACpBH,EAAY,OAGV6D,GAAqB,WACvBd,GAAeD,IAGbgB,GAAmB,WACjBhB,GACAC,GAAeD,IAIvB9M,IAAMJ,WAAU,WACRoN,EAAUe,iBACVzI,MAAM,GAAD,OAAI9F,UAAJ,2BAA6BwN,EAAUgB,UAAY,CACpDzI,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,QACLoH,EAAQrH,IAEY,MAAhBA,EAAKI,QACL/D,EAAa,CACT8D,KAAM,WAEdkH,EAAQ,UAGf/G,OAAM,SAACC,GACJ8G,EAAQ,WAGrB,CAACF,EAAWA,EAAUiB,YAAa/L,IAEtC,IAAMgM,GAAe,WACjB5I,MAAM,GAAD,OAAI9F,UAAJ,gBAA0B,CAC3B+F,OAAQ,SACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACF,GAAIA,EAAKC,QAAS,CAEd9C,EAAgB,uBAAwB,CAAE+C,QAD1B,YAEhB7D,EAAa,CAAE8D,KAAM,eAClB,CAEHhD,EAAgB,iBAAkB,CAAE+C,QADpB,cAIvBI,OAAM,SAACC,GAEJpD,EAAgB,iBAAkB,CAAE+C,QADpB,cAKtByF,GACF,iCACI,sBAAKlH,UAAWrC,EAAQ+J,QAAxB,SACI,gBAACmC,EAAA,EAAD,WACI,sBAAK7J,UAAWrC,EAAQoK,OACxB,eAACtI,EAAA,EAAD,CAAYE,aAAW,eAAeD,MAAM,UAAUE,QAAS2J,GAA/D,SACI,eAAC,IAAD,WAIZ,eAACO,EAAA,EAAD,IACCnB,GAAQ,eAACoB,EAAA,EAAD,CAAQC,QAAM,EAACC,eAAe,MAA9B,SACL,gBAACC,EAAA,EAAD,CAAMlK,UAAWrC,EAAQwM,SAAzB,UACI,eAACN,EAAA,EAAD,CAAU7J,UAAWrC,EAAQuK,WAA7B,SACI,eAACzI,EAAA,EAAD,CAAYyD,UAAWuD,IAAYC,GAAE,iBAAYiC,EAAKyB,OAASC,aAAW,OAAOvH,MAAO,CAAEwH,QAAS,GAAnG,SACI,eAACC,EAAA,EAAD,CACIvK,UAAWrC,EAAQwK,OACnBhG,IAAKwG,EAAKR,OAAL,UAAiBjN,WAAjB,OAA0ByN,EAAKR,QAAW,GAC/C/F,IAAG,UAAKuG,EAAKyB,MAAV,mBAIf,eAACP,EAAA,EAAD,CAAU7J,UAAWrC,EAAQuK,WAAYsC,OAAK,EAA9C,SACI,eAACC,EAAA,EAAD,CACIhJ,QAAQ,KACRyB,UAAWuD,IACXC,GAAE,iBAAYiC,EAAKyB,OACnB1K,MAAM,UACNoD,MAAO,CAAEmF,eAAgB,QAL7B,SAMEU,EAAKyB,UAEX,eAACP,EAAA,EAAD,CAAU7J,UAAWrC,EAAQuK,WAAYsC,OAAK,EAA9C,SACI,gBAACN,EAAA,EAAD,CAAMpH,MAAO,CAAE7G,QAAS,QAAUyO,gBAAc,EAAhD,UACI,gBAACb,EAAA,EAAD,CAAU/G,MAAO,CAAE7G,QAAS,OAAQ0O,cAAe,UAAYH,OAAK,EAApE,UACI,eAACC,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,mBACA,eAACgJ,EAAA,EAAD,CAAYhJ,QAAQ,KAApB,SAA0BkH,EAAKiC,WAEnC,gBAACf,EAAA,EAAD,CAAU/G,MAAO,CAAE7G,QAAS,OAAQ0O,cAAe,UAAYH,OAAK,EAApE,UACI,eAACC,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,uBACA,eAACgJ,EAAA,EAAD,CAAYhJ,QAAQ,KAApB,SAA0BkH,EAAKkC,eAEnC,gBAAChB,EAAA,EAAD,CAAU/G,MAAO,CAAE7G,QAAS,OAAQ0O,cAAe,UAAYH,OAAK,EAApE,UACI,eAACC,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,uBACA,eAACgJ,EAAA,EAAD,CAAYhJ,QAAQ,KAApB,SAA0BkH,EAAKmC,yBAMnD,eAAChB,EAAA,EAAD,IACA,eAACI,EAAA,EAAD,UACK,CACG,CAAEa,KAAM,OAAQzB,KAAM,eAAC,IAAD,IAAc0B,MAAO,EAAGtE,GAAI,KAClD,CAAEqE,KAAM,OAAQzB,KAAM,eAAC,IAAD,IAAiB0B,MAAO,EAAGtE,GAAI,SACrD,CAAEqE,KAAM,WAAYzB,KAAM,eAAC,IAAD,IAAkB0B,MAAO,EAAGtE,GAAI,aAG1D,CAAEqE,KAAM,WAAYzB,KAAM,eAAC,KAAD,IAAkB0B,MAAO,EAAGtE,GAAI,aAC1D,CAAEqE,KAAM,aAAczB,KAAM,eAAC,IAAD,IAAgB0B,MAAO,EAAGtE,GAAG,UAAD,OAAYgC,EAAUgB,YAChFpD,KAAI,SAAC2E,EAAMD,GAAP,OACF,gBAACnB,EAAA,EAAD,CAAUqB,QAAM,EAEZC,SAAUtC,EAASzN,WAAa6P,EAAKvE,GACrCxD,UAAWuD,IACXC,GAAIuE,EAAKvE,GACT9G,QAAS4J,GALb,UAMI,eAAC4B,EAAA,EAAD,UAAeH,EAAK3B,OACpB,eAAC+B,EAAA,EAAD,CAAcC,QAASL,EAAKF,SANvBE,EAAKD,YAUtB,eAAClB,EAAA,EAAD,IACA,eAACI,EAAA,EAAD,UACI,gBAACL,EAAA,EAAD,CAAUqB,QAAM,EAACtL,QAAS,WAAQ4J,KAAoBI,MAAtD,UACI,eAACwB,EAAA,EAAD,UAAc,eAAC,IAAD,MACd,eAACC,EAAA,EAAD,CAAcC,QAAQ,mBAMhCC,GACF,gBAACxF,EAAA,EAAD,CACIN,SAAUA,EACVO,aAAc,CAAEC,SAAU,MAAOC,WAAY,QAC7C1D,GAAG,eACHqE,aAAW,EACXV,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,SAChDnI,KAAMqI,QAAQX,GACdxF,QAAS4F,GAPb,UAUI,eAACW,EAAA,EAAD,CAAU5G,QAASiG,GAAiB3C,UAAWuD,IAAYC,GAAG,YAA9D,8BACA,eAACF,EAAA,EAAD,CAAU5G,QAASiG,GAAiB3C,UAAWuD,IAAYC,GAAE,iBAAYgC,EAAUgB,UAAnF,qBACA,eAAClD,EAAA,EAAD,CAAU5G,QAAS,WAAQiG,KAAmB+D,MAA9C,uBAIR,OACI,eAAC4B,EAAA,EAAD,CAAezP,MAAOmN,GAAtB,SACI,uBAAKlJ,UAAWrC,EAAQsJ,KAAxB,UACI,eAACwE,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,CAAQhP,SAAS,QAAQsD,UAAWrC,EAAQ2J,OAA5C,SACI,gBAACqE,EAAA,EAAD,WACKjD,EAAUe,gBACP,eAAChK,EAAA,EAAD,CACIC,MAAM,UACNC,aAAW,cACXiM,KAAK,QACLhM,QAAS2J,GACTvJ,UAAWrC,EAAQ6J,WALvB,SAOI,eAAC,IAAD,MAEJ,GACJ,eAACiD,EAAA,EAAD,CAAYhJ,QAAQ,KAAKoK,QAAM,EAAC7L,UAAWrC,EAAQ6B,MAAO0D,UAAWuD,IAAYC,GAAG,IAAIhH,MAAM,UAA9F,sBAGA,sBAAKM,UAAWrC,EAAQoK,OACvBW,EAAUe,iBAAmB,eAAC/L,GAAD,IAC9B,eAAC6B,EAAA,EAAD,CAASC,MAAM,eAAf,SACI,eAACC,EAAA,EAAD,CAAYE,aAAW,eAAeC,QA7LpC,WACtBqJ,IAAUD,KA4L4EtJ,MAAM,UAAxE,SACK4J,OAGRZ,EAAUe,gBACP,gBAAC,IAAMnK,SAAP,WACI,eAAC,GAAD,IACA,eAACC,EAAA,EAAD,CAASC,MAAM,UAAf,SACI,eAACC,EAAA,EAAD,CACIE,aAAW,eACXD,MAAM,UACNkM,KAAK,MACLE,gBAAc,eACdC,gBAAc,OACdnM,QAvMN,SAACb,GAC3B2G,EAAY3G,EAAMgI,gBAgMU,SAQI,eAAC,IAAD,WAMZ,gBAAC,IAAMzH,SAAP,WACI,eAAC6D,EAAA,EAAD,CAAQzD,MAAM,UAAUwD,UAAW8I,IAAMtF,GAAG,SAAS1G,UAAWrC,EAAQqK,OAAxE,mBACA,eAAC7E,EAAA,EAAD,CAAQzD,MAAM,UAAUwD,UAAW8I,IAAMtF,GAAG,YAAY1G,UAAWrC,EAAQqK,OAA3E,8BAKfuD,GACA7C,EAAUe,gBACP,uBAAKzJ,UAAWrC,EAAQuJ,OAAQvH,aAAW,SAA3C,UAEI,eAACoK,EAAA,EAAD,CAAQkC,MAAI,EAAChC,eAAe,MAA5B,SACI,eAACiC,EAAA,EAAD,CACIpD,UAAWA,EACXrH,QAAQ,YACR0K,OAA4B,QAApBpQ,EAAMqQ,UAAsB,QAAU,OAC9CrO,KAAMyK,EACNvI,QAASsJ,GACT5L,QAAS,CACL0O,MAAO1O,EAAQiK,aAEnB0E,WAAY,CACRzF,aAAa,GAVrB,SAaKK,OAGT,eAAC6C,EAAA,EAAD,CAAQC,QAAM,EAACC,eAAe,MAA9B,SACI,eAACiC,EAAA,EAAD,CACIvO,QAAS,CACL0O,MAAO1O,EAAQiK,aAEnBnG,QAAQ,YACR1D,MAAI,EALR,SAOKmJ,UAIX,GAEN,wBAAMlH,UAAWrC,EAAQkK,QAAzB,UACI,sBAAK7H,UAAWrC,EAAQ+J,UACxB,eAACzF,EAAA,EAAD,CAAW3F,SAAS,KAApB,SACI,eAAC,GAAYiQ,SAAb,CAAsBnN,MAAOuJ,EAA7B,SACKL,EAAMkE,sB,0JC/SpBC,GAxEf,4MACIC,MAAQ,CACJ/D,KAAM,KACNgE,WAAW,GAHnB,uDAMI,WAAqB,IAAD,OAChB3L,MAAM,GAAD,OAAI9F,UAAJ,gCAAkC0R,KAAKtE,MAAMuE,QAAQC,QAAU,CAChE7L,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACEA,EAAIxF,QACJ,EAAKuL,SAAS,CAAEpE,KAAM3B,EAAK2F,WAAW,IAEtC,EAAKI,SAAS,CAAEpE,KAAM,CAAEyB,MAAO,KAAMjC,OAAQ,KAAM2E,OAAQ,EAAKxE,MAAMuE,QAAQG,QAAUL,WAAW,OAG1G9K,OAAM,SAACC,GACJ,EAAKiL,SAAS,CAAEpE,KAAM,CAAEyB,MAAO,KAAMjC,OAAQ,KAAM2E,OAAQ,EAAKxE,MAAMuE,QAAQG,QAAUL,WAAW,SApBnH,oBAwBI,WACI,OACI,eAAC,IAAMrN,SAAP,UACI,gBAAC+C,GAAA,EAAD,CAAaS,MAAO,CAAE7G,QAAS,QAA/B,UACM2Q,KAAKF,MAAMC,UAUN,eAACM,GAAA,EAAD,CAAUC,UAAU,OAAOzL,QAAQ,SAASpF,MAAO,GAAI+L,OAAQ,KAV5C,eAAC3I,EAAA,EAAD,CACtByD,UAAWuD,IACXC,GAAE,iBAAYkG,KAAKF,MAAM/D,KAAKyB,OAC9BzK,aAAW,eACXmD,MAAO,CAAEwH,QAAS,EAAGlC,OAAQ,eAJP,SAKtB,eAACmC,EAAA,EAAD,CACI5K,aAAW,cACXwC,IAAKyK,KAAKF,MAAM/D,KAAKR,OAAhB,UAA4BjN,WAA5B,OAAqC0R,KAAKF,MAAM/D,KAAKR,QAAW,OAK7E,uBAAKrF,MAAO,CAAEvF,WAAY,GAAIwF,SAAU,GAAxC,UACM6J,KAAKF,MAAMC,UAiBN,eAACM,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,MAAMyG,MAAO,CAAEqK,aAAc,MAjBvD,gBAAC1C,EAAA,EAAD,CAAYvH,UAAU,IAAtB,UACtB,eAACuH,EAAA,EAAD,CACIhJ,QAAQ,YACRyB,UAAWuD,IACXC,GAAE,iBAAYkG,KAAKF,MAAM/D,KAAKyB,OAC9B1K,MAAM,UACNoD,MAAO,CAAEmF,eAAgB,QAL7B,SAOK2E,KAAKF,MAAM/D,KAAKyB,QAErB,eAACK,EAAA,EAAD,CACIvH,UAAU,OACVzB,QAAQ,UACRqB,MAAO,CAAEvF,WAAY,GAHzB,SAIKiG,GAAYoJ,KAAKtE,MAAMuE,QAAQO,iBAKtCR,KAAKF,MAAMC,UAGN,eAACM,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,MAAMyG,MAAO,CAAEqK,aAAc,MAHvD,eAAC1C,EAAA,EAAD,CAAYvH,UAAU,IAAIzB,QAAQ,QAAQqB,MAAO,CAAExF,UAAW,GAA9D,SACrBsP,KAAKtE,MAAMuE,QAAQzN,oBA7DhD,GAA6BiO,aC2BvBxR,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCuR,KAAM,CACFC,aAAc,GACdJ,aAAcpR,EAAMU,QAAQ,IAEhC+Q,YAAa,CACT1F,WAAY,EACZ2F,cAAe,GAEnBlQ,WAAY,CACRA,WAAYxB,EAAMU,QAAQ,IAE9BiR,YAAa,CACTzR,QAAS,OACTC,WAAY,UAEhByR,cAAe,CACXlG,YAAa1L,EAAMU,QAAQ,IAE/BW,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,EACZC,YAAa,IAEjBqQ,UAAW,CACPtD,QAAS,GAEb1N,MAAO,CACHkL,WAAY,cAIL,SAAS+F,GAASvF,GAC7B,IAAM3K,EAAU9B,KAChB,EAAwBH,IAAMoC,UAAS,GAAvC,mBAAOgQ,EAAP,KAAaC,EAAb,KACA,EAA8BrS,IAAMoC,UAAS,GAA7C,mBAAOkQ,EAAP,KAAgBC,EAAhB,KAEQrQ,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aACR,EAAwBlC,IAAMoC,SAASwK,EAAM4F,MAA7C,mBAAOA,EAAP,KAAaC,EAAb,KACA,EAA4BzS,IAAMoC,SAAS,CACvC+O,QAAS,KADb,mBAAOvO,EAAP,KAAeC,EAAf,KAGA,EAA0B7C,IAAMoC,WAAhC,mBAAOsQ,EAAP,KAAcC,EAAd,KACA,EAAgC3S,IAAMoC,SAAS,MAA/C,mBAAO2H,EAAP,KAAiBC,EAAjB,KAEMiD,EAAOjN,IAAMmC,WAAWjC,IAE9B,EAAoCF,IAAMoC,SAAS,CAC/C+O,SAAS,EACTyB,QAAQ,IAFZ,mBAAOpQ,EAAP,KAAmBC,EAAnB,KAIA,EAAgCzC,IAAMoC,UAAS,GAA/C,mBAAOyQ,EAAP,KAAiBC,EAAjB,KAEQ9P,EAAoBC,eAApBD,gBAGF+P,EADO,IAAI9K,KAAKuK,EAAKd,YACZsB,eAAeC,MAAM,KAM9B9I,EAAkB,WACpBH,EAAY,OAuCVkJ,EAAaxI,QAAQX,GACrBoJ,EAAM,eAAWX,EAAKvH,OAAhB,SACN4E,EACF,gBAACxF,EAAA,EAAD,CACIN,SAAUA,EACVO,aAAc,CAAEC,SAAU,MAAOC,WAAY,QAC7C1D,GAAIqM,EACJhI,aAAW,EACXV,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,SAChDnI,KAAM6Q,EACN3O,QAAS4F,EAPb,UAUI,eAACW,EAAA,EAAD,CAAU5G,QAASiG,EAAiBxC,UAAQ,EAA5C,uBACA,eAACmD,EAAA,EAAD,CAAU5G,QAASiG,EAAiBxC,UAAQ,EAA5C,0BACE2K,GAAW1F,EAAMwG,aAAeZ,EAAKa,OAASpG,EAAKmE,SAAWoB,EAAKa,MAAMjC,QAAW,+BAElF,eAACtG,EAAA,EAAD,CAAU5G,QAAS,WAAQiG,IArDd,WACrB,IAAMtE,EAAO,CAAEoF,OAAQuH,EAAKvH,QACxBpL,OAAOyT,QAAQ,0CACfhO,MAAM,GAAD,OAAI9F,UAAJ,iBAA2B,CAC5B+F,OAAQ,SACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,gBAAiB,CAAE+C,QAAS,YAC5C7D,EAAa,CACT8D,KAAM,YAEVqM,GAAQ,KAERrP,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UACzCtD,EAAc,CACVmQ,QAAQ,QAInBzM,OAAM,SAACC,GACJpD,EAAgB,wBAAyB,CAAE+C,QAAS,UACpDtD,EAAc,CACVmQ,QAAQ,IAEZvM,QAAQD,MAAM,SAAUA,MAsBkBsN,IAA9C,SACI,eAAC3E,EAAA,EAAD,CAAY/K,MAAM,YAAlB,gCA0DV2P,EAAa,WACfrO,MAAM,GAAD,OAAI9F,UAAJ,8BAAgCgT,EAAKvH,QAAU,CAChD1F,OAAQ,OACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACEA,EAAIxF,UACAwF,EAAIxF,SACAwF,EAAIoH,MACJD,EAAQ,2BACDD,GADA,IAEHoB,MAAOpB,EAAKoB,MAAQ,KAGxBnB,EAAQ,2BACDD,GADA,IAEHoB,MAAOpB,EAAKoB,MAAQ,KAG5BjB,EAASrH,EAAIoH,SAGM,MAAfpH,EAAIrF,QACJ/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgBsI,EAAIpF,QAAS,CAAEH,QAAS,eAKnDI,OAAM,SAACC,GACJpD,EAAgB,sBAAuB,CAAE+C,QAAS,cAqC9D,OAjCA/F,IAAMJ,WAAU,WACRgN,EAAMwG,aAAeZ,EAAKvH,QAC1B3F,MAAM,GAAD,OAAI9F,UAAJ,8BAAgCgT,EAAKvH,QAAU,CAChD1F,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACEA,EAAIxF,SACJ6M,EAASrH,EAAIoH,OASjBH,GAAW,MAEdpM,OAAM,SAACC,GACJmM,GAAW,QAIxB,CAACI,EAAUH,EAAKvH,OAAQ2B,EAAMwG,cAS7B,gBAAC,IAAMxP,SAAP,YACMwO,GAAQ,gBAACrN,GAAA,EAAD,CAAMT,UAAWrC,EAAQ2P,KAAM7L,QAAQ,WAAvC,UACN,eAAC8N,GAAA,EAAD,CACIpH,QAAS6F,GAAW1F,EAAMwG,YAAe,eAACrP,EAAA,EAAD,CACrCyD,UAAWuD,IACXC,GAAE,iBAAYwH,EAAKa,MAAM3E,OACzBpK,UAAWrC,EAAQiQ,UACnBjO,aAAW,eAJ0B,SAKrC,eAAC4K,EAAA,EAAD,CAAQ5K,aAAW,cAAcyC,IAAK8L,EAAKa,MAAM3E,MAAOjI,IAAK+L,EAAKa,MAAM5G,OAAX,UAAuBjN,WAAvB,OAAgCgT,EAAKa,MAAM5G,QAAW,OAGhH,eAAC8E,GAAA,EAAD,CAAUC,UAAU,OAAOzL,QAAQ,SAASpF,MAAO,GAAI+L,OAAQ,KAEtEoH,QAASxB,GAAW1F,EAAMwG,YACrB,eAACrP,EAAA,EAAD,CACGE,aAAW,eACXmM,gBAAe+C,EACf9C,gBAAc,OACdnM,QAjNG,SAACb,GACxB2G,EAAY3G,EAAMgI,gBA4MD,SAMG,eAAC,KAAD,MAEF,KAENvH,MAAQwO,EAUD,eAACf,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,MAAMyG,MAAO,CAAEqK,aAAc,KAT7E,eAAC1C,EAAA,EAAD,CACIvH,UAAWuD,IACXC,GAAE,iBAAYwH,EAAKa,MAAM3E,OACzB1K,MAAM,UACN+B,QAAQ,QACRqB,MAAO,CAAEmF,eAAgB,QAL7B,SAMKiG,EAAKa,MAAM3E,QAIpBqF,UAAYzB,EAAuC,eAACf,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,QAArF,UAAcoS,EAAE,GAAhB,YAAsBA,EAAE,GAAxB,YAA8BA,EAAE,OAE7CT,GAAW1F,EAAMwG,YACdZ,EAAKwB,WAAa,eAACC,GAAA,EAAD,CACf7M,MAAO,CACHsF,OAAQ,EACRN,WAAY,UAEhB/K,MAAK,UAAK7B,WAAL,OAAcgT,EAAKwB,WACxBlQ,MAAK,UAAK0O,EAAKa,MAAM3E,MAAhB,WACLhI,IAAK8L,EAAKwB,UACVhJ,GAAE,iBAAYwH,EAAKvH,QACnBzD,UAAWoF,EAAMsH,OAASvN,KAAcoE,MAGzC,eAACwG,GAAA,EAAD,CAAUC,UAAU,OAAOzL,QAAQ,OAAOzB,UAAWrC,EAAQf,QAEpE,eAACyF,GAAA,EAAD,WACM2L,GAAW1F,EAAMwG,YAAe,eAACrE,EAAA,EAAD,CAAYvH,UAAU,IAAtB,SAC7BgL,EAAK7P,WAEH,gBAAC,IAAMiB,SAAP,WACC,eAAC2N,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAItF,MAAO,CAAEqK,aAAc,KAC9D,eAACF,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,cAKvD2R,GAAW1F,EAAMwG,YAAe,gBAACrE,EAAA,EAAD,CAAYzK,UAAWrC,EAAQJ,WAAYkE,QAAQ,YAAYyB,UAAU,IAAzE,UAC7BgL,EAAKoB,MADwB,IAChBpB,EAAK2B,KAAO,EAAI,QAAU,OACxC,gBAACpF,EAAA,EAAD,CAAYvH,UAAU,OAAOzB,QAAQ,YAAYzB,UAAWrC,EAAQJ,WAApE,UAAiF2Q,EAAK4B,SAAtF,IAAiG5B,EAAK4B,SAAW,EAAI,WAAa,gBAE/H,eAAC7C,GAAA,EAAD,CAAUC,UAAU,OAAO9E,OAAQ,GAAI/L,MAAM,MAAMyG,MAAO,CAAEvF,WAAY,GAAI4P,aAAc,MAEjG,eAACtK,GAAA,EAAD,CAAakN,gBAAc,EAA3B,SACKzH,EAAMwG,YAAe,gBAAC,IAAMxP,SAAP,WACjB8O,EAAQ,eAAC7O,EAAA,EAAD,CAASC,MAAM,cAAf,SACL,eAACC,EAAA,EAAD,CAAYE,aAAW,SAASC,QAASyP,EAAY3P,MAAM,UAA3D,SACI,eAAC,KAAD,CAAwBA,MAAM,gBAGhC,eAACH,EAAA,EAAD,CAASC,MAAM,YAAf,SACE,eAACC,EAAA,EAAD,CAAYE,aAAW,OAAOC,QAASyP,EAAvC,SACI,eAAC,KAAD,QAIZ,eAAC9P,EAAA,EAAD,CAASC,MAAM,WAAf,SACI,eAACC,EAAA,EAAD,CAAYO,UAAWrC,EAAQJ,WAAYoC,aAAW,UAAUC,QA9M9D,WACtB4O,GAAaD,IA6MO,SACI,eAAC,KAAD,QAGR,eAAChP,EAAA,EAAD,CAASC,MAAM,aAAf,SACI,eAACC,EAAA,EAAD,CAAYE,aAAW,QAAQK,UAAWrC,EAAQJ,WAAlD,SACI,eAAC,KAAD,WAIL,sBAAKuF,MAAO,CAAEsF,OAAQ,QAGjC,gBAAC4H,GAAA,EAAD,CAAUxP,GAAI+N,EAAUjO,QAAQ,OAAO2P,eAAa,EAApD,UACI,eAACnG,EAAA,EAAD,IACA,eAACzH,GAAA,EAAD,UACI,wBAAM3B,SAvNK,SAACC,GAE5B,GADAA,EAAEC,iBACEtC,EAAOuO,QAAS,CAChB1O,EAAc,CAAE0O,SAAS,IACzB,IAAM1L,EAAO,CAAEwF,OAAQuH,EAAKvH,OAAQvH,MAAOd,EAAOuO,SAClD7L,MAAM,GAAD,OAAI9F,UAAJ,kBAA4B,CAC7B+F,OAAQ,OACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAUhO,KAEpBC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACF,GAAIA,EAAIxF,QAAS,CACbjD,EAAU,CAAEsO,QAAS,KACrBnO,EAAgBsI,EAAIpF,QAAS,CAAEH,QAAS,YACxC,IAAIqO,EAAW5B,EAAKgC,aACpBJ,EAASK,QAAQnJ,GACjBmH,EAAQ,2BACDD,GADA,IAEH4B,SAAU5B,EAAK4B,SAAW,EAC1BI,aAAcJ,UAGC,MAAf9I,EAAIrF,QACJ/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgBsI,EAAIpF,QAAS,CAAEH,QAAS,UAG5CtD,EAAc,CAAE0O,SAAS,OAE5BhL,OAAM,SAACC,GACJpD,EAAgB,qBAAsB,CAAE+C,QAAS,UACjDtD,EAAc,CAAE0O,SAAS,IACzB9K,QAAQD,MAAM,SAAUA,WAGhCpD,EAAgB,yBAA0B,CAAE+C,QAAS,aA8KDzB,UAAWrC,EAAQ+P,YAA3D,UACK/E,GAAQ,eAAC4B,EAAA,EAAD,CAAQpI,IAAKwG,EAAKR,OAAL,UAAiBjN,WAAjB,OAA0ByN,EAAKR,QAAW,GAAInI,UAAWrC,EAAQgQ,gBACvF,eAACrL,GAAA,EAAD,CAAWE,GAAG,eAAeC,MAAM,qBAAqBG,SA7N3D,SAAC7D,GAClBR,EAAU,2BAAKD,GAAN,IAAcuO,QAAS9N,EAAMC,OAAOI,UA4NuDA,MAAOd,EAAOuO,QAAStK,WAAS,IAChH,uBAAKO,MAAO,CAAEpG,SAAU,YAAxB,UACI,eAAC6C,EAAA,EAAD,CAASC,MAAM,cAAf,SACI,eAACC,EAAA,EAAD,CAAYE,aAAW,cAAcD,MAAM,UAAUgC,KAAK,SAAS2B,SAAUnF,EAAW2O,QAAxF,SACI,eAAC,KAAD,QAGP3O,EAAW2O,SAAW,eAACvJ,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,sBAIjFkL,EAAMwG,aAAgBZ,EAAKgC,aAAa5J,KAAI,SAAAuG,GAAO,OAAI,eAAC,GAAD,CAASA,QAASA,GAAcA,EAAQuD,oBAGvG7E,KCvYN,IAoHQ8E,GApHf,4MACI3D,MAAQ,CACJnL,KAAM,KACN+O,UAAU,EACVC,SAAU,GAJlB,EAOIC,SAAW,CAAE7J,OAAQ,KAAMmG,OAAQ,KAAM4C,UAAW,KAAMrR,SAAU,KAAM+O,WAAY,MAP1F,EASIqD,SAAW,SAACC,GACR1P,MAAM,GAAD,OAAI9F,WAAJ,OAAa,EAAKoN,MAAMqI,IAAxB,iBAAoCD,GAAQ,CAC7CzP,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACEA,EAAIxF,QACA,EAAKkL,MAAM6D,SAAW,EACtB,EAAKxD,SAAL,2BACO,EAAKL,OADZ,IAEInL,KAAM,CACFqP,KAAM5J,EAAI4J,KACVhG,MAAO,EAAK8B,MAAMnL,KAAKqJ,MAAMiG,OAAO7J,EAAI4D,QAE5C2F,SAAU,EAAK7D,MAAM6D,SAAW,EAChCD,UAAU,KAGd,EAAKvD,SAAL,2BACO,EAAKL,OADZ,IAEInL,KAAMyF,EACNuJ,SAAU,EAAK7D,MAAM6D,SAAW,EAChCD,UAAU,KAKlB,EAAKvD,SAAL,2BACO,EAAKL,OADZ,IAEI6D,SAAU,EAAK7D,MAAM6D,SAAW,EAChCD,UAAU,QAIrBzO,OAAM,SAACC,GAEJ,EAAKiL,SAAL,2BACO,EAAKL,OADZ,IAEI6D,SAAU,EAAK7D,MAAM6D,SAAW,EAChCD,UAAU,KAEdvO,QAAQD,MAAM,SAAUA,OAnDxC,EAuDIgP,eAAiB,WACb,EAAK/D,SAAL,2BACO,EAAKL,OADZ,IAEI4D,UAAU,KAEd,EAAKG,SAAS,EAAK/D,MAAM6D,WA5DjC,uDA+DI,WACI3D,KAAK6D,SAAS7D,KAAKF,MAAM6D,YAhEjC,gCAmEI,SAAmBQ,GACXnE,KAAKtE,MAAMI,UAAUsI,cAAgBD,EAAUrI,UAAUsI,cACzDpE,KAAKG,SAAL,2BACOH,KAAKF,OADZ,IAEI6D,SAAU,KAEd3D,KAAK6D,SAAS,MAzE1B,oBA6EI,WACI,OACI,gBAAC,IAAMnR,SAAP,WACKsN,KAAKF,MAAMnL,KAAQqL,KAAKF,MAAMnL,KAAKqJ,MAAMtE,KAAI,SAAA4H,GAAI,OAAI,eAACL,GAAD,CAAUK,KAAMA,EAAMY,aAAa,GAAWZ,EAAKvH,WAClG,gBAAC,IAAMrH,SAAP,WACC,eAACuO,GAAD,CAAUiB,aAAa,EAAOZ,KAAMtB,KAAK4D,UAAc,YACvD,eAAC3C,GAAD,CAAUiB,aAAa,EAAOZ,KAAMtB,KAAK4D,UAAc,eAG9D5D,KAAKF,MAAMnL,MAAQqL,KAAKF,MAAMnL,KAAKqP,MAAQ,gBAACK,GAAA,EAAD,CACxChV,QAAQ,OACRE,eAAe,SACf2G,MAAO,CACHpG,SAAU,WACVyQ,aAAc,IALsB,UAOxC,eAAChK,EAAA,EAAD,CACI1B,QAAQ,WACR/B,MAAM,UACNE,QAASgN,KAAKkE,eACdzN,SAAUuJ,KAAKF,MAAM4D,SAJzB,uBAOC1D,KAAKF,MAAM4D,UAAY,eAAChN,GAAA,EAAD,CACpBC,KAAM,GACNT,MAAO,CACHpG,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,gBA3GzC,GAA8B8P,aCGxBxR,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkL,KAAK,aACDhL,QAAS,QACRF,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B5K,OAAQT,EAAMU,QAAQ,KAG9B0Q,aAAc,CACVA,aAAcpR,EAAMU,QAAQ,QAwBrByU,OApBf,WACI,IAAQxI,EAAchN,IAAMmC,WAAWpC,IAA/BiN,UACF/K,EAAU9B,KAKhB,OACI,eAAC,IAAMyD,SAAP,UACI,eAAC2R,GAAA,EAAD,CAAKjR,UAAWrC,EAAQsJ,KAAxB,SACI,gBAAChF,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,UACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,KAAKzB,UAAWrC,EAAQwP,aAA5C,0BACA,eAAC,GAAD,CAAUzE,UAAWA,EAAWiI,IAAI,oB,uKCVlD9U,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCS,OAAQ,CACJc,UAAWvB,EAAMU,QAAQ,IAE7B0U,SAAU,CACNzU,SAAU,YAEdU,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,QAwJN6T,OAnJf,WACI,IAAMzT,EAAU9B,KADH,EAEeH,IAAMoC,SAAS,CACvCuT,MAAO,GACPC,SAAU,GACVC,cAAc,IALL,mBAENjT,EAFM,KAEEC,EAFF,OAOe7C,IAAMoC,SAAS,CACvCuT,OAAO,EACPC,UAAU,IATD,mBAON9S,EAPM,KAOEC,EAPF,OAWuB/C,IAAMoC,SAAS,CAC/CG,QAAQ,IAZC,mBAWNC,EAXM,KAWMC,EAXN,KAcLO,EAAoBC,eAApBD,gBAGAd,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aAEF4T,EAAe,SAAC1S,GAAD,OAAU,SAACC,GAC5BR,EAAU,2BAAKD,GAAN,kBAAeQ,EAAOC,EAAMC,OAAOI,SAC/B,UAATN,EACAL,EAAU,CACN4S,OAAQI,yBAAc1S,EAAMC,OAAOI,SAEvB,aAATN,GACPL,EAAU,CACN6S,UAAWI,4BAAiB3S,EAAMC,OAAOI,WAa/CuS,EAAW,yCAAG,WAAOhR,GAAP,gBAAAiR,EAAA,yDAChBjR,EAAEC,iBACGpC,EAAO6S,OAAU7S,EAAO8S,WAAYhT,EAAOgT,WAAYhT,EAAO+S,MAFnD,uBAGZlT,EAAc,CACVF,QAAQ,IAENsD,EAAO,CAAE8P,MAAO/S,EAAO+S,MAAOC,SAAUhT,EAAOgT,UANzC,SAONtQ,MAAM,GAAD,OAAI9F,UAAJ,eAAyB,CAChC+F,OAAQ,OACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,sBAAuB,CAAE+C,QAAS,YAClD7D,EAAa,CACT8D,KAAM,QACNmQ,QAAStQ,MAGb7C,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UACzCtD,EAAc,CACVF,QAAQ,QAInB4D,OAAM,SAACC,GACJpD,EAAgB,gBAAiB,CAAE+C,QAAS,UAC5CtD,EAAc,CACVF,QAAQ,IAEZ8D,QAAQD,MAAM,SAAUA,MAnCpB,6BAsCZpD,EAAgB,sCAAuC,CAAE+C,QAAS,YAtCtD,2CAAH,sDA2CjB,OACI,eAAC,IAAMnC,SAAP,UACI,eAAC2C,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,SACI,eAAC+O,GAAA,EAAD,CAAKa,GAAI,EAAT,SACI,wBAAMpR,SAAUiR,EAAhB,UACI,eAAClH,EAAA,EAAD,CAAYhJ,QAAQ,KAAK/B,MAAM,UAA/B,oBACA,eAAC+K,EAAA,EAAD,CAAYhJ,QAAQ,QAAQ/B,MAAM,UAAlC,wCACA,gBAACuR,GAAA,EAAD,CAAKa,GAAI,EAAT,UACI,gBAACC,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAO6S,MAAhE,UACI,eAACW,GAAA,EAAD,CAAY/O,QAAQ,YAApB,mBACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,YACHpD,MAAOd,EAAO+S,MACdzO,SAAU4O,EAAa,SACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,KAAD,WAKhB,gBAACqV,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAO8S,SAAhE,UACI,eAACU,GAAA,EAAD,CAAY/O,QAAQ,eAApB,sBACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,eACHd,KAAMpD,EAAOiT,aAAe,OAAS,WACrCnS,MAAOd,EAAOgT,SACd1O,SAAU4O,EAAa,YACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,KAAD,MAGR0V,aACI,eAACD,GAAA,EAAD,CAAgBzV,SAAS,MAAzB,SACI,eAAC+C,EAAA,EAAD,CACIE,aAAW,6BACXC,QAxFZ,WAC5BrB,EAAU,2BAAKD,GAAN,IAAciT,cAAejT,EAAOiT,iBAwFLc,YArFZ,SAACtT,GAC7BA,EAAM6B,kBAiF8B,SAKKtC,EAAOiT,aAAe,eAAC,KAAD,IAAqB,eAAC,KAAD,aAMhE,eAACQ,GAAA,EAAD,CAAa/R,UAAWrC,EAAQnB,OAAhC,SACI,eAACwP,GAAA,EAAD,CAAM9I,UAAWuD,IAAYC,GAAG,cAAchH,MAAM,UAApD,qCAEJ,gBAACqS,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWsS,aAAK3U,EAAQnB,OAAQmB,EAAQwT,UAA/D,UACI,eAAChO,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAU2D,SAAUnF,EAAWD,OAAQyD,KAAK,SAA9E,oBACCxD,EAAWD,QAAU,eAACqF,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,iBAEzE,gBAACqN,EAAA,EAAD,CAAYhJ,QAAQ,YAAY/B,MAAM,UAAUM,UAAWrC,EAAQnB,OAAQ+V,MAAM,SAAjF,6BACoB,eAACvG,GAAA,EAAD,CAAM9I,UAAWuD,IAAYC,GAAG,YAAYhH,MAAM,UAAlD,8C,UCzJ1C7D,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCS,OAAQ,CACJc,UAAWvB,EAAMU,QAAQ,IAE7B0U,SAAU,CACNzU,SAAU,YAEdU,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,QAqNNiV,OAjNf,WACI,IAAM7U,EAAU9B,KAChB,EAA4BH,IAAMoC,SAAS,CACvC4L,SAAU,GACV2H,MAAO,GACPC,SAAU,GACVmB,gBAAiB,GACjBlB,cAAc,EACdmB,qBAAqB,IANzB,mBAAOpU,EAAP,KAAeC,EAAf,KAQA,EAA4B7C,IAAMoC,SAAS,CACvC4L,UAAU,EACV2H,OAAO,EACPC,UAAU,EACVmB,iBAAiB,IAJrB,mBAAOjU,EAAP,KAAeC,EAAf,KAMA,EAAoC/C,IAAMoC,SAAS,CAC/CG,QAAQ,IADZ,mBAAOC,EAAP,KAAmBC,EAAnB,KAGQO,EAAoBC,eAApBD,gBAEFiU,EAAUC,cAEVpB,EAAe,SAAC1S,GAAD,OAAU,SAACC,GAC5BR,EAAU,2BAAKD,GAAN,kBAAeQ,EAAOC,EAAMC,OAAOI,SAC/B,UAATN,EACAL,EAAU,CACN4S,OAAQI,yBAAc1S,EAAMC,OAAOI,SAEvB,aAATN,EACPL,EAAU,CACN6S,UAAWI,4BAAiB3S,EAAMC,OAAOI,SAE7B,aAATN,EACPL,EAAU,CACNiL,UAAWmJ,4BAAiB9T,EAAMC,OAAOI,SAE7B,oBAATN,GACPL,EAAU,CACNgU,gBAAiB1T,EAAMC,OAAOI,QAAUd,EAAOgT,aAarDwB,EAA0B,SAAC/T,GAC7BA,EAAM6B,kBAGJmS,EAAc,yCAAG,WAAOpS,GAAP,gBAAAiR,EAAA,yDACnBjR,EAAEC,iBACGpC,EAAO6S,OAAU7S,EAAO8S,WAAYhT,EAAOoL,WAAYpL,EAAOgT,WAAYhT,EAAO+S,QAAS/S,EAAOmU,gBAFnF,uBAGftU,EAAc,CACVF,QAAQ,IAENsD,EAAO,CACTmI,SAAUpL,EAAOoL,SACjB2H,MAAO/S,EAAO+S,MACdC,SAAUhT,EAAOgT,SACjBmB,gBAAiBnU,EAAOmU,iBAVb,SAYTzR,MAAM,GAAD,OAAI9F,UAAJ,kBAA4B,CACnC+F,OAAQ,OACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACF,GAAIA,EAAKC,QAAS,CAEd9C,EAAgB,2BAA4B,CAAE+C,QAD9B,YAEhBkR,EAAQK,KAAK,cACV,CAEHtU,EAAgB,uBAAwB,CAAE+C,QAD1B,UAEhBtD,EAAc,CACVF,QAAQ,QAInB4D,OAAM,SAACC,GAEJpD,EAAgB,uBAAwB,CAAE+C,QAD1B,UAEhBtD,EAAc,CACVF,QAAQ,IAEZ8D,QAAQD,MAAM,SAAUA,MAxCjB,6BA2CfpD,EAAgB,gDAAiD,CAAE+C,QAAS,YA3C7D,2CAAH,sDAgDpB,OACI,eAAC,IAAMnC,SAAP,UACI,eAAC2C,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,SACI,eAAC+O,GAAA,EAAD,CAAKa,GAAI,EAAT,SACI,wBAAMpR,SAAUqS,EAAhB,UACI,eAACtI,EAAA,EAAD,CAAYhJ,QAAQ,KAAK/B,MAAM,UAA/B,sBACA,eAAC+K,EAAA,EAAD,CAAYhJ,QAAQ,QAAQ/B,MAAM,UAAlC,gDACA,gBAACuR,GAAA,EAAD,CAAKa,GAAI,EAAT,UACI,gBAACC,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAOkL,SAAhE,UACI,eAACsI,GAAA,EAAD,CAAY/O,QAAQ,eAApB,sBACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,eACHd,KAAK,OACLtC,MAAOd,EAAOoL,SACd9G,SAAU4O,EAAa,YACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,IAAD,WAKhB,gBAACqV,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAO6S,MAAhE,UACI,eAACW,GAAA,EAAD,CAAY/O,QAAQ,YAApB,mBACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,YACHd,KAAK,QACLtC,MAAOd,EAAO+S,MACdzO,SAAU4O,EAAa,SACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,KAAD,WAKhB,gBAACqV,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAO8S,SAAhE,UACI,eAACU,GAAA,EAAD,CAAY/O,QAAQ,eAApB,sBACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,eACHd,KAAMpD,EAAOiT,aAAe,OAAS,WACrCnS,MAAOd,EAAOgT,SACd1O,SAAU4O,EAAa,YACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,KAAD,MAGR0V,aACI,eAACD,GAAA,EAAD,CAAgBzV,SAAS,MAAzB,SACI,eAAC+C,EAAA,EAAD,CACIE,aAAW,6BACXC,QAhHZ,WAC5BrB,EAAU,2BAAKD,GAAN,IAAciT,cAAejT,EAAOiT,iBAgHLc,YAAaS,EAHjB,SAKKxU,EAAOiT,aAAe,eAAC,KAAD,IAAqB,eAAC,KAAD,UAK5D,eAAC0B,GAAA,EAAD,mFAEJ,gBAAClB,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAOiU,gBAAhE,UACI,eAACT,GAAA,EAAD,CAAY/O,QAAQ,sBAApB,8BACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,sBACHd,KAAMpD,EAAOoU,oBAAsB,OAAS,WAC5CtT,MAAOd,EAAOmU,gBACd7P,SAAU4O,EAAa,mBACvBU,eACI,eAACC,GAAA,EAAD,CAAgBzV,SAAS,QAAzB,SACI,eAAC,KAAD,MAGR0V,aACI,eAACD,GAAA,EAAD,CAAgBzV,SAAS,MAAzB,SACI,eAAC+C,EAAA,EAAD,CACIE,aAAW,qCACXC,QAtIL,WACnCrB,EAAU,2BAAKD,GAAN,IAAcoU,qBAAsBpU,EAAOoU,wBAsIZL,YAAaS,EAHjB,SAKKxU,EAAOoU,oBAAsB,eAAC,KAAD,IAAqB,eAAC,KAAD,aASvE,gBAACX,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWsS,aAAK3U,EAAQnB,OAAQmB,EAAQwT,UAA/D,UACI,eAAChO,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAUgC,KAAK,SAAS2B,SAAUnF,EAAWD,OAA/E,sBACCC,EAAWD,QAAU,eAACqF,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,iBAEzE,gBAACqN,EAAA,EAAD,CAAYhJ,QAAQ,YAAY/B,MAAM,UAAUM,UAAWrC,EAAQnB,OAAQ+V,MAAM,SAAjF,qCAC4B,eAACvG,GAAA,EAAD,CAAMtM,MAAM,UAAUwD,UAAWuD,IAAYC,GAAG,SAAhD,mC,qBC1NlD7K,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCC,MAAO,CACHC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEpBC,SAAU,CACNC,MAAO,OACPC,SAAU,IACVC,SAAU,OACVC,OAAQT,EAAMU,QAAQ,GACtBC,SAAU,WACVC,QAAS,QAEbC,MAAO,CACHC,UAAW,GACXC,UAAW,KAEfC,MAAO,CACHD,UAAW,IACXR,SAAU,QAEd4W,WAAY,CACRjX,QAAS,OACTE,eAAgB,UAEpBiB,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,IAEjBC,WAAY,CACRd,SAAU,YAEde,MAAO,CACHxB,QAAS,YAIbc,GAAQ,KAEG,SAASoW,KACpB,IAAMxV,EAAU9B,KACR+B,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aACR,EAAwBlC,IAAMoC,UAAS,GAAvC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAoCtC,IAAMoC,SAAS,CAC/CG,QAAQ,IADZ,mBAAOC,EAAP,KAAmBC,EAAnB,KAGA,EAA4BzC,IAAMoC,SAAS,CACvCM,QAAS,KADb,mBAAOE,EAAP,KAAeC,EAAf,KAGQG,EAAoBC,eAApBD,gBAMFE,EAAc,WAChBZ,GAAQ,IAuDZ,OACI,gBAAC,IAAMsB,SAAP,WACI,eAACC,EAAA,EAAD,CAASC,MAAM,gBAAf,SACI,eAACC,EAAA,EAAD,CAAYC,MAAM,UAAUC,aAAW,eAAeC,QA/D/C,WACf5B,GAAQ,IA8DA,SACI,eAAC,KAAD,QAGR,eAAC6B,GAAA,EAAD,CACIC,kBAAgB,yBAChBC,mBAAiB,+BACjBC,UAAWrC,EAAQ3B,MACnB+B,KAAMA,EACNkC,QAASrB,EACTsB,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,KATjB,SAYI,eAACC,GAAA,EAAD,CAAMC,GAAIzC,EAAV,SACI,eAAC0C,GAAA,EAAD,CAAMT,UAAWrC,EAAQvB,SAAzB,SACI,wBAAMsE,SAzED,SAACC,GAGtB,GAFAA,EAAEC,iBACFzC,EAAc,CAAEF,QAAQ,IACpBlB,GAAO,CACP,IAAM8D,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAShE,IAEzBiE,MAAM,GAAD,OAAI9F,UAAJ,wBAAkC,CACnC+F,OAAQ,OACRC,YAAa,UACbC,KAAMN,IAELO,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,kBAAmB,CAAE+C,QAAS,YAC9ClD,EAAU,CAAEH,QAAS,KACrBJ,GAAQ,GACRJ,EAAa,CACT8D,KAAM,cAGU,MAAhBH,EAAKI,QACL/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UACzClD,EAAU,CAAEH,QAAS,MAEzBD,EAAc,CACVF,QAAQ,OAGf4D,OAAM,SAACC,GACJpD,EAAgB,yBAA0B,CAAE+C,QAAS,UACrDlD,EAAU,CAAEH,QAAS,KACrBD,EAAc,CACVF,QAAQ,IAEZ8D,QAAQD,MAAM,SAAUA,WAGhC3D,EAAc,CAAEF,QAAQ,IACxBS,EAAgB,8BAA+B,CAAE+C,QAAS,aA8B9C,UACI,eAAC8N,GAAA,EAAD,CACIC,OACI,eAACjQ,EAAA,EAAD,CAASC,MAAM,QAAf,SACI,eAACC,EAAA,EAAD,CAAYE,aAAW,cAAcC,QAAShB,EAA9C,SACI,eAAC,IAAD,QAIZY,MAAM,kBAEV,eAACwC,GAAA,EAAD,CAAgBhC,UAAWrC,EAAQf,MAAnC,SACI,gBAACqF,EAAA,EAAD,CAAWC,gBAAc,EAAClC,UAAWrC,EAAQuV,WAA7C,UACI,wBACIlQ,OAAO,UACPhD,UAAWrC,EAAQF,MACnB+E,GAAG,YACHd,KAAK,OACLkB,SA5CJ,SAAC7D,GAC7BhC,GAAQgC,EAAMC,OAAOC,MAAM,GAC3BV,EAAU,2BAAKD,GAAN,IAAcF,QAASc,IAAIC,gBAAgBJ,EAAMC,OAAOC,MAAM,UA4C1CX,EAAOF,QAEA,sBAAK+D,IAAK7D,EAAOF,QAASgE,IAAI,OAAOpC,UAAWrC,EAAQZ,QAE1D,wBAAOkG,QAAQ,YAAf,SACE,eAAC1D,EAAA,EAAD,CAASC,MAAM,sBAAsB0D,UAAU,OAA/C,SACI,eAACC,EAAA,EAAD,CAAQ1B,QAAQ,YAAY9B,aAAW,sBAAsBD,MAAM,UAAU0T,UAAW,eAAC,KAAD,IAAxF,0CAQpB,eAAC/Q,GAAA,EAAD,CAAarC,UAAWrC,EAAQuV,WAAhC,SACK5U,EAAOF,SAAW,wBAAO6E,QAAQ,YAAf,SACf,eAAC1D,EAAA,EAAD,CAASC,MAAM,qBAAqB0D,UAAU,OAA9C,SACI,eAACC,EAAA,EAAD,CAAQ1B,QAAQ,YAAY9B,aAAW,sBAAsBD,MAAM,UAAU0T,UAAW,eAAC,KAAD,IAAxF,sCAMZ,eAACtJ,EAAA,EAAD,IACA,gBAACjH,GAAA,EAAD,WACI,sBAAKC,MAAO,CAAEC,SAAU,KAExB,eAACI,EAAA,EAAD,CAAQ1B,QAAQ,YAAY2B,kBAAgB,EAACxD,QAAShB,EAAtD,mBAGA,uBAAKoB,UAAWrC,EAAQH,WAAxB,UACI,eAAC2F,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAUgC,KAAK,SAAS0B,kBAAgB,EAACC,SAAUnF,EAAWD,OAAhG,2BAGCC,EAAWD,QAAU,eAACqF,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,gCC5MzG,IAAMvB,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCqB,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,IAEjBC,WAAY,CACRd,SAAU,WACV+K,YAAa1L,EAAMU,QAAQ,QAgFpB4W,OA5Ef,SAAgB/K,GACZ,IAAM3K,EAAU9B,KAChB,EAA4BH,IAAMoC,UAAS,GAA3C,mBAAOwV,EAAP,KAAeC,EAAf,KACA,EAA8B7X,IAAMoC,UAAS,GAA7C,mBAAO0V,EAAP,KAAgBC,EAAhB,KACQ7V,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aAEAc,EAAoBC,eAApBD,gBAqDR,OArBAhD,IAAMJ,WAAU,WACZ0F,MAAM,GAAD,OAAI9F,UAAJ,gCAAkCoN,EAAMwE,QAAU,CACnD7L,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,QACDD,EAAK+R,OACLC,GAAU,GAEVA,GAAU,IAGd7U,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UACzC8R,GAAU,OAGjB1R,OAAM,SAACC,SAEb,CAACyR,EAAWjL,EAAMwE,OAAQpO,IAEzB,eAAC,IAAMY,SAAP,UACI,uBAAKU,UAAWrC,EAAQH,WAAxB,UACI,eAAC2F,EAAA,EAAD,CACI1B,QAAQ,YACR/B,MAAM,UACN0D,kBAAgB,EAChBxD,QA1DK,WACjB6T,GAAW,GACX,IAAMlS,EAAO,CAAEuL,OAAQxE,EAAMwE,QAC7B9L,MAAM,GAAD,OAAI9F,UAAJ,gCAAkCoN,EAAMwE,QAAU,CACnD7L,OAAQ,OACRC,YAAa,UACb+N,QAAS,CACL,eAAgB,oBAEpB9N,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL+R,GAAWD,GACX1V,EAAa,CACT8D,KAAM,YAEVhD,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,aAEzC/C,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UAE7CgS,GAAW,MAEd5R,OAAM,SAACC,GACJpD,EAAgB,kBAAmB,CAAE+C,QAAS,UAC9CgS,GAAW,GACX1R,QAAQ2R,IAAI5R,OAgCRuB,SAAUmQ,EALd,SAMKF,EAAS,WAAa,WAE1BE,GAAW,eAAClQ,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,oBCvErEvB,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrC4X,IAAI,eACC5X,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B5K,OAAQT,EAAMU,QAAQ,KAG9BmX,QAAQ,eACH7X,EAAMoL,YAAYC,GAAG,MAAQ,CAC1ByM,YAAa9X,EAAMU,QAAQ,OAGnC0L,OAAQ,CACJ9L,MAAON,EAAMU,QAAQ,IACrB2L,OAAQrM,EAAMU,QAAQ,KAG1BqX,UAAW,CACPpX,SAAU,WACVL,MAAON,EAAMU,QAAQ,IACrB2L,OAAQrM,EAAMU,QAAQ,KAE1BsX,KAAM,CACF9X,QAAS,QAGb+X,SAAS,aACLrJ,cAAe,UACd5O,EAAMoL,YAAYC,GAAG,MAAQ,CAC1BuD,cAAe,QAGvBsJ,cAAc,aACV5X,MAAO,QACNN,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B/K,MAAON,EAAMU,QAAQ,MAG7BuL,OAAQ,CACJzK,WAAYxB,EAAMU,QAAQ,IAE9ByX,QAAS,CACLzM,YAAa1L,EAAMU,QAAQ,IAE/ByL,WAAY,CACR/L,eAAgB,cA+GTgY,OA3Gf,SAAc7L,GACV,IAAM3K,EAAU9B,KAChB,EAAoCH,IAAMmC,WAAWpC,IAA7CiN,EAAR,EAAQA,UAAW9K,EAAnB,EAAmBA,aACX8L,EAAa0K,cAAb1K,SAER,EAAwBhO,IAAMoC,WAA9B,mBAAOyD,EAAP,KAAa8S,EAAb,KACQ3V,EAAoBC,eAApBD,gBA4BR,OA1BAhD,IAAMJ,WAAU,WAIZ0F,MAAM,GAAD,OAAI9F,UAAJ,2BAA6BwO,GAAY,CAC1CzI,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,QACL6S,EAAQ9S,IAEY,MAAhBA,EAAKI,QACL/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,cAGhDI,OAAM,SAACC,GACJpD,EAAgB,0BAA2B,CAAE+C,QAAS,eAG/D,CAACiI,EAAUhL,EAAiBgK,EAAUsI,YAAatI,EAAUiB,YAAa/L,IAGzE,eAAC,IAAM0B,SAAP,UACKiC,EAEO,eAAC,IAAMjC,SAAP,UACI,eAAC2R,GAAA,EAAD,CAAKjR,UAAWrC,EAAQgW,IAAxB,SACI,eAAC1R,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,SACI,gBAACgI,EAAA,EAAD,CAAMlK,UAAWsS,aAAK3U,EAAQoW,KAAMpW,EAAQqW,UAA5C,UACI,eAACnK,EAAA,EAAD,CAAU7J,UAAWsS,aAAK3U,EAAQsW,cAAetW,EAAQuK,YAAzD,SACI,gBAAC+I,GAAA,EAAD,CAAKjR,UAAWrC,EAAQmW,UAAxB,UACI,eAACvJ,EAAA,EAAD,CACInI,IAAG,UAAKb,EAAK6I,MAAV,aACHjI,IAAKZ,EAAK4G,OAAL,UAAiBjN,WAAjB,OAA0BqG,EAAK4G,QAAW,GAC/CnI,UAAWrC,EAAQwK,SAEtBO,EAAUoE,SAAWvL,EAAKuL,QAAU,eAACmE,GAAA,EAAD,CAAKvU,SAAS,WAAWoG,MAAO,CAAEwR,OAAQ,EAAGpX,MAAO,GAApD,SACjC,eAACiW,GAAD,WAIZ,eAACtJ,EAAA,EAAD,CAAU3H,gBAAc,EAAClC,UAAWrC,EAAQiW,QAA5C,SACI,gBAAC1J,EAAA,EAAD,CAAMpH,MAAO,CAAEzG,MAAO,QAAtB,UACI,gBAACwN,EAAA,EAAD,CAAU3H,gBAAc,EAAxB,UACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,KAAKqB,MAAO,CAAEC,SAAU,GAA5C,SAAkDxB,EAAK6I,QACtD1B,EAAUoE,SAAWvL,EAAKuL,QAAU,eAAC3J,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAU0T,UAAW,eAAC,KAAD,IAAclQ,UAAWuD,IAAYC,GAAG,YAA/F,sBAEzC,eAACmD,EAAA,EAAD,CAAUW,OAAK,EAACtI,gBAAc,EAA9B,SACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,SAA6BF,EAAKgT,IAAMhT,EAAKgT,IAAM,OAEvD,eAAC1K,EAAA,EAAD,CAAUW,OAAK,EAACtI,gBAAc,EAA9B,SACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,SAA6BF,EAAKsH,SAAWtH,EAAKsH,SAAW,OAEjE,eAACgB,EAAA,EAAD,CAAUW,OAAK,EAACtI,gBAAc,EAA9B,SACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,QAChB+S,KAAMjT,EAAKkT,QAAUlT,EAAKkT,QAAU,GACpCzV,OAAO,SACPkE,UAAW8I,KAHf,SAGsBzK,EAAKkT,QAAU,eAAiB,SAE1D,gBAAC5K,EAAA,EAAD,CAAU3H,gBAAc,EAAxB,UACKwG,EAAUoE,SAAWvL,EAAKuL,QAAU,eAAC,GAAD,CAAQA,OAAQvL,EAAKuL,SAC1D,eAAC3J,EAAA,EAAD,CAAQnD,UAAWrC,EAAQuW,QAASzS,QAAQ,YAAY2B,kBAAgB,EAAxE,8BAEJ,eAACyG,EAAA,EAAD,CAAUW,OAAK,EAACtI,gBAAc,EAA9B,SACI,gBAACgI,EAAA,EAAD,CAAMlK,UAAWrC,EAAQoW,KAAzB,UACI,gBAAClK,EAAA,EAAD,CAAU3H,gBAAc,EAAxB,UACI,eAACuI,EAAA,EAAD,CAAYzK,UAAWsS,aAAK3U,EAAQuW,SAAUzS,QAAQ,KAAtD,SAA4DF,EAAKqJ,QACjE,eAACH,EAAA,EAAD,CAAYhJ,QAAQ,QAAQzB,UAAWrC,EAAQuW,QAA/C,sBAEJ,eAACpK,EAAA,EAAD,CAAS4K,YAAY,WAAWC,UAAQ,IACxC,gBAAC9K,EAAA,EAAD,CAAU3H,gBAAc,EAAxB,UACI,eAACuI,EAAA,EAAD,CAAYzK,UAAWsS,aAAK3U,EAAQuW,QAASvW,EAAQqK,QAASvG,QAAQ,KAAtE,SAA4EF,EAAKsJ,YACjF,eAACJ,EAAA,EAAD,CAAYhJ,QAAQ,QAAQzB,UAAWrC,EAAQuW,QAA/C,0BAEJ,eAACpK,EAAA,EAAD,CAAS4K,YAAY,WAAWC,UAAQ,IACxC,gBAAC9K,EAAA,EAAD,CAAU3H,gBAAc,EAAxB,UACI,eAACuI,EAAA,EAAD,CAAYzK,UAAWsS,aAAK3U,EAAQuW,QAASvW,EAAQqK,QAASvG,QAAQ,KAAtE,SAA4EF,EAAKuJ,YACjF,eAACL,EAAA,EAAD,CAAYhJ,QAAQ,QAApB,6CAYtC,eAACgJ,EAAA,EAAD,4B,SCrJHmK,GAnBM,SAAC,GAAuC,IAA1BvH,EAAyB,EAApCnK,UAAyB2R,EAAW,8BAChDnM,EAAchN,IAAMmC,WAAWpC,IAA/BiN,UACR,OACI,eAAC,IAAD,2BACQmM,GADR,IAEIC,OAAQ,SAAAxM,GAAK,OACTI,EAAUe,gBAEN,eAAC4D,EAAD,eAAe/E,IAEf,eAAC,IAAD,CAAU5B,GAAI,gBCQnBqO,GAlBK,SAAC,GAAuC,IAA1B1H,EAAyB,EAApCnK,UAAyB2R,EAAW,8BAC/CnM,EAAchN,IAAMmC,WAAWpC,IAA/BiN,UACR,OACI,eAAC,IAAD,2BACQmM,GADR,IAEIC,OAAQ,SAAAxM,GAAK,OACRI,EAAUe,gBAIP,eAAC,IAAD,CAAU/C,GAAI,MAFd,eAAC2G,EAAD,eAAe/E,S,qBCYpB0M,GAjBf,4JACI,WAEI,OACI,gBAAC,IAAM1V,SAAP,WACI,eAACmL,EAAA,EAAD,CAAYhJ,QAAQ,KAAK/B,MAAM,UAAU6S,MAAM,SAA/C,iBACA,eAAC9H,EAAA,EAAD,CAAYhJ,QAAQ,KAAK/B,MAAM,UAAU6S,MAAM,SAA/C,6BACA,eAACtB,GAAA,EAAD,CAAKa,GAAI,EAAGS,MAAM,SAAlB,SACI,gBAACpP,EAAA,EAAD,CAAQzD,MAAM,UAAUwD,UAAW8I,IAAMtF,GAAG,IAA5C,UACI,eAAC,KAAD,IADJ,0BARpB,GAA8B2G,aCKf4H,GAVf,4JACI,WACI,OACI,+BACI,eAACxK,EAAA,EAAD,gCAJhB,GAAgC4C,a,oBCmB1BxR,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCS,OAAQ,CACJc,UAAWvB,EAAMU,QAAQ,IAE7B0U,SAAU,CACNzU,SAAU,YAEdU,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,QAIN,SAAS2X,KACpB,IAAMvX,EAAU9B,KAChB,EAA4BH,IAAMoC,SAAS,CACvCqX,YAAa,GACb7D,SAAU,GACVmB,gBAAiB,GACjBlB,cAAc,EACd6D,iBAAiB,IALrB,mBAAO9W,EAAP,KAAeC,EAAf,KAQA,EAA4B7C,IAAMoC,SAAS,CACvCwT,UAAU,EACVmB,iBAAiB,IAFrB,mBAAOjU,EAAP,KAAeC,EAAf,KAKA,EAAoC/C,IAAMoC,SAAS,CAC/CG,QAAQ,IADZ,mBAAOC,EAAP,KAAmBC,EAAnB,KAIQO,EAAoBC,eAApBD,gBAEF8S,EAAe,SAAC1S,GAAD,OAAU,SAACC,GAC5BR,EAAU,2BAAKD,GAAN,kBAAeQ,EAAOC,EAAMC,OAAOI,SAC/B,aAATN,EACAL,EAAU,CACN6S,UAAWI,4BAAiB3S,EAAMC,OAAOI,SAE7B,oBAATN,GACPL,EAAU,CACNgU,gBAAiB1T,EAAMC,OAAOI,QAAUd,EAAOgT,aAarDwB,EAA0B,SAAC/T,GAC7BA,EAAM6B,kBAoDV,OACI,eAAC,IAAMtB,SAAP,UACI,wBAAMoB,SAnDW,SAACC,GAGtB,GAFAA,EAAEC,iBACFmB,QAAQ2R,IAAI,0BACPlV,EAAO8S,WAAa9S,EAAOiU,iBAAmBnU,EAAOgT,UAAYhT,EAAO6W,YAAa,CACtFhX,EAAc,CACVF,QAAQ,IAEZ,IAAMsD,EAAO,CACT4T,YAAa7W,EAAO6W,YACpB7D,SAAUhT,EAAOgT,SACjBmB,gBAAiBnU,EAAOmU,iBAE5BzR,MAAM,GAAD,OAAI9F,UAAJ,qBAA+B,CAChC+F,OAAQ,OACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,iCAAkC,CAAE+C,QAAS,YAC7DlD,EAAU,CACN4W,YAAa,GACb7D,SAAU,GACVmB,gBAAiB,GACjBlB,cAAc,EACd6D,iBAAiB,KAGrB1W,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,UAE7CtD,EAAc,CACVF,QAAQ,OAGf4D,OAAM,SAACC,GACJpD,EAAgB,0BAA2B,CAAE+C,QAAS,UACtDtD,EAAc,CACVF,QAAQ,IAEZ8D,QAAQD,MAAM,SAAUA,WAGhCpD,EAAgB,oDAAqD,CAAE+C,QAAS,aAKhF,UACI,gBAACsQ,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,UACI,eAACwV,GAAA,EAAD,CAAY/O,QAAQ,sBAApB,8BACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,sBACHd,KAAMpD,EAAO8W,gBAAkB,OAAS,WACxChW,MAAOd,EAAO6W,YACdvS,SAAU4O,EAAa,eAMvBY,aACI,eAACD,GAAA,EAAD,CAAgBzV,SAAS,MAAzB,SACI,eAAC+C,EAAA,EAAD,CACIE,aAAW,qCACXC,QA5EG,WAC/BrB,EAAU,2BAAKD,GAAN,IAAc8W,iBAAkB9W,EAAO8W,oBA4EpB/C,YAAaS,EAHjB,SAKKxU,EAAO8W,gBAAkB,eAAC,KAAD,IAAqB,eAAC,KAAD,aAMnE,gBAACrD,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAO8S,SAAhE,UACI,eAACU,GAAA,EAAD,CAAY/O,QAAQ,eAApB,0BACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,eACHd,KAAMpD,EAAOiT,aAAe,OAAS,WACrCnS,MAAOd,EAAOgT,SACd1O,SAAU4O,EAAa,YAMvBY,aACI,eAACD,GAAA,EAAD,CAAgBzV,SAAS,MAAzB,SACI,eAAC+C,EAAA,EAAD,CACIE,aAAW,6BACXC,QAzGA,WAC5BrB,EAAU,2BAAKD,GAAN,IAAciT,cAAejT,EAAOiT,iBAyGjBc,YAAaS,EAHjB,SAKKxU,EAAOiT,aAAe,eAAC,KAAD,IAAqB,eAAC,KAAD,UAK5D,eAAC0B,GAAA,EAAD,mFAEJ,gBAAClB,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAAQsF,MAAOtD,EAAOiU,gBAAhE,UACI,eAACT,GAAA,EAAD,CAAY/O,QAAQ,sBAApB,8BACA,eAACgP,GAAA,EAAD,CACIzP,GAAG,sBACHd,KAAMpD,EAAOiT,aAAe,OAAS,WACrCnS,MAAOd,EAAOmU,gBACd7P,SAAU4O,EAAa,wBAQ/B,gBAACO,GAAA,EAAD,CAAa/R,UAAWsS,aAAK3U,EAAQnB,OAAQmB,EAAQwT,UAArD,UACI,eAAChO,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAUgC,KAAK,SAAS2B,SAAUnF,EAAWD,OAA/E,6BACCC,EAAWD,QAAU,eAACqF,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,sBC3LzF,IAAMvB,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkC,OAAQ,CACJvB,SAAU,YAEdU,YAAa,CACTV,SAAU,WACVS,IAAK,MACLE,KAAM,MACNC,WAAY,GACZC,YAAa,IAEjBf,OAAQ,CACJc,UAAWvB,EAAMU,QAAQ,IAE7B4Y,KAAM,CACFlI,aAAcpR,EAAMU,QAAQ,QAIrB,SAAS6Y,KACpB,IAAM3X,EAAU9B,KACV8M,EAAOjN,IAAMmC,WAAWjC,IACtBgC,EAAiBlC,IAAMmC,WAAWpC,IAAlCmC,aACR,EAA4BlC,IAAMoC,SAAS,CACvCiN,KAAM,GACNsG,MAAO,GACPkD,IAAK,GACLE,QAAS,GACT5L,SAAU,KALd,mBAAOvK,EAAP,KAAeC,EAAf,KAOA,EAA8B7C,IAAMoC,UAAS,GAA7C,mBAAO0V,EAAP,KAAgBC,EAAhB,KACQ/U,EAAoBC,eAApBD,gBAuDR,OAZAhD,IAAMJ,WAAU,WACRqN,GACApK,EAAU,CACNwM,KAAMpC,EAAKoC,KACXsG,MAAO1I,EAAK0I,MACZkD,IAAK5L,EAAK4L,IACVE,QAAS9L,EAAK8L,QACd5L,SAAUF,EAAKE,aAGxB,CAACF,IAGA,eAAC,IAAMrJ,SAAP,UACI,wBAAMoB,SAvDO,SAACC,GAClBA,EAAEC,iBACF6S,GAAW,GACX,IAAMlS,EAAO,CACT,MAASjD,EAAO+S,MAChB,KAAQ/S,EAAOyM,KACf,IAAOzM,EAAOiW,IACd,SAAYjW,EAAOuK,SACnB,QAAWvK,EAAOmW,SAEtBzT,MAAM,GAAD,OAAI9F,UAAJ,yBAAmC,CACpC+F,OAAQ,OACRgO,QAAS,CACL,eAAgB,oBAEpB/N,YAAa,UACbC,KAAM+N,KAAKC,UAAU5N,KAEpBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,SACL9C,EAAgB,mBAAoB,CAAE+C,QAAS,YAC/C7D,EAAa,CACT8D,KAAM,cAGU,MAAhBH,EAAKI,QACL/D,EAAa,CACT8D,KAAM,WAEdhD,EAAgB6C,EAAKK,QAAS,CAAEH,QAAS,WAE7CgS,GAAW,MAEd5R,OAAM,SAACC,GACJpD,EAAgB,0BAA2B,CAAE+C,QAAS,UACtDgS,GAAW,GACX1R,QAAQD,MAAM,SAAUA,OAkBE9B,UAAWrC,EAAQ0X,KAAjD,UACI,gBAACtD,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,UACI,eAACwV,GAAA,EAAD,CAAY/O,QAAQ,WAApB,kBACA,eAACgP,GAAA,EAAD,CACIvQ,KAAK,OACLc,GAAG,WACHpD,MAAOd,EAAOyM,KACdnI,SAAU,SAAAjC,GAAC,OAAIpC,EAAU,2BAAKD,GAAN,IAAcyM,KAAMpK,EAAE3B,OAAOI,eAG7D,gBAAC2S,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,UACI,eAACwV,GAAA,EAAD,CAAY/O,QAAQ,YAApB,mBACA,eAACgP,GAAA,EAAD,CACIvQ,KAAK,QACLc,GAAG,YACHpD,MAAOd,EAAO+S,MACdzO,SAAU,SAAAjC,GAAC,OAAIpC,EAAU,2BAAKD,GAAN,IAAc+S,MAAO1Q,EAAE3B,OAAOI,eAG9D,eAAC2S,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,SACI,eAAC8F,GAAA,EAAD,CACIC,WAAS,EACTC,GAAG,UACHG,KAAM,EACNF,MAAM,4BACNrD,MAAOd,EAAOiW,IACd7R,WAAS,EACT6S,UAAU,MACV3S,SAAU,SAAAjC,GAAC,OAAIpC,EAAU,2BAAKD,GAAN,IAAciW,IAAK5T,EAAE3B,OAAOI,cAG5D,gBAAC2S,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,UACI,eAACwV,GAAA,EAAD,CAAY/O,QAAQ,eAApB,sBACA,eAACgP,GAAA,EAAD,CACIvQ,KAAK,OACLc,GAAG,eACHpD,MAAOd,EAAOuK,SACdjG,SAAU,SAAAjC,GAAC,OAAIpC,EAAU,2BAAKD,GAAN,IAAcuK,SAAUlI,EAAE3B,OAAOI,eAGjE,gBAAC2S,GAAA,EAAD,CAAaxP,WAAS,EAACvC,UAAWrC,EAAQnB,OAA1C,UACI,eAACwV,GAAA,EAAD,CAAY/O,QAAQ,cAApB,qBACA,eAACgP,GAAA,EAAD,CACIvQ,KAAK,MACLc,GAAG,cACHpD,MAAOd,EAAOmW,QACd7R,SAAU,SAAAjC,GAAC,OAAIpC,EAAU,2BAAKD,GAAN,IAAcmW,QAAS9T,EAAE3B,OAAOI,eAIhE,gBAAC2S,GAAA,EAAD,CAAa/R,UAAWsS,aAAK3U,EAAQM,OAAQN,EAAQnB,QAArD,UACI,eAAC2G,EAAA,EAAD,CAAQ1B,QAAQ,YAAY/B,MAAM,UAAUgC,KAAK,SAAS2B,SAAUmQ,EAApE,4BAGCA,GAAW,eAAClQ,GAAA,EAAD,CAAkBC,KAAM,GAAIvD,UAAWrC,EAAQP,sBCjJ/E,IAAMvB,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkL,KAAK,eACAlL,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B5K,OAAQT,EAAMU,QAAQ,KAG9B+Y,SAAU,CACNrI,aAAcpR,EAAMU,QAAQ,IAEhCgZ,MAAO,CACHnY,UAAWvB,EAAMU,QAAQ,QAIlB,SAASiZ,KAEpB,IAAM/X,EAAU9B,KAChB,EAA0BH,IAAMoC,SAAS,GAAzC,mBAAOkN,EAAP,KAAc2K,EAAd,KAMA,OACI,eAAC,IAAMrW,SAAP,UACI,gBAAC2R,GAAA,EAAD,CAAKjR,UAAWrC,EAAQsJ,KAAxB,UACI,eAACwD,EAAA,EAAD,CAAYhJ,QAAQ,KAAKzB,UAAWrC,EAAQ6X,SAA5C,8BACA,gBAACI,GAAA,EAAD,CACIxW,MAAO4L,EACPpI,SAVU,SAAC7D,EAAOiM,GAC9B2K,EAAS3K,IAUG6K,eAAe,UACfC,UAAU,UACVhT,MAAO,CAAEvG,SAAU,QALvB,UAOI,eAACwZ,GAAA,EAAD,CAAKtT,MAAM,YACX,eAACsT,GAAA,EAAD,CAAKtT,MAAM,gBAGf,eAACqH,EAAA,EAAD,IAEY,IAAVkB,GAAiB,gBAACiG,GAAA,EAAD,CAAKjG,MAAO,EAAGhL,UAAWrC,EAAQ8X,MAAO3S,MAAO,CAAE7G,QAAS,QAA3D,UACf,eAACgG,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,SACI,eAACoT,GAAD,MAEJ,sBAAKxS,MAAO,CAAEC,SAAU,QAEhB,IAAViI,GAAiB,gBAACiG,GAAA,EAAD,CAAKjG,MAAO,EAAGlI,MAAO,CAAE7G,QAAS,QAAjC,UACf,eAACgG,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,SACI,eAACgT,GAAD,MAEJ,sBAAKpS,MAAO,CAAEC,SAAU,aCnD5C,IAAMlH,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkL,KAAK,aACDhL,QAAS,QACRF,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B5K,OAAQT,EAAMU,QAAQ,KAG9B0Q,aAAc,CACVA,aAAcpR,EAAMU,QAAQ,QAwBrBuZ,OApBf,WACI,IAAQtN,EAAchN,IAAMmC,WAAWpC,IAA/BiN,UACF/K,EAAU9B,KAKhB,OACI,eAAC,IAAMyD,SAAP,UACI,eAAC2R,GAAA,EAAD,CAAKjR,UAAWrC,EAAQsJ,KAAxB,SACI,gBAAChF,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,UACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,KAAKzB,UAAWrC,EAAQwP,aAA5C,kBACA,eAAC,GAAD,CAAUzE,UAAWA,EAAWiI,IAAI,yBCxBlD9U,GAAYC,cAAW,SAACC,GAAD,MAAY,CACrCkL,KAAK,aACDhL,QAAS,QACRF,EAAMoL,YAAYC,GAAG,MAAQ,CAC1B5K,OAAQT,EAAMU,QAAQ,KAG9B0Q,aAAc,CACVA,aAAcpR,EAAMU,QAAQ,QAwBrBwZ,OApBf,WACI,IAAQvN,EAAchN,IAAMmC,WAAWpC,IAA/BiN,UACF/K,EAAU9B,KAKhB,OACI,eAAC,IAAMyD,SAAP,UACI,eAAC2R,GAAA,EAAD,CAAKjR,UAAWrC,EAAQsJ,KAAxB,SACI,gBAAChF,EAAA,EAAD,CAAW3F,SAAS,KAAK4F,gBAAc,EAAvC,UACI,eAACuI,EAAA,EAAD,CAAYhJ,QAAQ,KAAKzB,UAAWrC,EAAQwP,aAA5C,sBACA,eAAC,GAAD,CAAUzE,UAAWA,EAAWiI,IAAI,6BCUzCuF,OAvCf,WACC,IAAQvP,EAAWyN,cAAXzN,OACR,EAAwBjL,IAAMoC,WAA9B,mBAAOoQ,EAAP,KAAaC,EAAb,KACA,EAA0BzS,IAAMoC,SAAS,cAAzC,mBAAOsB,EAAP,KAAc+W,EAAd,KAEQzX,EAAoBC,eAApBD,gBAyBR,OAvBAhD,IAAMJ,WAAU,WACf0F,MAAM,GAAD,OAAI9F,UAAJ,8BAAgCyL,GAAU,CAC9C1F,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAA4F,GACDA,EAAIxF,QACP2M,EAAQnH,EAAIkH,OAEZC,IACAgI,EAAS,sDACTzX,EAAgBsI,EAAIpF,QAAS,CAAEH,QAAS,cAGzCI,OAAM,SAACC,GACPqM,IACAgI,EAAS,sBACTzX,EAAgB,qBAAsB,CAAE+C,QAAS,UACjDM,QAAQD,MAAM,SAAUA,QAExB,CAAC6E,EAAQjI,IAGX,qCACEwP,EAAQ,eAACL,GAAD,CAAUK,KAAMA,EAAMY,aAAa,EAAMc,QAAQ,IACvD,eAACnF,EAAA,EAAD,CAAYhJ,QAAQ,YAAY/B,MAAM,UAAtC,SAAiDN,O,SCpBjDuT,GAAUyD,aAAqB,CAAEC,SAAU,oBAE3CC,GAAc,SAAC5N,EAAW8G,GAC9B,OAAQA,EAAO9N,MACb,IAAK,QACH,OAAO,2BACFgH,GADL,IAEEe,iBAAiB,EACjBqD,OAAQ0C,EAAOqC,QAAQ/E,OACvBpD,SAAU8F,EAAOqC,QAAQnI,WAE7B,IAAK,SACH,OAAO,2BACFhB,GADL,IAEEe,iBAAiB,EACjBqD,OAAQ,KACRpD,SAAU,OAEd,IAAK,UACH,OAAO,2BACFhB,GADL,IAEEsI,aAActI,EAAUsI,cAE5B,IAAK,UACH,OAAO,2BACFtI,GADL,IAEEiB,aAAcjB,EAAUiB,cAE5B,QACE,OAAOjB,IA0CE6N,OArCf,SAAajO,GACX,IAAMkO,EAAelO,EAAMkO,aAC3B,EAAkC9a,IAAM+a,WAAWH,GAAaE,GAAhE,mBAAO9N,EAAP,KAAkB9K,EAAlB,KAEA,OACE,eAAC,IAAM0B,SAAP,UACE,eAAC,IAAD,CAAQ+W,SAAS,wBAAwB1D,QAASA,GAAlD,SACE,gBAAC,KAAD,CACE3M,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdwQ,SAAU,EALZ,UAOE,eAAC,GAAYnK,SAAb,CAAsBnN,MAAO,CAAEsJ,YAAW9K,gBAA1C,SACE,eAAC,GAAD,UACE,gBAAC,IAAD,WACE,eAAC,GAAD,CAAc+Y,OAAK,EAACC,KAAK,IAAI1T,UAAWgO,KACxC,eAAC,GAAD,CAAayF,OAAK,EAACC,KAAK,SAAS1T,UAAWkO,KAC5C,eAAC,GAAD,CAAauF,OAAK,EAACC,KAAK,cAAc1T,UAAW+R,KACjD,eAAC,GAAD,CAAa0B,OAAK,EAACC,KAAK,YAAY1T,UAAWsP,KAC/C,eAAC,GAAD,CAAcmE,OAAK,EAACC,KAAK,YAAY1T,UAAWwS,KAChD,eAAC,GAAD,CAAciB,OAAK,EAACC,KAAK,QAAQ1T,UAAW8S,KAC5C,eAAC,GAAD,CAAcW,OAAK,EAACC,KAAK,YAAY1T,UAAW2T,KAChD,eAAC,GAAD,CAAcF,OAAK,EAACC,KAAK,iBAAiB1T,UAAWgT,KACrD,eAAC,GAAD,CAAcS,OAAK,EAACC,KAAK,mBAAmB1T,UAAWiR,KACvD,eAAC,IAAD,CAAOjR,UAAW8R,YAIxB,eAAC7Z,EAAD,YCnBK2b,GA5Df,kDAEI,WAAYxO,GAAQ,IAAD,8BACf,cAAMA,IACDoE,MAAQ,CACT8J,aAAc,MAHH,EAFvB,qDASI,WAAqB,IAAD,OAChBxV,MAAM,GAAD,OAAI9F,UAAJ,UAAoB,CACrB+F,OAAQ,MACRC,YAAa,YAEZE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACEA,EAAKC,QACL,EAAKuL,SAAS,CACVyJ,aAAc,CACV/M,iBAAiB,EACjBqD,OAAQvL,EAAKuL,OACbpD,SAAUnI,EAAKmI,SACfsH,aAAa,EACbrH,aAAa,KAIrB,EAAKoD,SAAS,CACVyJ,aAAc,CACV/M,iBAAiB,EACjBqD,OAAQ,KACRpD,SAAU,KACVsH,aAAa,EACbrH,aAAa,QAK5B9H,OAAM,SAACC,GACJ,EAAKiL,SAAS,CACVyJ,aAAc,CACV/M,iBAAiB,EACjBqD,OAAQ,KACRpD,SAAU,KACVC,aAAa,EACbqH,aAAa,UA7CrC,oBAmDI,WACI,OACIpE,KAAKF,MAAM8J,aACP,eAAC,GAAD,CAAKA,aAAc5J,KAAKF,MAAM8J,eAC9B,gDAvDhB,GAAsCnJ,aCOlBjH,QACW,cAA7B7K,OAAOsN,SAASkO,UAEe,UAA7Bxb,OAAOsN,SAASkO,UAEhBxb,OAAOsN,SAASkO,SAASC,MAAM,2DCVnCC,IAASnC,OAEP,eAAC,GAAD,IACE/L,SAASmO,eAAe,SDqHtB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBjW,MAAK,SAACkW,GACLA,EAAaC,gBAEd1V,OAAM,SAACC,GACNC,QAAQD,MAAMA,EAAMF,a,iBErI5B,IAAM4V,EAAc,IAAIC,OAAO,wEACzBC,EAAa,IAAID,OAAO,0EACxBE,EAAiB,IAAIF,OAAO,8BAC5BG,EAAiB,IAAIH,OAAO,eAiBlCzc,EAAOC,QAAU,CACbwW,cAhBkB,SAACJ,GACnB,OAAOmG,EAAYK,KAAKxG,IAgBxBK,iBAdqB,SAACJ,GACtB,OAAOoG,EAAWG,KAAKvG,IAcvBuB,iBAXqB,SAACnJ,GACtB,OAAOiO,EAAeE,KAAKnO,IAW3BrK,iBARqB,SAAChB,GACtB,OAAOuZ,EAAeC,KAAKxZ,O","file":"static/js/main.686deba9.chunk.js","sourcesContent":["const SERVER = 'http://127.0.0.1:5000';\r\n// const SERVER = 'http://192.168.42.150:5000';\r\n\r\nmodule.exports = {\r\n    SERVER\r\n}","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function ScrollToTop() {\r\n    const { pathname } = useLocation();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [pathname]);\r\n\r\n    return null;\r\n}","import React from \"react\";\r\nconst AuthContext = React.createContext();\r\nexport default AuthContext;","import React from \"react\";\r\nconst UserContext = React.createContext();\r\nexport default UserContext;","import React from 'react'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {\r\n    Tooltip,\r\n    IconButton,\r\n    Modal,\r\n    Fade,\r\n    Backdrop,\r\n    Card,\r\n    CardActionArea,\r\n    // CardMedia,\r\n    CardContent,\r\n    CardActions,\r\n    Button,\r\n    CircularProgress,\r\n    TextField,\r\n    // Divider,\r\n    Container,\r\n} from '@material-ui/core';\r\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useSnackbar } from 'notistack'\r\nimport { validatePostText } from \"../utils/validator\";\r\nimport AuthContext from '../utils/AuthContext';\r\nimport { SERVER } from '../config'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    modal: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    cardRoot: {\r\n        width: '100%',\r\n        maxWidth: 600,\r\n        overflow: 'auto',\r\n        margin: theme.spacing(2),\r\n        position: 'relative',\r\n        outline: 'none',\r\n    },\r\n    media: {\r\n        minHeight: 60,\r\n        maxHeight: 250,\r\n    },\r\n    image: {\r\n        maxHeight: 250,\r\n        maxWidth: '100%',\r\n    },\r\n    imageWrapper: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    closeBtn: {\r\n        position: 'absolute',\r\n        right: theme.spacing(.5),\r\n        top: theme.spacing(.5),\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    btnWrapper: {\r\n        position: 'relative',\r\n    },\r\n    input: {\r\n        display: 'none',\r\n    }\r\n}));\r\n\r\nvar image = null;\r\n\r\nexport default function NewPost() {\r\n    const classes = useStyles();\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n    const [open, setOpen] = React.useState(false);\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        submit: false,\r\n    });\r\n    const [values, setValues] = React.useState({\r\n        preview: '',\r\n        postText: '',\r\n    });\r\n\r\n    const [errors, setErrors] = React.useState({\r\n        postText: false\r\n    })\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleCreatePost = (e) => {\r\n        e.preventDefault();\r\n        setDisableBtn({ submit: true });\r\n        if (validatePostText(values.postText)) {\r\n            const formData = new FormData();\r\n            if (image)\r\n                formData.append('image', image);\r\n\r\n            formData.append('postText', values.postText);\r\n            fetch(`${SERVER}/posts/create`, {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                body: formData,\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        enqueueSnackbar('Post Created!', { variant: \"success\" });\r\n                        setValues({ image: '', postText: '' });\r\n                        setOpen(false);\r\n                        authDispatch({\r\n                            type: 'REFPOST'\r\n                        })\r\n                    } else {\r\n                        if (data.status === 401)\r\n                            authDispatch({\r\n                                type: \"LOGOUT\"\r\n                            })\r\n                        enqueueSnackbar(data.message, { variant: \"error\" });\r\n                    }\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Post Creation Failed', { variant: 'error' });\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            setDisableBtn({ submit: false });\r\n            enqueueSnackbar('Post text must be 10-255 characters long', { variant: 'warning' });\r\n        }\r\n    }\r\n\r\n    const handleInputChange = (prop) => (event) => {\r\n        if (prop === 'image') {\r\n            image = event.target.files[0];\r\n            setValues({ ...values, preview: URL.createObjectURL(event.target.files[0]) });\r\n        } else {\r\n            setValues({ ...values, [prop]: event.target.value });\r\n            setErrors({ postText: !validatePostText(event.target.value) })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Tooltip title=\"New Post\">\r\n                <IconButton color=\"inherit\" aria-label=\"add new post\" onClick={handleOpen} >\r\n                    <AddIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Modal\r\n                aria-labelledby=\"transition-modal-title\"\r\n                aria-describedby=\"transition-modal-description\"\r\n                className={classes.modal}\r\n                open={open}\r\n                onClose={handleClose}\r\n                closeAfterTransition\r\n                BackdropComponent={Backdrop}\r\n                BackdropProps={{\r\n                    timeout: 500,\r\n                }}\r\n            >\r\n                <Fade in={open}>\r\n                    <Card className={classes.cardRoot}>\r\n                        <form onSubmit={handleCreatePost}>\r\n                            <CardActionArea className={classes.media}>\r\n                                <Container disableGutters className={classes.imageWrapper}>\r\n                                    {/*<CardMedia\r\n                                    className={classes.media}\r\n                                    image='${SERVER}/images/profile/profile-ankit.jpg'\r\n                                    title=\"Contemplative Reptile\"\r\n                                />*/}\r\n                                    <div></div>{/*this is because a container must hava a child */}\r\n                                    {values.preview && <img src={values.preview} alt=\"Post\" className={classes.image} />}\r\n                                </Container>\r\n                            </CardActionArea>\r\n                            <CardContent>\r\n                                <TextField\r\n                                    fullWidth\r\n                                    id=\"postText\"\r\n                                    label=\"Whats Happening?\"\r\n                                    multiline\r\n                                    rows={4}\r\n                                    value={values.postText}\r\n                                    onChange={handleInputChange('postText')}\r\n                                    error={errors.postText}\r\n                                />\r\n                            </CardContent>\r\n                            {/*<Divider />*/}\r\n                            <CardActions>\r\n                                <div style={{ flexGrow: 1 }}>\r\n                                    <input\r\n                                        accept=\"image/*\"\r\n                                        className={classes.input}\r\n                                        id=\"postImage\"\r\n                                        type=\"file\"\r\n                                        onChange={handleInputChange('image')} />\r\n                                    <label htmlFor=\"postImage\">\r\n                                        <Tooltip title=\"Add post image\" component=\"span\">\r\n                                            <IconButton aria-label=\"Add post image\" color='primary'>\r\n                                                <CameraAltIcon />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </label>\r\n                                </div>\r\n                                <Button variant=\"contained\" disableElevation onClick={handleClose}>\r\n                                    Close\r\n                                    </Button>\r\n                                <div className={classes.btnWrapper}>\r\n                                    <Button variant=\"contained\" color=\"primary\" type='submit' disableElevation disabled={disableBtn.submit}>\r\n                                        Create Post\r\n                                    </Button>\r\n                                    {disableBtn.submit && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                                </div>\r\n                            </CardActions>\r\n                        </form>\r\n                        <CardActions className={classes.closeBtn}>\r\n                            <Tooltip title=\"Close\">\r\n                                <IconButton aria-label=\"Close Modal\" onClick={handleClose}>\r\n                                    <CloseIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </CardActions>\r\n                    </Card>\r\n                </Fade>\r\n            </Modal>\r\n        </React.Fragment>\r\n    );\r\n\r\n}\r\n\r\n","export default function formateDate(date, nowDate = Date.now(), rft = new Intl.RelativeTimeFormat(undefined, { numeric: \"auto\" })) {\r\n    const SECOND = 1000;\r\n    const MINUTE = 60 * SECOND;\r\n    const HOUR = 60 * MINUTE;\r\n    const DAY = 24 * HOUR;\r\n    const WEEK = 7 * DAY;\r\n    const MONTH = 30 * DAY;\r\n    const YEAR = 365 * DAY;\r\n    const intervals = [\r\n        { ge: YEAR, divisor: YEAR, unit: 'year' },\r\n        { ge: MONTH, divisor: MONTH, unit: 'month' },\r\n        { ge: WEEK, divisor: WEEK, unit: 'week' },\r\n        { ge: DAY, divisor: DAY, unit: 'day' },\r\n        { ge: HOUR, divisor: HOUR, unit: 'hour' },\r\n        { ge: MINUTE, divisor: MINUTE, unit: 'minute' },\r\n        { ge: 30 * SECOND, divisor: SECOND, unit: 'seconds' },\r\n        { ge: 0, divisor: 1, text: 'just now' },\r\n    ];\r\n    const now = typeof nowDate === 'object' ? nowDate.getTime() : new Date(nowDate).getTime();\r\n    const diff = now - (typeof date === 'object' ? date : new Date(date)).getTime();\r\n    const diffAbs = Math.abs(diff);\r\n    for (const interval of intervals) {\r\n        if (diffAbs >= interval.ge) {\r\n            const x = Math.round(Math.abs(diff) / interval.divisor);\r\n            const isFuture = diff < 0;\r\n            return interval.unit ? rft.format(isFuture ? x : -x, interval.unit) : interval.text;\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\r\nimport {\r\n\tTooltip,\r\n\tIconButton,\r\n\tMenu,\r\n\tMenuItem,\r\n\tCircularProgress\r\n} from '@material-ui/core';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useSnackbar } from 'notistack';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SERVER } from '../config';\r\nimport formateDate from '../utils/FormatDate';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tprogressbar: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: '50%',\r\n\t\tleft: '50%',\r\n\t\tmarginTop: -15,\r\n\t\tmarginLeft: -15,\r\n\t},\r\n}));\r\n\r\nfunction Notification() {\r\n\tconst classes = useStyles();\r\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\r\n\tconst [notifications, setNotifications] = React.useState();\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\r\n\tconst getNotifications = () => {\r\n\t\tfetch(`${SERVER}/users/notifications`, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\tcredentials: 'include',\r\n\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tsetNotifications(res.notifications);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tenqueueSnackbar(res.message, { variant: \"error\" });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tenqueueSnackbar('Failed to get notifications', { variant: \"error\" });\r\n\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tconst handleMenuOpen = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t\tgetNotifications()\r\n\t};\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst renderNotifications = (\r\n\t\tnotifications ? <Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: 'left' }}\r\n\t\t\tid=\"account-menu\"\r\n\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n\t\t\topen={Boolean(anchorEl)}\r\n\t\t\tonClose={handleMenuClose}\r\n\t\t>\r\n\t\t\t{/*<MenuItem>Hi {authState.username}!</MenuItem>*/}\r\n\t\t\t{notifications.length > 0 ? notifications.map((notification) => {\r\n\t\t\t\treturn (<MenuItem\r\n\t\t\t\t\tonClick={handleMenuClose}\r\n\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\tto={`/posts/${notification.postId}`}>\r\n\t\t\t\t\t{`${notification.message} ${formateDate(notification.createdAt)}`}\r\n\t\t\t\t</MenuItem>)\r\n\t\t\t})\r\n\t\t\t\t: <MenuItem onClick={handleMenuClose}>You have no notifications yet</MenuItem>\r\n\t\t\t}\r\n\t\t</Menu>\r\n\t\t\t: (\r\n\t\t\t\t<Menu\r\n\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: 'left' }}\r\n\t\t\t\t\tid=\"account-menu\"\r\n\t\t\t\t\tkeepMounted\r\n\t\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n\t\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t\t>\r\n\t\t\t\t\t<MenuItem>\r\n\t\t\t\t\t\t<div style={{ minWidth: 300, minHeight: 100 }}>\r\n\t\t\t\t\t\t\t<CircularProgress className={classes.progressbar} size={30} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t</Menu>\r\n\t\t\t)\r\n\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip title=\"Notifications\">\r\n\t\t\t\t<IconButton aria-label=\"Notifications\" color=\"inherit\" onClick={handleMenuOpen}>\r\n\t\t\t\t\t<NotificationsNoneIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t{renderNotifications}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Notification;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link as RouterLink, useLocation } from 'react-router-dom'\r\nimport {\r\n    AppBar,\r\n    CssBaseline,\r\n    Divider,\r\n    Drawer,\r\n    Hidden,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    Toolbar,\r\n    Typography,\r\n    Button,\r\n    ThemeProvider,\r\n    Container,\r\n    Menu,\r\n    MenuItem,\r\n    Avatar,\r\n    Tooltip,\r\n} from '@material-ui/core';\r\nimport { zhCN } from '@material-ui/core/locale';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport RssFeedIcon from '@material-ui/icons/RssFeed';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\r\n// import SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n// import CollectionsIcon from '@material-ui/icons/Collections';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport { makeStyles, useTheme, createMuiTheme } from '@material-ui/core/styles';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from \"../utils/AuthContext\";\r\nimport UserContext from '../utils/UserContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport NewPost from './NewPost';\r\nimport Notification from './Notification';\r\nimport { SERVER } from '../config'\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    drawer: {\r\n        [theme.breakpoints.up('md')]: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n    },\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n    // necessary for content to be below app bar\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        paddingTop: theme.spacing(3),\r\n    },\r\n    //added by me\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    mrLeft: {\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    title: {\r\n        textDecoration: 'none',\r\n    },\r\n    justCenter: {\r\n        justifyContent: 'center',\r\n    },\r\n    avatar: {\r\n        width: theme.spacing(10),\r\n        height: theme.spacing(10),\r\n    }\r\n}));\r\n\r\nfunction Navigation(props) {\r\n    const { window } = props;\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [mobileOpen, setMobileOpen] = React.useState(false);\r\n    const { authState, authDispatch } = React.useContext(AuthContext);\r\n    const [user, setUser] = React.useState(null);\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    // const [locale, setLocale] = React.useState('zhCN')\r\n    const location = useLocation();\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n\r\n    // theme\r\n    const light = {\r\n        palette: {\r\n            type: 'light',\r\n        },\r\n    }\r\n    const dark = {\r\n        palette: {\r\n            type: 'dark',\r\n        },\r\n    }\r\n    const [myTheme, setTheme] = React.useState(true);\r\n    const appliedTheme = createMuiTheme((myTheme ? light : dark), zhCN);\r\n\r\n    const icon = !myTheme ? <Brightness7Icon /> : <Brightness4Icon />\r\n\r\n    const handleThemeChange = () => {\r\n        setTheme(!myTheme);\r\n    }\r\n\r\n    const handleProfileMenuOpen = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    // profile menu close\r\n    const handleMenuClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    const handleDrawerHide = () => {\r\n        if (mobileOpen) {\r\n            setMobileOpen(!mobileOpen);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (authState.isAuthenticated) {\r\n            fetch(`${SERVER}/users/username/${authState.username}`, {\r\n                method: 'GET',\r\n                credentials: 'include'\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        setUser(data)\r\n                    } else {\r\n                        if (data.status === 401)\r\n                            authDispatch({\r\n                                type: \"LOGOUT\"\r\n                            })\r\n                        setUser(null)\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    setUser(null)\r\n                });\r\n        }\r\n    }, [authState, authState.refreshUser, authDispatch])\r\n\r\n    const handleLogout = () => {\r\n        fetch(`${SERVER}/auth/logout`, {\r\n            method: 'DELETE',\r\n            credentials: 'include'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    const variant = 'success';\r\n                    enqueueSnackbar('Logout successfully!', { variant });\r\n                    authDispatch({ type: 'LOGOUT' });\r\n                } else {\r\n                    const variant = 'error';\r\n                    enqueueSnackbar('Logout failed!', { variant });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                const variant = 'error';\r\n                enqueueSnackbar('Logout failed!', { variant });\r\n            });\r\n    }\r\n\r\n    const drawer = (\r\n        <div>\r\n            <div className={classes.toolbar} >\r\n                <ListItem>\r\n                    <div className={classes.grow}></div>\r\n                    <IconButton aria-label=\"Close Drawer\" color=\"inherit\" onClick={handleDrawerToggle}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </ListItem>\r\n            </div>\r\n            <Divider />\r\n            {user && <Hidden smDown implementation=\"css\">\r\n                <List className={classes.userInfo}>\r\n                    <ListItem className={classes.justCenter}>\r\n                        <IconButton component={RouterLink} to={`/users/${user.login}`} area-label='view' style={{ padding: 0 }}>\r\n                            <Avatar\r\n                                className={classes.avatar}\r\n                                src={user.avatar ? `${SERVER}${user.avatar}` : \"\"}\r\n                                alt={`${user.login}'s avatar`}>\r\n                            </Avatar>\r\n                        </IconButton>\r\n                    </ListItem>\r\n                    <ListItem className={classes.justCenter} dense>\r\n                        <Typography\r\n                            variant=\"h6\"\r\n                            component={RouterLink}\r\n                            to={`/users/${user.login}`}\r\n                            color=\"inherit\"\r\n                            style={{ textDecoration: \"none\" }}\r\n                        >{user.login}</Typography>\r\n                    </ListItem>\r\n                    <ListItem className={classes.justCenter} dense>\r\n                        <List style={{ display: 'flex' }} disablePadding>\r\n                            <ListItem style={{ display: 'flex', flexDirection: \"column\" }} dense>\r\n                                <Typography variant='body1'>Posts</Typography>\r\n                                <Typography variant=\"h6\">{user.posts}</Typography>\r\n                            </ListItem>\r\n                            <ListItem style={{ display: 'flex', flexDirection: \"column\" }} dense>\r\n                                <Typography variant='body1'>Followers</Typography>\r\n                                <Typography variant=\"h6\">{user.followers}</Typography>\r\n                            </ListItem>\r\n                            <ListItem style={{ display: 'flex', flexDirection: \"column\" }} dense>\r\n                                <Typography variant='body1'>Following</Typography>\r\n                                <Typography variant=\"h6\">{user.following}</Typography>\r\n                            </ListItem>\r\n                        </List>\r\n                    </ListItem>\r\n                </List>\r\n            </Hidden>}\r\n            <Divider />\r\n            <List>\r\n                {[\r\n                    { name: \"Home\", icon: <HomeIcon />, index: 1, to: '/' },\r\n                    { name: \"Feed\", icon: <RssFeedIcon />, index: 2, to: \"/feed\" },\r\n                    { name: \"Trending\", icon: <WhatshotIcon />, index: 3, to: \"/trending\" },\r\n                    // { name: \"Explore\", icon: <SearchIcon />, index: 4, to: \"/explore\" },\r\n                    // { name: \"New\", icon: <CollectionsIcon />, index: 4, to: \"/new\" },\r\n                    { name: \"Settings\", icon: <SettingsIcon />, index: 5, to: \"/settings\" },\r\n                    { name: \"My Profile\", icon: <PersonIcon />, index: 6, to: `/users/${authState.username}` }\r\n                ].map((item, index) => (\r\n                    <ListItem button\r\n                        key={item.index}\r\n                        selected={location.pathname === item.to}\r\n                        component={RouterLink}\r\n                        to={item.to}\r\n                        onClick={handleDrawerHide}>\r\n                        <ListItemIcon>{item.icon}</ListItemIcon>\r\n                        <ListItemText primary={item.name} />\r\n                    </ListItem>\r\n                ))}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                <ListItem button onClick={() => { handleDrawerHide(); handleLogout(); }}>\r\n                    <ListItemIcon><ExitToAppIcon /></ListItemIcon>\r\n                    <ListItemText primary=\"Logout\" />\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{ vertical: \"top\", horizontal: 'left' }}\r\n            id=\"account-menu\"\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={Boolean(anchorEl)}\r\n            onClose={handleMenuClose}\r\n        >\r\n            {/*<MenuItem>Hi {authState.username}!</MenuItem>*/}\r\n            <MenuItem onClick={handleMenuClose} component={RouterLink} to='/settings'>Account Settings</MenuItem>\r\n            <MenuItem onClick={handleMenuClose} component={RouterLink} to={`/users/${authState.username}`} >Profile</MenuItem>\r\n            <MenuItem onClick={() => { handleMenuClose(); handleLogout(); }}>Logout</MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={appliedTheme}>\r\n            <div className={classes.root}>\r\n                <CssBaseline />\r\n                <AppBar position=\"fixed\" className={classes.appBar}>\r\n                    <Toolbar>\r\n                        {authState.isAuthenticated ? (\r\n                            <IconButton\r\n                                color=\"inherit\"\r\n                                aria-label=\"open drawer\"\r\n                                edge=\"start\"\r\n                                onClick={handleDrawerToggle}\r\n                                className={classes.menuButton}\r\n                            >\r\n                                <MenuIcon />\r\n                            </IconButton>\r\n                        ) : \"\"}\r\n                        <Typography variant=\"h6\" noWrap className={classes.title} component={RouterLink} to=\"/\" color=\"inherit\">\r\n                            LinkBook\r\n                        </Typography>\r\n                        <div className={classes.grow}></div>\r\n                        {authState.isAuthenticated && <NewPost />}\r\n                        <Tooltip title=\"Theme Toggle\">\r\n                            <IconButton aria-label=\"Theme toggle\" onClick={handleThemeChange} color=\"inherit\">\r\n                                {icon}\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        {authState.isAuthenticated ? (\r\n                            <React.Fragment>\r\n                                <Notification />\r\n                                <Tooltip title=\"Account\">\r\n                                    <IconButton\r\n                                        aria-label=\"Current User\"\r\n                                        color=\"inherit\"\r\n                                        edge=\"end\"\r\n                                        aria-controls=\"account-menu\"\r\n                                        aria-haspopup=\"true\"\r\n                                        onClick={handleProfileMenuOpen}\r\n                                    >\r\n                                        <AccountCircle />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n\r\n                            </React.Fragment>\r\n                        ) : (\r\n                            <React.Fragment>\r\n                                <Button color=\"inherit\" component={Link} to=\"/login\" className={classes.mrLeft}>Login</Button>\r\n                                <Button color=\"inherit\" component={Link} to=\"/register\" className={classes.mrLeft}>Register</Button>\r\n                            </React.Fragment>\r\n                        )}\r\n                    </Toolbar>\r\n                </AppBar>\r\n                {renderMenu}\r\n                {authState.isAuthenticated ? (\r\n                    <nav className={classes.drawer} aria-label=\"Drawer\">\r\n                        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n                        <Hidden mdUp implementation=\"css\">\r\n                            <Drawer\r\n                                container={container}\r\n                                variant=\"temporary\"\r\n                                anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n                                open={mobileOpen}\r\n                                onClose={handleDrawerToggle}\r\n                                classes={{\r\n                                    paper: classes.drawerPaper,\r\n                                }}\r\n                                ModalProps={{\r\n                                    keepMounted: true, // Better open performance on mobile.\r\n                                }}\r\n                            >\r\n                                {drawer}\r\n                            </Drawer>\r\n                        </Hidden>\r\n                        <Hidden smDown implementation=\"css\">\r\n                            <Drawer\r\n                                classes={{\r\n                                    paper: classes.drawerPaper,\r\n                                }}\r\n                                variant=\"permanent\"\r\n                                open\r\n                            >\r\n                                {drawer}\r\n                            </Drawer>\r\n                        </Hidden>\r\n                    </nav>)\r\n                    : \"\"\r\n                }\r\n                <main className={classes.content}>\r\n                    <div className={classes.toolbar} />\r\n                    <Container maxWidth=\"xl\">\r\n                        <UserContext.Provider value={user}>\r\n                            {props.children}\r\n                        </UserContext.Provider>\r\n                    </Container>\r\n\r\n                </main>\r\n            </div>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n\r\nNavigation.propTypes = {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window: PropTypes.func,\r\n};\r\n\r\nexport default Navigation;","import { Avatar, CardContent, IconButton, Typography } from '@material-ui/core'\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport React, { Component } from 'react'\r\nimport formateDate from '../utils/FormatDate';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { SERVER } from '../config'\r\n\r\nexport class Comment extends Component {\r\n    state = {\r\n        user: null,\r\n        isLoading: true\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${SERVER}/users/avatar?userId=${this.props.comment.userId}`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                if (res.success) {\r\n                    this.setState({ user: res, isLoading: false });\r\n                } else {\r\n                    this.setState({ user: { login: null, avatar: null, userId: this.props.comment.userID }, isLoading: false });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.setState({ user: { login: null, avatar: null, userId: this.props.comment.userID }, isLoading: false });\r\n            });\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <CardContent style={{ display: 'flex' }}>\r\n                    {!this.state.isLoading ? (<IconButton\r\n                        component={RouterLink}\r\n                        to={`/users/${this.state.user.login}`}\r\n                        aria-label=\"user profile\"\r\n                        style={{ padding: 0, height: 'max-content' }}>\r\n                        <Avatar\r\n                            aria-label=\"user avatar\"\r\n                            src={this.state.user.avatar ? `${SERVER}${this.state.user.avatar}` : \"\"}>\r\n                        </Avatar>\r\n                    </IconButton>)\r\n                        : (<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />)\r\n                    }\r\n                    <div style={{ marginLeft: 16, flexGrow: 1 }} >\r\n                        {!this.state.isLoading ? (<Typography component=\"p\">\r\n                            <Typography\r\n                                variant='subtitle2'\r\n                                component={RouterLink}\r\n                                to={`/users/${this.state.user.login}`}\r\n                                color=\"inherit\"\r\n                                style={{ textDecoration: \"none\" }}\r\n                            >\r\n                                {this.state.user.login}\r\n                            </Typography>\r\n                            <Typography\r\n                                component='span'\r\n                                variant='caption'\r\n                                style={{ marginLeft: 8 }}>\r\n                                {formateDate(this.props.comment.created_at)}\r\n                            </Typography>\r\n                        </Typography>)\r\n                            : (<Skeleton animation=\"wave\" height={10} width=\"40%\" style={{ marginBottom: 18 }} />)\r\n                        }\r\n                        {!this.state.isLoading ? (<Typography component=\"p\" variant='body2' style={{ marginTop: 8 }}>\r\n                            {this.props.comment.value}\r\n                        </Typography>)\r\n                            : (<Skeleton animation=\"wave\" height={10} width=\"80%\" style={{ marginBottom: 12 }} />)\r\n                        }\r\n                    </div>\r\n                </CardContent>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Comment\r\n","import {\r\n    Avatar,\r\n    Card,\r\n    CardHeader,\r\n    CardMedia,\r\n    IconButton,\r\n    Typography,\r\n    CardContent,\r\n    CardActions,\r\n    Tooltip,\r\n    Collapse,\r\n    Divider,\r\n    TextField,\r\n    CircularProgress,\r\n    Menu,\r\n    MenuItem,\r\n} from '@material-ui/core';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ThumbUpAltOutlinedIcon from '@material-ui/icons/ThumbUpAltOutlined';\r\n// import ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\r\nimport CommentOutlinedIcon from '@material-ui/icons/CommentOutlined';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Comment from '../components/Comment';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport UserContext from '../utils/UserContext';\r\nimport { SERVER } from \"../config\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card: {\r\n        borderRadius: 10,\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    cardContent: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n    },\r\n    marginLeft: {\r\n        marginLeft: theme.spacing(2)\r\n    },\r\n    commentForm: {\r\n        display: 'flex',\r\n        alignItems: \"center\",\r\n    },\r\n    commentAvatar: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -4,\r\n        marginLeft: -12,\r\n    },\r\n    noPadding: {\r\n        padding: 0,\r\n    },\r\n    media: {\r\n        paddingTop: '56.25%',\r\n    },\r\n}));\r\n\r\nexport default function PostCard(props) {\r\n    const classes = useStyles();\r\n    const [hide, setHide] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(true);\r\n\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n    const [post, setPost] = React.useState(props.post);\r\n    const [values, setValues] = React.useState({\r\n        comment: ''\r\n    });\r\n    const [liked, setLiked] = React.useState()\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const user = React.useContext(UserContext);\r\n\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        comment: false,\r\n        delete: false,\r\n    });\r\n    const [expanded, setExpanded] = React.useState(false);\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const date = new Date(post.created_at);\r\n    const t = date.toDateString().split(\" \");\r\n\r\n    const handlePostMenuOpen = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleMenuClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleDeletePost = () => {\r\n        const data = { postId: post.postId };\r\n        if (window.confirm('Are you sure you want to delete post?')) {\r\n            fetch(`${SERVER}/posts/delete`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(data),\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        enqueueSnackbar('Post Deleted!', { variant: \"success\" });\r\n                        authDispatch({\r\n                            type: 'REFUSER',\r\n                        });\r\n                        setHide(true);\r\n                    } else {\r\n                        enqueueSnackbar(data.message, { variant: \"error\" });\r\n                        setDisableBtn({\r\n                            delete: false\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Post deletion failed!', { variant: \"error\" });\r\n                    setDisableBtn({\r\n                        delete: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        }\r\n    }\r\n\r\n    const isMenuOpen = Boolean(anchorEl)\r\n    const menuId = `post-${post.postId}-menu`;\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'left' }}\r\n            id={menuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={isMenuOpen}\r\n            onClose={handleMenuClose}\r\n        >\r\n            {/*<MenuItem>Hi {authState.username}!</MenuItem>*/}\r\n            <MenuItem onClick={handleMenuClose} disabled>Save Post</MenuItem>\r\n            <MenuItem onClick={handleMenuClose} disabled>Report post</MenuItem>\r\n            {!loading && props.notSkeleton && post.owner && user.userId === post.owner.userId && (<div>\r\n                {/*<Divider />*/}\r\n                <MenuItem onClick={() => { handleMenuClose(); handleDeletePost(); }} >\r\n                    <Typography color='secondary'>Delete post</Typography>\r\n                </MenuItem>\r\n            </div>)}\r\n        </Menu>\r\n    );\r\n\r\n    const handleExpandClick = () => {\r\n        setExpanded(!expanded);\r\n    };\r\n    const handleChange = (event) => {\r\n        setValues({ ...values, comment: event.target.value });\r\n    }\r\n\r\n    const handleSubmitNewComment = (e) => {\r\n        e.preventDefault()\r\n        if (values.comment) {\r\n            setDisableBtn({ comment: true })\r\n            const body = { postId: post.postId, value: values.comment }\r\n            fetch(`${SERVER}/posts/comment`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(body)\r\n            })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    if (res.success) {\r\n                        setValues({ comment: '' });\r\n                        enqueueSnackbar(res.message, { variant: \"success\" });\r\n                        var comments = post.commentslist;\r\n                        comments.unshift(res);\r\n                        setPost({\r\n                            ...post,\r\n                            comments: post.comments + 1,\r\n                            commentslist: comments\r\n                        });\r\n                    } else {\r\n                        if (res.status === 401)\r\n                            authDispatch({\r\n                                type: \"logout\"\r\n                            })\r\n                        enqueueSnackbar(res.message, { variant: \"error\" });\r\n\r\n                    }\r\n                    setDisableBtn({ comment: false });\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Failed to get post', { variant: \"error\" });\r\n                    setDisableBtn({ comment: false });\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            enqueueSnackbar(\"Comment can't be empty\", { variant: \"warning\" });\r\n        }\r\n    }\r\n\r\n    const handleLike = () => {\r\n        fetch(`${SERVER}/posts/like?postId=${post.postId}`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                if (res.success) {\r\n                    if (res.success) {\r\n                        if (res.liked) {\r\n                            setPost({\r\n                                ...post,\r\n                                likes: post.likes + 1,\r\n                            })\r\n                        } else {\r\n                            setPost({\r\n                                ...post,\r\n                                likes: post.likes - 1,\r\n                            })\r\n                        }\r\n                        setLiked(res.liked)\r\n                        // enqueueSnackbar(res.message, { variant: \"success\" });\r\n                    } else {\r\n                        if (res.status === 401)\r\n                            authDispatch({\r\n                                type: \"logout\"\r\n                            })\r\n                        enqueueSnackbar(res.message, { variant: \"error\" });\r\n                    }\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                enqueueSnackbar('Failed to like post', { variant: \"error\" });\r\n            });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (props.notSkeleton && post.postId) {\r\n            fetch(`${SERVER}/posts/like?postId=${post.postId}`, {\r\n                method: 'GET',\r\n                credentials: 'include',\r\n            })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    if (res.success) {\r\n                        setLiked(res.liked);\r\n                        // enqueueSnackbar(res.message, { variant: \"success\" });\r\n                    }\r\n                    // else {\r\n                    // if (res.status === 401)\r\n                    //     authDispatch({\r\n                    //         type: \"logout\"\r\n                    //     })\r\n                    // }\r\n                    setLoading(false);\r\n                })\r\n                .catch((error) => {\r\n                    setLoading(false);\r\n                    // enqueueSnackbar('Failed to like post', { variant: \"error\" });\r\n                })\r\n        }\r\n    }, [setLiked, post.postId, props.notSkeleton])\r\n\r\n    // React.useState(() => {\r\n    //     if (post !== props.post) {\r\n    //         setPost(props.post);\r\n    //     }\r\n    // }, [props.post])\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {!hide && <Card className={classes.card} variant=\"outlined\">\r\n                <CardHeader\r\n                    avatar={!loading && props.notSkeleton ? (<IconButton\r\n                        component={RouterLink}\r\n                        to={`/users/${post.owner.login}`}\r\n                        className={classes.noPadding}\r\n                        aria-label=\"user profile\">\r\n                        <Avatar aria-label=\"user avatar\" alt={post.owner.login} src={post.owner.avatar ? `${SERVER}${post.owner.avatar}` : \"\"}>\r\n                        </Avatar>\r\n                    </IconButton>)\r\n                        : (<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />)\r\n                    }\r\n                    action={!loading && props.notSkeleton ?\r\n                        (<IconButton\r\n                            aria-label=\"Post options\"\r\n                            aria-controls={menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handlePostMenuOpen}\r\n                        >\r\n                            <MoreVertIcon />\r\n                        </IconButton>)\r\n                        : null\r\n                    }\r\n                    title={!loading ? (\r\n                        <Typography\r\n                            component={RouterLink}\r\n                            to={`/users/${post.owner.login}`}\r\n                            color=\"inherit\"\r\n                            variant=\"body2\"\r\n                            style={{ textDecoration: \"none\" }}>\r\n                            {post.owner.login}\r\n                        </Typography>\r\n                    )\r\n                        : (<Skeleton animation=\"wave\" height={10} width=\"80%\" style={{ marginBottom: 6 }} />)}\r\n                    subheader={!loading ? `${t[1]} ${t[2]} ${t[3]}` : (<Skeleton animation=\"wave\" height={10} width=\"40%\" />)}\r\n                />\r\n                {!loading && props.notSkeleton ?\r\n                    (post.postImage && <CardMedia\r\n                        style={{\r\n                            height: 0,\r\n                            paddingTop: '56.25%',\r\n                        }}\r\n                        image={`${SERVER}${post.postImage}`}\r\n                        title={`${post.owner.login}'s post`}\r\n                        alt={post.postImage}\r\n                        to={`/posts/${post.postId}`}\r\n                        component={props.single ? CardContent : RouterLink}\r\n                    />\r\n                    )\r\n                    : (<Skeleton animation=\"wave\" variant=\"rect\" className={classes.media} />)\r\n                }\r\n                <CardContent>\r\n                    {!loading && props.notSkeleton ? (<Typography component=\"p\">\r\n                        {post.postText}\r\n                    </Typography>)\r\n                        : (<React.Fragment>\r\n                            <Skeleton animation=\"wave\" height={10} style={{ marginBottom: 6 }} />\r\n                            <Skeleton animation=\"wave\" height={10} width=\"80%\" />\r\n                        </React.Fragment>)\r\n                    }\r\n                </CardContent>\r\n\r\n                {!loading && props.notSkeleton ? (<Typography className={classes.marginLeft} variant='subtitle2' component=\"p\">\r\n                    {post.likes} {post.like > 1 ? \"Likes\" : \"Like\"}\r\n                    <Typography component=\"span\" variant='subtitle2' className={classes.marginLeft}>{post.comments} {post.comments > 1 ? \"Comments\" : \"Comment\"}</Typography>\r\n                </Typography>)\r\n                    : (<Skeleton animation=\"wave\" height={10} width=\"50%\" style={{ marginLeft: 16, marginBottom: 11 }} />)\r\n                }\r\n                <CardActions disableSpacing >\r\n                    {props.notSkeleton ? (<React.Fragment>\r\n                        {liked ? <Tooltip title=\"Unlike this\">\r\n                            <IconButton aria-label=\"unlike\" onClick={handleLike} color='primary'>\r\n                                <ThumbUpAltOutlinedIcon color=\"inherit\" />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                            : <Tooltip title=\"Like this\">\r\n                                <IconButton aria-label=\"like\" onClick={handleLike}>\r\n                                    <ThumbUpAltOutlinedIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        }\r\n                        <Tooltip title=\"Comments\">\r\n                            <IconButton className={classes.marginLeft} aria-label=\"comment\" onClick={handleExpandClick}>\r\n                                <CommentOutlinedIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Share this\">\r\n                            <IconButton aria-label=\"share\" className={classes.marginLeft}>\r\n                                <ShareIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </React.Fragment>)\r\n                        : (<div style={{ height: 36 }}></div>)\r\n                    }\r\n                </CardActions>\r\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n                    <Divider />\r\n                    <CardContent>\r\n                        <form onSubmit={handleSubmitNewComment} className={classes.commentForm}>\r\n                            {user && <Avatar src={user.avatar ? `${SERVER}${user.avatar}` : \"\"} className={classes.commentAvatar}></Avatar>}\r\n                            <TextField id=\"commentInput\" label=\"Write a comment...\" onChange={handleChange} value={values.comment} fullWidth />\r\n                            <div style={{ position: 'relative' }}>\r\n                                <Tooltip title=\"Add Comment\">\r\n                                    <IconButton aria-label=\"add comment\" color=\"primary\" type='submit' disabled={disableBtn.comment}>\r\n                                        <SendIcon />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                                {disableBtn.comment && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                            </div>\r\n                        </form>\r\n                    </CardContent>\r\n                    {props.notSkeleton && (post.commentslist.map(comment => <Comment comment={comment} key={comment.commentId} />))}\r\n                </Collapse>\r\n            </Card>}\r\n            {renderMenu}\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport PostCard from '../components/PostCard';\r\nimport { SERVER } from '../config';\r\nimport {\r\n    Button,\r\n    CircularProgress,\r\n    Box,\r\n} from '@material-ui/core';\r\n\r\nexport class GetPosts extends Component {\r\n    state = {\r\n        data: null,\r\n        loadMore: false,\r\n        nextPage: 1\r\n    }\r\n\r\n    nullPost = { postId: null, userId: null, postImage: null, postText: null, created_at: null };\r\n\r\n    getPosts = (page) => {\r\n        fetch(`${SERVER}${this.props.url}?page=${page}`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                if (res.success) {\r\n                    if (this.state.nextPage > 1) {\r\n                        this.setState({\r\n                            ...this.state,\r\n                            data: {\r\n                                next: res.next,\r\n                                posts: this.state.data.posts.concat(res.posts)\r\n                            },\r\n                            nextPage: this.state.nextPage + 1,\r\n                            loadMore: false,\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            ...this.state,\r\n                            data: res,\r\n                            nextPage: this.state.nextPage + 1,\r\n                            loadMore: false,\r\n                        });\r\n                    }\r\n                } else {\r\n                    // enqueueSnackbar(res.message, { variant: \"error\" });\r\n                    this.setState({\r\n                        ...this.state,\r\n                        nextPage: this.state.nextPage - 1,\r\n                        loadMore: false\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                // enqueueSnackbar('Failed to get post', { variant: \"error\" });\r\n                this.setState({\r\n                    ...this.state,\r\n                    nextPage: this.state.nextPage - 1,\r\n                    loadMore: false\r\n                });\r\n                console.error('Error:', error);\r\n            });\r\n    }\r\n\r\n    handleLoadMore = () => {\r\n        this.setState({\r\n            ...this.state,\r\n            loadMore: true\r\n        })\r\n        this.getPosts(this.state.nextPage);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getPosts(this.state.nextPage);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.authState.refreshPost !== prevProps.authState.refreshPost) {\r\n            this.setState({\r\n                ...this.state,\r\n                nextPage: 1,\r\n            })\r\n            this.getPosts(1);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.data ? (this.state.data.posts.map(post => <PostCard post={post} notSkeleton={true} key={post.postId} />))\r\n                    : (<React.Fragment>\r\n                        <PostCard notSkeleton={false} post={this.nullPost} key='skelton1' />\r\n                        <PostCard notSkeleton={false} post={this.nullPost} key='skelton2' />\r\n                    </React.Fragment>)\r\n                }\r\n                {this.state.data && this.state.data.next && <Box\r\n                    display=\"flex\"\r\n                    justifyContent=\"center\"\r\n                    style={{\r\n                        position: 'relative',\r\n                        marginBottom: 24,\r\n                    }}>\r\n                    <Button\r\n                        variant='outlined'\r\n                        color=\"primary\"\r\n                        onClick={this.handleLoadMore}\r\n                        disabled={this.state.loadMore}>\r\n                        Load More\r\n                    </Button>\r\n                    {this.state.loadMore && <CircularProgress\r\n                        size={24}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '50%',\r\n                            left: '50%',\r\n                            marginTop: -12,\r\n                            marginLeft: -12,\r\n                        }}>\r\n                    </CircularProgress>}\r\n                </Box>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GetPosts\r\n","import React from 'react'\r\nimport {\r\n    Container,\r\n    Box,\r\n    Typography,\r\n} from '@material-ui/core'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { useSnackbar } from 'notistack';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport GetPosts from '../components/GetPosts';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('sm')]: {\r\n            margin: theme.spacing(2),\r\n        }\r\n    },\r\n    marginBottom: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n}));\r\n\r\nfunction Home() {\r\n    const { authState } = React.useContext(AuthContext);\r\n    const classes = useStyles();\r\n\r\n    // const { enqueueSnackbar } = useSnackbar();\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.root}>\r\n                <Container maxWidth=\"sm\" disableGutters>\r\n                    <Typography variant=\"h4\" className={classes.marginBottom}>Latest Posts</Typography>\r\n                    <GetPosts authState={authState} url=\"/posts/\" />\r\n                </Container>\r\n                {/*<div style={{ flexGrow: 1 }}></div>*/}\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport {\r\n    CircularProgress,\r\n    Box,\r\n    Container,\r\n    Input,\r\n    Typography,\r\n    FormControl,\r\n    InputLabel,\r\n    InputAdornment,\r\n    IconButton,\r\n    Button,\r\n    Link\r\n} from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport AuthContext from \"../utils/AuthContext\";\r\nimport clsx from 'clsx';\r\nimport { validateEmail, validatePassword } from '../utils/validator'\r\nimport { useSnackbar } from 'notistack';\r\nimport { SERVER } from '../config'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    margin: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    relative: {\r\n        position: 'relative',\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    }\r\n}));\r\n\r\n\r\nfunction Login() {\r\n    const classes = useStyles();\r\n    const [values, setValues] = React.useState({\r\n        email: '',\r\n        password: '',\r\n        showPassword: false,\r\n    });\r\n    const [errors, setErrors] = React.useState({\r\n        email: false,\r\n        password: false,\r\n    });\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        submit: false,\r\n    })\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n        if (prop === \"email\") {\r\n            setErrors({\r\n                email: !validateEmail(event.target.value)\r\n            })\r\n        } else if (prop === \"password\") {\r\n            setErrors({\r\n                password: !validatePassword(event.target.value)\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        if (!errors.email && !errors.password && values.password && values.email) {\r\n            setDisableBtn({\r\n                submit: true\r\n            });\r\n            const data = { email: values.email, password: values.password }\r\n            await fetch(`${SERVER}/auth/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(data),\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        enqueueSnackbar('Login successfully!', { variant: \"success\" });\r\n                        authDispatch({\r\n                            type: 'LOGIN',\r\n                            payload: data\r\n                        });\r\n                    } else {\r\n                        enqueueSnackbar(data.message, { variant: \"error\" });\r\n                        setDisableBtn({\r\n                            submit: false\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Login failed!', { variant: \"error\" });\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            enqueueSnackbar('Email and Password should be valid.', { variant: \"warning\" });\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Container maxWidth=\"xs\" disableGutters>\r\n                <Box mt={5}>\r\n                    <form onSubmit={handleLogin}>\r\n                        <Typography variant=\"h4\" color=\"initial\">Log In</Typography>\r\n                        <Typography variant=\"body1\" color=\"inherit\">with your LinkBook account</Typography>\r\n                        <Box mt={2}>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.email}>\r\n                                <InputLabel htmlFor=\"userEmail\">Email</InputLabel>\r\n                                <Input\r\n                                    id=\"userEmail\"\r\n                                    value={values.email}\r\n                                    onChange={handleChange('email')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <MailIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.password}>\r\n                                <InputLabel htmlFor=\"userPassword\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"userPassword\"\r\n                                    type={values.showPassword ? 'text' : 'password'}\r\n                                    value={values.password}\r\n                                    onChange={handleChange('password')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <VpnKeyIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        <InputAdornment position=\"end\" >\r\n                                            <IconButton\r\n                                                aria-label=\"toggle password visibility\"\r\n                                                onClick={handleClickShowPassword}\r\n                                                onMouseDown={handleMouseDownPassword}\r\n                                            >\r\n                                                {values.showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl className={classes.margin}>\r\n                                <Link component={RouterLink} to=\"/forgetpass\" color=\"primary\">Forgot Your Password?</Link>\r\n                            </FormControl>\r\n                            <FormControl fullWidth className={clsx(classes.margin, classes.relative)} >\r\n                                <Button variant=\"contained\" color=\"primary\" disabled={disableBtn.submit} type='submit'>Log In</Button>\r\n                                {disableBtn.submit && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                            </FormControl>\r\n                            <Typography variant=\"subtitle1\" color=\"initial\" className={classes.margin} align=\"center\">\r\n                                Not registered? <Link component={RouterLink} to=\"/register\" color=\"primary\">Create a account</Link>\r\n                            </Typography>\r\n                        </Box>\r\n                    </form>\r\n                </Box>\r\n            </Container>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react';\r\nimport { Link as RouterLink, useHistory } from 'react-router-dom'\r\nimport {\r\n    CircularProgress,\r\n    Box,\r\n    Container,\r\n    Input,\r\n    Typography,\r\n    FormControl,\r\n    InputLabel,\r\n    InputAdornment,\r\n    IconButton,\r\n    Button,\r\n    Link,\r\n    FormHelperText\r\n} from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport clsx from 'clsx';\r\nimport { useSnackbar } from 'notistack';\r\nimport { validateEmail, validatePassword, validateUsername } from '../utils/validator'\r\nimport { SERVER } from '../config'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    margin: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    relative: {\r\n        position: 'relative',\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    }\r\n}));\r\n\r\nfunction Register() {\r\n    const classes = useStyles();\r\n    const [values, setValues] = React.useState({\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        showPassword: false,\r\n        showConfirmPassword: false,\r\n    });\r\n    const [errors, setErrors] = React.useState({\r\n        username: false,\r\n        email: false,\r\n        password: false,\r\n        confirmPassword: false\r\n    });\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        submit: false,\r\n    })\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const history = useHistory();\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n        if (prop === \"email\") {\r\n            setErrors({\r\n                email: !validateEmail(event.target.value)\r\n            })\r\n        } else if (prop === \"password\") {\r\n            setErrors({\r\n                password: !validatePassword(event.target.value)\r\n            })\r\n        } else if (prop === \"username\") {\r\n            setErrors({\r\n                username: !validateUsername(event.target.value)\r\n            })\r\n        } else if (prop === \"confirmPassword\") {\r\n            setErrors({\r\n                confirmPassword: event.target.value !== values.password ? true : false\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleClickShowConfirmPassword = () => {\r\n        setValues({ ...values, showConfirmPassword: !values.showConfirmPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (!errors.email && !errors.password && values.username && values.password && values.email && values.confirmPassword) {\r\n            setDisableBtn({\r\n                submit: true\r\n            });\r\n            const data = {\r\n                username: values.username,\r\n                email: values.email,\r\n                password: values.password,\r\n                confirmPassword: values.confirmPassword\r\n            }\r\n            await fetch(`${SERVER}/auth/register`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(data),\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        const variant = 'success';\r\n                        enqueueSnackbar('Registered successfully!', { variant });\r\n                        history.push(\"/login\")\r\n                    } else {\r\n                        const variant = 'error';\r\n                        enqueueSnackbar('Registration failed!', { variant });\r\n                        setDisableBtn({\r\n                            submit: false\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    const variant = 'error';\r\n                    enqueueSnackbar('Registration failed!', { variant });\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            enqueueSnackbar('Username, Email and Password should be valid.', { variant: \"warning\" });\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Container maxWidth=\"xs\" disableGutters>\r\n                <Box mt={5}>\r\n                    <form onSubmit={handleRegister}>\r\n                        <Typography variant=\"h4\" color=\"initial\">Register</Typography>\r\n                        <Typography variant=\"body1\" color=\"inherit\">to manage your account on LinkBook</Typography>\r\n                        <Box mt={2}>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.username}>\r\n                                <InputLabel htmlFor=\"userUsername\">Username</InputLabel>\r\n                                <Input\r\n                                    id=\"userUsername\"\r\n                                    type='text'\r\n                                    value={values.username}\r\n                                    onChange={handleChange('username')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <PersonIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.email}>\r\n                                <InputLabel htmlFor=\"userEmail\">Email</InputLabel>\r\n                                <Input\r\n                                    id=\"userEmail\"\r\n                                    type='email'\r\n                                    value={values.email}\r\n                                    onChange={handleChange('email')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <MailIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.password}>\r\n                                <InputLabel htmlFor=\"userPassword\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"userPassword\"\r\n                                    type={values.showPassword ? 'text' : 'password'}\r\n                                    value={values.password}\r\n                                    onChange={handleChange('password')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <VpnKeyIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        <InputAdornment position=\"end\" >\r\n                                            <IconButton\r\n                                                aria-label=\"toggle password visibility\"\r\n                                                onClick={handleClickShowPassword}\r\n                                                onMouseDown={handleMouseDownPassword}\r\n                                            >\r\n                                                {values.showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                                <FormHelperText>Use 8 or more characters with a mix of letters, numbers & symbols</FormHelperText>\r\n                            </FormControl>\r\n                            <FormControl fullWidth className={classes.margin} error={errors.confirmPassword}>\r\n                                <InputLabel htmlFor=\"userConfirmPassword\">Confirm Password</InputLabel>\r\n                                <Input\r\n                                    id=\"userConfirmPassword\"\r\n                                    type={values.showConfirmPassword ? 'text' : 'password'}\r\n                                    value={values.confirmPassword}\r\n                                    onChange={handleChange('confirmPassword')}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <VpnKeyIcon />\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        <InputAdornment position=\"end\" >\r\n                                            <IconButton\r\n                                                aria-label=\"toggle confirm password visibility\"\r\n                                                onClick={handleClickShowConfirmPassword}\r\n                                                onMouseDown={handleMouseDownPassword}\r\n                                            >\r\n                                                {values.showConfirmPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </FormControl>\r\n                            { /*<FormControl className={classes.margin}>\r\n                                <Link href=\"/forgetpass\" color=\"primary\">Forgot Your Password?</Link>\r\n                                </FormControl>*/}\r\n                            <FormControl fullWidth className={clsx(classes.margin, classes.relative)} >\r\n                                <Button variant=\"contained\" color=\"primary\" type='submit' disabled={disableBtn.submit}>Register</Button>\r\n                                {disableBtn.submit && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                            </FormControl>\r\n                            <Typography variant=\"subtitle1\" color=\"initial\" className={classes.margin} align=\"center\">\r\n                                Do you have an account? <Link color=\"primary\" component={RouterLink} to=\"/login\" >Login</Link>\r\n                            </Typography>\r\n                        </Box>\r\n                    </form>\r\n                </Box>\r\n            </Container>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React from 'react'\r\nimport {\r\n    Tooltip,\r\n    IconButton,\r\n    Modal,\r\n    Fade,\r\n    Backdrop,\r\n    Card,\r\n    CardActionArea,\r\n    CardActions,\r\n    Button,\r\n    CircularProgress,\r\n    Divider,\r\n    Container,\r\n    CardHeader,\r\n    CardContent,\r\n} from '@material-ui/core';\r\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useSnackbar } from 'notistack';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport { SERVER } from \"../config\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    modal: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    cardRoot: {\r\n        width: '100%',\r\n        maxWidth: 600,\r\n        overflow: 'auto',\r\n        margin: theme.spacing(2),\r\n        position: 'relative',\r\n        outline: 'none',\r\n    },\r\n    media: {\r\n        minHeight: 60,\r\n        maxHeight: 250,\r\n    },\r\n    image: {\r\n        maxHeight: 250,\r\n        maxWidth: '100%',\r\n    },\r\n    flexCenter: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    btnWrapper: {\r\n        position: 'relative',\r\n    },\r\n    input: {\r\n        display: 'none',\r\n    }\r\n}));\r\n\r\nvar image = null;\r\n\r\nexport default function NewAvatar() {\r\n    const classes = useStyles();\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n    const [open, setOpen] = React.useState(false);\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        submit: false,\r\n    });\r\n    const [values, setValues] = React.useState({\r\n        preview: '',\r\n    });\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleCreatePost = (e) => {\r\n        e.preventDefault();\r\n        setDisableBtn({ submit: true });\r\n        if (image) {\r\n            const formData = new FormData();\r\n            formData.append('image', image);\r\n\r\n            fetch(`${SERVER}/users/update-avatar`, {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                body: formData,\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        enqueueSnackbar('Avatar Updated!', { variant: \"success\" });\r\n                        setValues({ preview: '' })\r\n                        setOpen(false);\r\n                        authDispatch({\r\n                            type: \"REFUSER\"\r\n                        })\r\n                    } else {\r\n                        if (data.status === 401)\r\n                            authDispatch({\r\n                                type: \"LOGOUT\"\r\n                            })\r\n                        enqueueSnackbar(data.message, { variant: \"error\" });\r\n                        setValues({ preview: '' })\r\n                    }\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Avatar updation Failed', { variant: 'error' });\r\n                    setValues({ preview: '' })\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            setDisableBtn({ submit: false });\r\n            enqueueSnackbar('You need to select an image', { variant: 'warning' });\r\n        }\r\n    }\r\n\r\n    const handleInputChange = () => (event) => {\r\n        image = event.target.files[0];\r\n        setValues({ ...values, preview: URL.createObjectURL(event.target.files[0]) });\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Tooltip title=\"Change avatar\">\r\n                <IconButton color=\"primary\" aria-label=\"add new post\" onClick={handleOpen} >\r\n                    <CameraAltIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Modal\r\n                aria-labelledby=\"transition-modal-title\"\r\n                aria-describedby=\"transition-modal-description\"\r\n                className={classes.modal}\r\n                open={open}\r\n                onClose={handleClose}\r\n                closeAfterTransition\r\n                BackdropComponent={Backdrop}\r\n                BackdropProps={{\r\n                    timeout: 500,\r\n                }}\r\n            >\r\n                <Fade in={open}>\r\n                    <Card className={classes.cardRoot}>\r\n                        <form onSubmit={handleCreatePost}>\r\n                            <CardHeader\r\n                                action={\r\n                                    <Tooltip title=\"Close\">\r\n                                        <IconButton aria-label=\"Close Modal\" onClick={handleClose}>\r\n                                            <CloseIcon />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                }\r\n                                title=\"Update Avatar\"\r\n                            />\r\n                            <CardActionArea className={classes.media}>\r\n                                <Container disableGutters className={classes.flexCenter}>\r\n                                    <input\r\n                                        accept=\"image/*\"\r\n                                        className={classes.input}\r\n                                        id=\"postImage\"\r\n                                        type=\"file\"\r\n                                        onChange={handleInputChange()} />\r\n\r\n                                    {values.preview\r\n                                        ? (\r\n                                            <img src={values.preview} alt=\"Post\" className={classes.image} />\r\n                                        )\r\n                                        : <label htmlFor=\"postImage\">\r\n                                            <Tooltip title=\"Select Avatar Image\" component=\"span\">\r\n                                                <Button variant=\"contained\" aria-label=\"select avatar image\" color='primary' startIcon={<CameraAltIcon />}>\r\n                                                    Select Avatar Image\r\n                                                </Button>\r\n                                            </Tooltip>\r\n                                        </label>\r\n                                    }\r\n                                </Container>\r\n                            </CardActionArea>\r\n                            <CardContent className={classes.flexCenter}>\r\n                                {values.preview && <label htmlFor=\"postImage\">\r\n                                    <Tooltip title=\"Select other image\" component=\"span\">\r\n                                        <Button variant=\"contained\" aria-label=\"select avatar image\" color='primary' startIcon={<CameraAltIcon />}>\r\n                                            Select other Image\r\n                                        </Button>\r\n                                    </Tooltip>\r\n                                </label>}\r\n                            </CardContent>\r\n                            <Divider />\r\n                            <CardActions>\r\n                                <div style={{ flexGrow: 1 }}>\r\n                                </div>\r\n                                <Button variant=\"contained\" disableElevation onClick={handleClose}>\r\n                                    Close\r\n                                    </Button>\r\n                                <div className={classes.btnWrapper}>\r\n                                    <Button variant=\"contained\" color=\"primary\" type='submit' disableElevation disabled={disableBtn.submit}>\r\n                                        Update Avatar\r\n                                    </Button>\r\n                                    {disableBtn.submit && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                                </div>\r\n                            </CardActions>\r\n                        </form>\r\n                    </Card>\r\n                </Fade>\r\n            </Modal>\r\n        </React.Fragment>\r\n    );\r\n\r\n}\r\n\r\n","import React from 'react';\r\nimport {\r\n    Button,\r\n    CircularProgress\r\n} from '@material-ui/core';\r\nimport { SERVER } from '../config';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSnackbar } from 'notistack';\r\nimport AuthContext from '../utils/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    btnWrapper: {\r\n        position: 'relative',\r\n        marginRight: theme.spacing(1),\r\n    }\r\n}));\r\n\r\nfunction Follow(props) {\r\n    const classes = useStyles()\r\n    const [follow, setFollow] = React.useState(false)\r\n    const [disable, setDisable] = React.useState(false)\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleFollow = () => {\r\n        setDisable(true)\r\n        const data = { userId: props.userId };\r\n        fetch(`${SERVER}/users/follow?userId=${props.userId}`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    setFollow(!follow)\r\n                    authDispatch({\r\n                        type: 'REFUSER'\r\n                    })\r\n                    enqueueSnackbar(data.message, { variant: \"success\" });\r\n                } else {\r\n                    enqueueSnackbar(data.message, { variant: \"error\" });\r\n                }\r\n                setDisable(false);\r\n            })\r\n            .catch((error) => {\r\n                enqueueSnackbar(\"Request failed!\", { variant: \"error\" });\r\n                setDisable(false);\r\n                console.log(error);\r\n            });\r\n    }\r\n    React.useEffect(() => {\r\n        fetch(`${SERVER}/users/follow?userId=${props.userId}`, {\r\n            method: 'GET',\r\n            credentials: 'include'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    if (data.follow) {\r\n                        setFollow(true)\r\n                    } else {\r\n                        setFollow(false)\r\n                    }\r\n                } else {\r\n                    enqueueSnackbar(data.message, { variant: \"error\" });\r\n                    setFollow(false)\r\n                }\r\n            })\r\n            .catch((error) => {\r\n            });\r\n    }, [setFollow, props.userId, enqueueSnackbar]);\r\n    return (\r\n        <React.Fragment>\r\n            <div className={classes.btnWrapper}>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disableElevation\r\n                    onClick={handleFollow}\r\n                    disabled={disable}>\r\n                    {follow ? \"Unfollow\" : \"Follow\"}\r\n                </Button>\r\n                {disable && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Follow\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport {\r\n    Typography,\r\n    Avatar,\r\n    Box,\r\n    List,\r\n    ListItem,\r\n    Button,\r\n    Divider,\r\n    Container,\r\n    Link\r\n} from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useParams, Link as RouterLink } from 'react-router-dom';\r\n// import UserContext from '../utils/UserContext';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport NewAvatar from '../components/NewAvatar';\r\nimport { SERVER } from '../config';\r\nimport Follow from '../components/Follow';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    box: {\r\n        [theme.breakpoints.up('md')]: {\r\n            margin: theme.spacing(2)\r\n        },\r\n    },\r\n    gutters: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            paddingLeft: theme.spacing(3.5),\r\n        }\r\n    },\r\n    avatar: {\r\n        width: theme.spacing(25),\r\n        height: theme.spacing(25),\r\n\r\n    },\r\n    avatarBox: {\r\n        position: 'relative',\r\n        width: theme.spacing(25),\r\n        height: theme.spacing(25),\r\n    },\r\n    flex: {\r\n        display: 'flex',\r\n        // flexWrap: 'wrap',\r\n    },\r\n    mainFlex: {\r\n        flexDirection: 'column',\r\n        [theme.breakpoints.up('sm')]: {\r\n            flexDirection: 'row',\r\n        },\r\n    },\r\n    avatarWrapper: {\r\n        width: \"100%\",\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: theme.spacing(30),\r\n        },\r\n    },\r\n    mrLeft: {\r\n        marginLeft: theme.spacing(1)\r\n    },\r\n    mrRight: {\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    justCenter: {\r\n        justifyContent: 'center',\r\n    }\r\n}));\r\n\r\nfunction User(props) {\r\n    const classes = useStyles();\r\n    const { authState, authDispatch } = React.useContext(AuthContext);\r\n    const { username } = useParams();\r\n    // const user = React.useContext(UserContext);\r\n    const [data, setData] = React.useState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    React.useEffect(() => {\r\n        // if (user && username === user.login) {\r\n        //     setData(user);\r\n        // } else {\r\n        fetch(`${SERVER}/users/username/${username}`, {\r\n            method: 'GET',\r\n            credentials: 'include'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    setData(data)\r\n                } else {\r\n                    if (data.status === 401)\r\n                        authDispatch({\r\n                            type: \"LOGOUT\"\r\n                        })\r\n                    enqueueSnackbar(data.message, { variant: 'error' });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                enqueueSnackbar('Failed to get user data', { variant: 'error' })\r\n            });\r\n        // }\r\n    }, [username, enqueueSnackbar, authState.refreshPost, authState.refreshUser, authDispatch]);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {data\r\n                ? (\r\n                    <React.Fragment>\r\n                        <Box className={classes.box}>\r\n                            <Container maxWidth=\"md\" disableGutters>\r\n                                <List className={clsx(classes.flex, classes.mainFlex)}>\r\n                                    <ListItem className={clsx(classes.avatarWrapper, classes.justCenter)}>\r\n                                        <Box className={classes.avatarBox}>\r\n                                            <Avatar\r\n                                                alt={`${data.login}'s avatar`}\r\n                                                src={data.avatar ? `${SERVER}${data.avatar}` : \"\"}\r\n                                                className={classes.avatar}\r\n                                            ></Avatar>\r\n                                            {authState.userId === data.userId && <Box position=\"absolute\" style={{ bottom: 0, right: 0 }}>\r\n                                                <NewAvatar />\r\n                                            </Box>}\r\n                                        </Box>\r\n                                    </ListItem>\r\n                                    <ListItem disableGutters className={classes.gutters}>\r\n                                        <List style={{ width: '100%' }}>\r\n                                            <ListItem disableGutters>\r\n                                                <Typography variant=\"h4\" style={{ flexGrow: 1 }}>{data.login}</Typography>\r\n                                                {authState.userId === data.userId && <Button variant=\"contained\" color=\"primary\" startIcon={<EditIcon />} component={RouterLink} to=\"/settings\" > edit</Button>}\r\n                                            </ListItem>\r\n                                            <ListItem dense disableGutters>\r\n                                                <Typography variant='body2'>{data.bio ? data.bio : \"\"}</Typography>\r\n                                            </ListItem>\r\n                                            <ListItem dense disableGutters>\r\n                                                <Typography variant='body1'>{data.location ? data.location : \"\"}</Typography>\r\n                                            </ListItem>\r\n                                            <ListItem dense disableGutters>\r\n                                                <Typography variant='body1'\r\n                                                    href={data.website ? data.website : \"\"}\r\n                                                    target=\"_blank\"\r\n                                                    component={Link}>{data.website ? \"Website Link\" : null}</Typography>\r\n                                            </ListItem>\r\n                                            <ListItem disableGutters>\r\n                                                {authState.userId !== data.userId && <Follow userId={data.userId} />}\r\n                                                <Button className={classes.mrRight} variant=\"contained\" disableElevation>Share Profile</Button>\r\n                                            </ListItem>\r\n                                            <ListItem dense disableGutters>\r\n                                                <List className={classes.flex} >\r\n                                                    <ListItem disableGutters>\r\n                                                        <Typography className={clsx(classes.mrRight)} variant='h6'>{data.posts}</Typography>\r\n                                                        <Typography variant='body1' className={classes.mrRight}>Posts</Typography>\r\n                                                    </ListItem>\r\n                                                    <Divider orientation=\"vertical\" flexItem />\r\n                                                    <ListItem disableGutters>\r\n                                                        <Typography className={clsx(classes.mrRight, classes.mrLeft)} variant='h6'>{data.followers}</Typography>\r\n                                                        <Typography variant='body1' className={classes.mrRight}>Followers</Typography>\r\n                                                    </ListItem>\r\n                                                    <Divider orientation=\"vertical\" flexItem />\r\n                                                    <ListItem disableGutters>\r\n                                                        <Typography className={clsx(classes.mrRight, classes.mrLeft)} variant='h6'>{data.following}</Typography>\r\n                                                        <Typography variant='body1'>Following</Typography>\r\n                                                    </ListItem>\r\n                                                </List>\r\n                                            </ListItem>\r\n                                        </List>\r\n                                    </ListItem>\r\n                                </List>\r\n\r\n                            </Container>\r\n                        </Box>\r\n                    </React.Fragment>\r\n                )\r\n                : <Typography>Loading...</Typography>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default User\r\n","import { Route, Redirect } from 'react-router-dom';\r\nimport React from \"react\";\r\nimport AuthContext from \"../utils/AuthContext\";\r\n\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    const { authState } = React.useContext(AuthContext);\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => (\r\n                authState.isAuthenticated\r\n                    ?\r\n                    <Component {...props} />\r\n                    :\r\n                    <Redirect to={'/login'} />\r\n            )\r\n            }\r\n        />\r\n    )\r\n};\r\n\r\n\r\n\r\nexport default PrivateRoute;","import { Route, Redirect } from 'react-router-dom';\r\nimport React from \"react\";\r\nimport AuthContext from \"../utils/AuthContext\";\r\n\r\n\r\nconst PublicRoute = ({ component: Component, ...rest }) => {\r\n    const { authState } = React.useContext(AuthContext);\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => (\r\n                !authState.isAuthenticated\r\n                    ?\r\n                    <Component {...props} />\r\n                    :\r\n                    <Redirect to={'/'} />\r\n            )\r\n            }\r\n        />\r\n    )\r\n};\r\n\r\n\r\nexport default PublicRoute;","import React, { Component } from 'react'\r\nimport { Typography, Box, Button } from '@material-ui/core'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\nexport class NotFound extends Component {\r\n    render() {\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Typography variant=\"h1\" color=\"initial\" align=\"center\">404</Typography>\r\n                <Typography variant=\"h4\" color=\"initial\" align=\"center\">Page Not Found!</Typography>\r\n                <Box mt={2} align=\"center\">\r\n                    <Button color=\"primary\" component={Link} to=\"/\">\r\n                        <ArrowBackIcon /> Go to home\r\n                    </Button>\r\n                </Box>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NotFound\r\n","import { Typography } from '@material-ui/core'\r\nimport React, { Component } from 'react'\r\n\r\nexport class ForgetPass extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Typography>Forget pass</Typography>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ForgetPass\r\n","import {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    IconButton,\r\n    Input,\r\n    InputAdornment,\r\n    InputLabel,\r\n    CircularProgress\r\n} from '@material-ui/core'\r\nimport React from 'react'\r\n\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\n// import VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { useSnackbar } from 'notistack';\r\nimport { validatePassword } from '../utils/validator'\r\nimport { SERVER } from '../config';\r\nimport clsx from 'clsx';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    margin: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    relative: {\r\n        position: 'relative',\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    }\r\n}));\r\n\r\nexport default function ChangePasswordForm() {\r\n    const classes = useStyles();\r\n    const [values, setValues] = React.useState({\r\n        oldPassword: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        showPassword: false,\r\n        showOldPassword: false,\r\n    });\r\n\r\n    const [errors, setErrors] = React.useState({\r\n        password: false,\r\n        confirmPassword: false\r\n    });\r\n\r\n    const [disableBtn, setDisableBtn] = React.useState({\r\n        submit: false,\r\n    })\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n        if (prop === \"password\") {\r\n            setErrors({\r\n                password: !validatePassword(event.target.value)\r\n            })\r\n        } else if (prop === \"confirmPassword\") {\r\n            setErrors({\r\n                confirmPassword: event.target.value !== values.password ? true : false\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleClickShowOldPassword = () => {\r\n        setValues({ ...values, showOldPassword: !values.showOldPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const handleChangePass = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"change pass submitted\")\r\n        if (!errors.password && !errors.confirmPassword && values.password && values.oldPassword) {\r\n            setDisableBtn({\r\n                submit: true\r\n            });\r\n            const data = {\r\n                oldPassword: values.oldPassword,\r\n                password: values.password,\r\n                confirmPassword: values.confirmPassword\r\n            };\r\n            fetch(`${SERVER}/auth/update-pass`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(data),\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        enqueueSnackbar('Password Changed successfully!', { variant: \"success\" });\r\n                        setValues({\r\n                            oldPassword: '',\r\n                            password: '',\r\n                            confirmPassword: '',\r\n                            showPassword: false,\r\n                            showOldPassword: false,\r\n                        });\r\n                    } else {\r\n                        enqueueSnackbar(data.message, { variant: \"error\" });\r\n                    }\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    enqueueSnackbar('Password Change failed!', { variant: \"error\" });\r\n                    setDisableBtn({\r\n                        submit: false\r\n                    })\r\n                    console.error('Error:', error);\r\n                });\r\n        } else {\r\n            enqueueSnackbar('Current password or new password should be valid.', { variant: \"warning\" });\r\n        }\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <form onSubmit={handleChangePass}>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <InputLabel htmlFor=\"userCurrentPassword\">Current Password</InputLabel>\r\n                    <Input\r\n                        id=\"userCurrentPassword\"\r\n                        type={values.showOldPassword ? 'text' : 'password'}\r\n                        value={values.oldPassword}\r\n                        onChange={handleChange('oldPassword')}\r\n                        /*startAdornment={\r\n                            <InputAdornment position=\"start\" >\r\n                                <VpnKeyIcon />\r\n                            </InputAdornment>\r\n                        }*/\r\n                        endAdornment={\r\n                            <InputAdornment position=\"end\" >\r\n                                <IconButton\r\n                                    aria-label=\"toggle confirm password visibility\"\r\n                                    onClick={handleClickShowOldPassword}\r\n                                    onMouseDown={handleMouseDownPassword}\r\n                                >\r\n                                    {values.showOldPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        }\r\n                    />\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin} error={errors.password}>\r\n                    <InputLabel htmlFor=\"userPassword\">New Password</InputLabel>\r\n                    <Input\r\n                        id=\"userPassword\"\r\n                        type={values.showPassword ? 'text' : 'password'}\r\n                        value={values.password}\r\n                        onChange={handleChange('password')}\r\n                        /*startAdornment={\r\n                            <InputAdornment position=\"start\" >\r\n                                <VpnKeyIcon />\r\n                            </InputAdornment>\r\n                        }*/\r\n                        endAdornment={\r\n                            <InputAdornment position=\"end\" >\r\n                                <IconButton\r\n                                    aria-label=\"toggle password visibility\"\r\n                                    onClick={handleClickShowPassword}\r\n                                    onMouseDown={handleMouseDownPassword}\r\n                                >\r\n                                    {values.showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        }\r\n                    />\r\n                    <FormHelperText>Use 8 or more characters with a mix of letters, numbers & symbols</FormHelperText>\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin} error={errors.confirmPassword}>\r\n                    <InputLabel htmlFor=\"userConfirmPassword\">Confirm Password</InputLabel>\r\n                    <Input\r\n                        id=\"userConfirmPassword\"\r\n                        type={values.showPassword ? 'text' : 'password'}\r\n                        value={values.confirmPassword}\r\n                        onChange={handleChange('confirmPassword')}\r\n                    /*startAdornment={\r\n                        <InputAdornment position=\"start\" >\r\n                            <VpnKeyIcon />\r\n                        </InputAdornment>\r\n                    }*/\r\n                    />\r\n                </FormControl>\r\n                <FormControl className={clsx(classes.margin, classes.relative)} >\r\n                    <Button variant=\"contained\" color=\"primary\" type='submit' disabled={disableBtn.submit}>Change Password</Button>\r\n                    {disableBtn.submit && <CircularProgress size={24} className={classes.progressbar}></CircularProgress>}\r\n                </FormControl>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport UserContext from '../utils/UserContext';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    CircularProgress,\r\n    Input,\r\n    InputLabel,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport { SERVER } from '../config';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    submit: {\r\n        position: 'relative'\r\n    },\r\n    progressbar: {\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    margin: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    form: {\r\n        marginBottom: theme.spacing(4)\r\n    }\r\n}));\r\n\r\nexport default function EditProfile() {\r\n    const classes = useStyles();\r\n    const user = React.useContext(UserContext);\r\n    const { authDispatch } = React.useContext(AuthContext);\r\n    const [values, setValues] = React.useState({\r\n        name: '',\r\n        email: '',\r\n        bio: '',\r\n        website: '',\r\n        location: '',\r\n    });\r\n    const [disable, setDisable] = React.useState(false);\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setDisable(true);\r\n        const data = {\r\n            \"email\": values.email,\r\n            \"name\": values.name,\r\n            \"bio\": values.bio,\r\n            \"location\": values.location,\r\n            \"website\": values.website\r\n        };\r\n        fetch(`${SERVER}/users/update-profile`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            credentials: 'include',\r\n            body: JSON.stringify(data),\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    enqueueSnackbar('Profile updated!', { variant: \"success\" })\r\n                    authDispatch({\r\n                        type: 'REFUSER'\r\n                    })\r\n                } else {\r\n                    if (data.status === 401)\r\n                        authDispatch({\r\n                            type: \"LOGOUT\"\r\n                        })\r\n                    enqueueSnackbar(data.message, { variant: \"error\" });\r\n                }\r\n                setDisable(false)\r\n            })\r\n            .catch((error) => {\r\n                enqueueSnackbar('Profile updation Failed', { variant: 'error' });\r\n                setDisable(false)\r\n                console.error('Error:', error);\r\n            });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (user) {\r\n            setValues({\r\n                name: user.name,\r\n                email: user.email,\r\n                bio: user.bio,\r\n                website: user.website,\r\n                location: user.location,\r\n            })\r\n        }\r\n    }, [user])\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form onSubmit={handleSubmit} className={classes.form}>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <InputLabel htmlFor=\"userName\">Name</InputLabel>\r\n                    <Input\r\n                        type=\"text\"\r\n                        id=\"userName\"\r\n                        value={values.name}\r\n                        onChange={e => setValues({ ...values, name: e.target.value })}\r\n                    />\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <InputLabel htmlFor=\"userEmail\">Email</InputLabel>\r\n                    <Input\r\n                        type=\"email\"\r\n                        id=\"userEmail\"\r\n                        value={values.email}\r\n                        onChange={e => setValues({ ...values, email: e.target.value })}\r\n                    />\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <TextField\r\n                        fullWidth\r\n                        id=\"userBio\"\r\n                        rows={3}\r\n                        label=\"Write something about you\"\r\n                        value={values.bio}\r\n                        multiline\r\n                        maxLength=\"200\"\r\n                        onChange={e => setValues({ ...values, bio: e.target.value })}\r\n                    />\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <InputLabel htmlFor=\"userLocation\">Location</InputLabel>\r\n                    <Input\r\n                        type=\"text\"\r\n                        id=\"userLocation\"\r\n                        value={values.location}\r\n                        onChange={e => setValues({ ...values, location: e.target.value })}\r\n                    />\r\n                </FormControl>\r\n                <FormControl fullWidth className={classes.margin}>\r\n                    <InputLabel htmlFor=\"userWebsite\">Website</InputLabel>\r\n                    <Input\r\n                        type=\"url\"\r\n                        id=\"userWebsite\"\r\n                        value={values.website}\r\n                        onChange={e => setValues({ ...values, website: e.target.value })}\r\n                    />\r\n                </FormControl>\r\n\r\n                <FormControl className={clsx(classes.submit, classes.margin)}>\r\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\" disabled={disable}>\r\n                        Update Profile\r\n                    </Button>\r\n                    {disable && <CircularProgress size={24} className={classes.progressbar}>\r\n                    </CircularProgress>}\r\n                </FormControl>\r\n            </form>\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import {\r\n    Typography,\r\n    Tabs,\r\n    Tab,\r\n    Divider,\r\n    Box,\r\n    Container,\r\n} from '@material-ui/core'\r\nimport React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ChangePasswordForm from '../components/ChangePasswordForm';\r\nimport EditProfile from '../components/EditProfile';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            margin: theme.spacing(2),\r\n        }\r\n    },\r\n    mrBottom: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    mrTop: {\r\n        marginTop: theme.spacing(3),\r\n    }\r\n}));\r\n\r\nexport default function Settings() {\r\n\r\n    const classes = useStyles();\r\n    const [index, setIndex] = React.useState(0);\r\n\r\n    const handleChangeIndex = (event, index) => {\r\n        setIndex(index);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.root}>\r\n                <Typography variant=\"h4\" className={classes.mrBottom}>Account Settings</Typography>\r\n                <Tabs\r\n                    value={index}\r\n                    onChange={handleChangeIndex}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    style={{ overflow: \"auto\" }}\r\n                >\r\n                    <Tab label=\"Profile\" />\r\n                    <Tab label=\"Password\" />\r\n                    {/*<Tab label=\"Account\" />*/}\r\n                </Tabs>\r\n                <Divider />\r\n\r\n                {(index === 0) && (<Box index={0} className={classes.mrTop} style={{ display: 'flex' }}>\r\n                    <Container maxWidth=\"xs\" disableGutters>\r\n                        <EditProfile />\r\n                    </Container>\r\n                    <div style={{ flexGrow: 1 }}></div>\r\n                </Box>)}\r\n                {(index === 1) && (<Box index={1} style={{ display: 'flex' }}>\r\n                    <Container maxWidth=\"xs\" disableGutters>\r\n                        <ChangePasswordForm />\r\n                    </Container>\r\n                    <div style={{ flexGrow: 1 }}></div>\r\n                </Box>)}\r\n                {/* {(index === 2) && (<Box index={2} className={classes.mrTop}>\r\n                    Account Settings will come soon...\r\n               </Box>)}*/}\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n\r\n}\r\n\r\n","import React from 'react'\r\nimport {\r\n    Container,\r\n    Box,\r\n    Typography,\r\n} from '@material-ui/core'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { useSnackbar } from 'notistack';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport GetPosts from '../components/GetPosts';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('sm')]: {\r\n            margin: theme.spacing(2),\r\n        }\r\n    },\r\n    marginBottom: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n}));\r\n\r\nfunction Feed() {\r\n    const { authState } = React.useContext(AuthContext);\r\n    const classes = useStyles();\r\n\r\n    // const { enqueueSnackbar } = useSnackbar();\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.root}>\r\n                <Container maxWidth=\"sm\" disableGutters>\r\n                    <Typography variant=\"h4\" className={classes.marginBottom}>Feed</Typography>\r\n                    <GetPosts authState={authState} url=\"/posts/feed/\" />\r\n                </Container>\r\n                {/*<div style={{ flexGrow: 1 }}></div>*/}\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Feed;\r\n","import React from 'react'\r\nimport {\r\n    Container,\r\n    Box,\r\n    Typography,\r\n} from '@material-ui/core'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { useSnackbar } from 'notistack';\r\nimport AuthContext from '../utils/AuthContext';\r\nimport GetPosts from '../components/GetPosts';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('sm')]: {\r\n            margin: theme.spacing(2),\r\n        }\r\n    },\r\n    marginBottom: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n}));\r\n\r\nfunction Tranding() {\r\n    const { authState } = React.useContext(AuthContext);\r\n    const classes = useStyles();\r\n\r\n    // const { enqueueSnackbar } = useSnackbar();\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Box className={classes.root}>\r\n                <Container maxWidth=\"sm\" disableGutters>\r\n                    <Typography variant=\"h4\" className={classes.marginBottom}>Trending</Typography>\r\n                    <GetPosts authState={authState} url='/posts/trending/' />\r\n                </Container>\r\n                {/*<div style={{ flexGrow: 1 }}></div>*/}\r\n            </Box>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Tranding;","import React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport PostCard from '../components/PostCard';\r\nimport { SERVER } from '../config';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Typography } from '@material-ui/core'\r\n\r\nfunction PostById() {\r\n\tconst { postId } = useParams();\r\n\tconst [post, setPost] = React.useState();\r\n\tconst [value, setValue] = React.useState(\"Loading...\");\r\n\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\r\n\tReact.useEffect(() => {\r\n\t\tfetch(`${SERVER}/posts/byid?postId=${postId}`, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\tcredentials: 'include',\r\n\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tsetPost(res.post);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPost();\r\n\t\t\t\t\tsetValue(\"Request post is either deleted or post id is wrong\");\r\n\t\t\t\t\tenqueueSnackbar(res.message, { variant: \"error\" });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tsetPost();\r\n\t\t\t\tsetValue(\"Failed to get post\");\r\n\t\t\t\tenqueueSnackbar('Failed to get post', { variant: \"error\" });\r\n\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t});\r\n\t}, [postId, enqueueSnackbar])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{post ? (<PostCard post={post} notSkeleton={true} single={true} />)\r\n\t\t\t\t: <Typography variant=\"subtitle1\" color=\"inherit\">{value}</Typography>}\r\n\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default PostById;\r\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport ScrollToTop from './components/ScrollToTop';\nimport Navigation from \"./components/navigation\";\nimport Home from './pages/Home';\nimport Login from \"./pages/Login\"\nimport Register from './pages/Register';\nimport User from './pages/User';\nimport PrivateRoute from \"./utils/PrivateRoute\";\nimport PublicRoute from \"./utils/PublicRoute\"\nimport NotFound from \"./pages/NotFound\";\nimport ForgetPass from './pages/ForgetPass';\nimport AuthContext from \"./utils/AuthContext\";\nimport Settings from './pages/Settings';\nimport Feed from './pages/Feed';\nimport Trending from './pages/Trending';\nimport PostById from './pages/PostById';\nimport { SnackbarProvider } from 'notistack';\nimport { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory({ basename: '/your-base-name' });\n\nconst authReducer = (authState, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      return {\n        ...authState,\n        isAuthenticated: true,\n        userId: action.payload.userId,\n        username: action.payload.username\n      };\n    case \"LOGOUT\":\n      return {\n        ...authState,\n        isAuthenticated: false,\n        userId: null,\n        username: null\n      };\n    case \"REFPOST\":\n      return {\n        ...authState,\n        refreshPost: !authState.refreshPost\n      };\n    case \"REFUSER\":\n      return {\n        ...authState,\n        refreshUser: !authState.refreshUser\n      };\n    default:\n      return authState;\n  }\n};\n\n\nfunction App(props) {\n  const initialState = props.initialState;\n  const [authState, authDispatch] = React.useReducer(authReducer, initialState);\n\n  return (\n    <React.Fragment>\n      <Router basename=\"/socialmedia_frontend\" history={history}>\n        <SnackbarProvider\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          maxSnack={2}\n        >\n          <AuthContext.Provider value={{ authState, authDispatch }}>\n            <Navigation>\n              <Switch>\n                <PrivateRoute exact path=\"/\" component={Home} />\n                <PublicRoute exact path=\"/login\" component={Login} />\n                <PublicRoute exact path=\"/forgetpass\" component={ForgetPass} />\n                <PublicRoute exact path=\"/register\" component={Register} />\n                <PrivateRoute exact path=\"/settings\" component={Settings} />\n                <PrivateRoute exact path=\"/feed\" component={Feed} />\n                <PrivateRoute exact path=\"/trending\" component={Trending} />\n                <PrivateRoute exact path=\"/posts/:postId\" component={PostById} />\n                <PrivateRoute exact path=\"/users/:username\" component={User} />\n                <Route component={NotFound} />\n              </Switch>\n            </Navigation>\n          </AuthContext.Provider>\n          <ScrollToTop />\n        </SnackbarProvider>\n      </Router>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React, { Component } from 'react'\r\nimport App from '../App';\r\nimport { SERVER } from '../config'\r\n\r\n\r\nexport class CheckAuthWrapper extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            initialState: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${SERVER}/auth/`, {\r\n            method: 'GET',\r\n            credentials: 'include'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    this.setState({\r\n                        initialState: {\r\n                            isAuthenticated: true,\r\n                            userId: data.userId,\r\n                            username: data.username,\r\n                            refreshPost: false,\r\n                            refreshUser: false,\r\n                        }\r\n                    })\r\n                } else {\r\n                    this.setState({\r\n                        initialState: {\r\n                            isAuthenticated: false,\r\n                            userId: null,\r\n                            username: null,\r\n                            refreshPost: false,\r\n                            refreshUser: false,\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    initialState: {\r\n                        isAuthenticated: false,\r\n                        userId: null,\r\n                        username: null,\r\n                        refreshUser: false,\r\n                        refreshPost: false,\r\n                    }\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.initialState ? (\r\n                <App initialState={this.state.initialState} />\r\n            ) : <p>Loading...</p>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CheckAuthWrapper\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import App from './App';\nimport CheckAuthWrapper from './components/CheckAuthWrapper'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\n  <CheckAuthWrapper />\n  , document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","const emailRegExp = new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/);\r\nconst passRegExp = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,16}$/);\r\nconst usernameRegExp = new RegExp(/^(?=.{4,20}$)[a-zA-Z0-9]*$/);\r\nconst postTextRegExp = new RegExp(/^.{10,255}$/);\r\n\r\nconst validateEmail = (email) => {\r\n    return emailRegExp.test(email);\r\n}\r\nconst validatePassword = (password) => {\r\n    return passRegExp.test(password);\r\n}\r\n\r\nconst validateUsername = (username) => {\r\n    return usernameRegExp.test(username);\r\n}\r\n\r\nconst validatePostText = (postText) => {\r\n    return postTextRegExp.test(postText);\r\n}\r\n\r\nmodule.exports = {\r\n    validateEmail,\r\n    validatePassword,\r\n    validateUsername,\r\n    validatePostText\r\n}"],"sourceRoot":""}